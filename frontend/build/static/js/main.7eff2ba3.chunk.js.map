{"version":3,"sources":["utlis/client.ts","context/AppContext.tsx","context/UserContext.tsx","utlis/useWindowSize.tsx","components/Navbar.tsx","api/anime/homeListAPI.ts","components/styles/Styles.tsx","components/Home/Carousel.tsx","utlis/getUrlObj.ts","components/Search/SearchBox.tsx","components/Search/SelectList.ts","components/Search/OptionList.tsx","components/Search/SearchSection.tsx","pages/HomePage.tsx","components/styles/ButtonStyles.tsx","pages/LoginPage.tsx","components/LoadingSpinner.tsx","components/UserLink.tsx","components/Anime/Comment.tsx","components/Anime/Comments.tsx","components/Anime/RightSide.tsx","components/Anime/LeftSide.tsx","components/Anime/Characters.tsx","components/Loading.tsx","api/anime/animeAPI.ts","pages/AnimePage.tsx","pages/RegisterPage.tsx","components/Account/Favorites.tsx","components/Account/Sidebar.tsx","components/Account/Profile.tsx","components/EmptyState.tsx","components/Account/Comments.tsx","components/Account/Discussions.tsx","components/Account/Settings/Avatar.tsx","components/Account/Settings/Credentials.tsx","components/Account/Settings/Settings.tsx","components/Account/Social.tsx","pages/AccountPage.tsx","utlis/constants.ts","components/Footer.tsx","components/Modal/ModalMessage.tsx","components/Modal/Modals.tsx","components/Modal/RootModal.tsx","api/anime/characterAPI.ts","components/Character/Comment.tsx","components/Character/Comments.tsx","pages/CharacterPage.tsx","pages/DiscussionsListPage.tsx","components/Like.tsx","components/Discussions/RenderPosts.tsx","components/Discussions/Posts.tsx","components/Discussions/Thread.tsx","pages/DiscussionPage.tsx","pages/NotFound.tsx","pages/MemberPage.tsx","api/anime/searchAPI.ts","components/Search/EmptyState.tsx","components/Search/Card.tsx","pages/SearchPage.tsx","App.tsx","index.tsx"],"names":["base_url","fetchWrapper","url","a","method","body","accessToken","fetch","JSON","stringify","credentials","headers","Authorization","Accept","res","json","ok","status","data","message","console","log","customFetch","Promise","resolve","_reject","localStorage","getItem","response1","authResponse","setItem","response2","initialState","modal","isOpen","type","props","modalMessage","text","isSuccess","showModal","hideModal","showModalMessage","hideModalMessage","client","AppContext","createContext","AppProvider","children","useState","setModal","setModalMessage","shouldShowMessage","value","Provider","setAccessToken","UserContext","user","isLoading","isLoggedIn","loadingUser","setUser","changeUserData","UserProvider","useContext","setUserData","prev","useWindowSize","size","setSize","useLayoutEffect","updateSize","window","innerWidth","innerHeight","addEventListener","removeEventListener","Navbar","theme","switchTheme","handleSwitchTheme","isMenuOpen","setIsMenuOpen","width","Nav","className","to","onClick","src","alt","username","MobileMenuStyle","id","memo","styled","nav","div","commentBg","header","homeListQuery","options","query","H1","h1","customStyle","H2","h2","Carousel","list","containerRef","useRef","scrollContainer","direction","current","scrollLeft","clientWidth","Section","ref","map","item","index","coverImage","extraLarge","title","english","slice","romaji","highlightColor","color","height","section","scrollbar","getUrlObj","str","entries","URLSearchParams","Object","fromEntries","SearchBox","location","history","search","setQuery","useEffect","SearchBoxEl","onChange","e","target","onKeyDown","key","trim","newParams","toString","push","boxShadow","selectLists","name","reverse","List","OptionList","setIsOpen","listEl","ul","closeList","option","params","filterByOption","Container","AllFilters","SearchSection","useLocation","useHistory","FiltersBox","SelectedFilters","filter","setFilter","obj","arr","removeFilter","Home","trending","setTrending","top","setTop","isMounted","media","getAnimes","PrimaryButtonStyle","button","PrimaryBtn","disabled","spinnerSize","SecondaryBtnStyle","SecondaryBtn","Login","email","password","form","setForm","handleChange","handleSubmit","then","LoginEl","placeholder","required","autoComplete","LoadingEl","padding","LoadingSpinner","UserLink","avatar_url","date","isEdited","formatDistanceStrict","Date","addSuffix","Comment","comment","getComments","newComment","setNewComment","isEditOpen","setIsEditOpen","pending","setPending","user_id","textareaRef","scrollHeight","style","selectionStart","length","selectionEnd","focus","handleEditSubmit","comment_id","CommentBox","avatar","created_at","is_edited","defaultValue","Comments","anime_id","comments","setComments","setIsLoading","isSending","setIsSending","setText","preventDefault","CommentForm","onSubmit","RightSide","favAnime","handleAddToFavorites","handleRemoveFromFavorites","btnName","isFavorite","dangerouslySetInnerHTML","__html","description","genres","genre","trailer","allowFullScreen","LeftSide","season","seasonYear","format","episodes","duration","studios","edges","node","Characters","hasOwnProperty","characters","full","image","large","Loading","animeQuery","variables","Media","AnimePage","match","anime","setAnime","setFavAnime","getAnimeData","replace","is_favorite","cover_image","Register","password2","RegisterEl","Favorites","favorites","setFavorites","animeData","characterData","character","character_id","Card","link","CardContainer","Sidebar","category","SideNav","aside","Profile","about","newAbout","setNewAbout","isAboutPending","setIsAboutPending","handleLogout","removeItem","handleUpdateAbout","ProfileEl","parseISO","EmptyEl","EmptyState","animeComments","setAnimeComments","characterComments","setCharacterComments","CommentsContainer","linkTitle","formatRelative","DiscussionsStyle","Discussions","threads","setThreads","getData","thread","thread_id","topic","Avatar","inputRef","fileInput","setFileInput","previewImg","setPreviewImg","b64Img","setB64Img","setMessage","InputSquare","click","accept","files","file","reader","FileReader","readAsDataURL","onloadend","result","onerror","Credentials","edit","setEdit","isPending","newUsername","setNewUsername","newEmail","setNewEmail","handleSubmitUsername","handleSubmitEmail","Input","input","Settings","SettingsContainer","Social","relation","setRelation","getRelation","SocialEl","following","followers","follower","User","useParams","lightTheme","darkTheme","FooterEl","footer","Footer","href","ModalMessage","createRef","close","setTimeout","clearTimeout","createPortal","CSSTransition","nodeRef","in","timeout","classNames","unmountOnExit","document","querySelector","Textarea","textarea","MODAL_COMPONENTS","CHANGE_PASSWORD","oldPassword","setOldPassword","newPassword","setNewPassword","newPassword2","setNewPassword2","OPEN_THREAD","setTopic","setBody","DEFAULT","DELETE_THREAD","getThread","handleDelete","DELETE_POST","post","getPosts","handleDeletePost","post_id","DELETE_COMMENT","RootModal","CurrentModal","ReactDom","ModalContainer","characterQuery","Character","new_comment","marked","setOptions","breaks","CharacterPage","setCharacter","favCharacter","setFavCharacter","isSmallScreen","setIsSmallScreen","CharacterPageEl","RelationCardList","RelationCard","DiscussionListPage","PageEl","Header","ThreadCard","LikeEl","Like","count","isLiked","iconCode","Number","RenderPosts","depth","isCommentFieldOpen","setIsCommentFieldOpen","newPost","setNewPost","editedPost","setEditedPost","isLikePending","setIsLikePending","handlePostSubmit","parent_id","handleLike","handleUnlike","PostEl","is_deleted","like_count","is_liked","Posts","posts","setPosts","submitPost","Thread","setThread","isEditLoading","setIsEditLoading","editedThread","setEditedThread","handleEdit","ThreadCardEl","DiscussionPage","NotFound","MemberPage","member","setMember","isFollowing","setFollowing","getMember","handleFollow","handleUnfollow","MemberPageStyle","MobileStyle","isMobile","favorite_anime","favorite_characters","Aside","MainSection","UserLinkStyle","searchQuery","sort","Page","setLoaded","bgColor","CardBox","onLoad","SkeletonCard","array","Array","SearchPage","setResult","hasNoResult","setHasNoResult","page","setPage","loading","setLoading","hasNextPage","sethasNextPage","urlParams","searchAPI","pageInfo","prevResult","year","SearchResults","num","SearchPageStyle","dataLength","next","pullDownToRefreshThreshold","hasMore","loader","App","setTheme","userTheme","GlobalStyle","themeType","exact","path","component","DiscussionsListPage","createGlobalStyle","render","StrictMode","getElementById"],"mappings":"2QAAaA,EAAmD,OAiCnDC,EAAY,uCAAG,WAC3BC,GAD2B,mCAAAC,EAAA,6DAE3BC,EAF2B,+BAEV,MACjBC,EAH2B,uBAI3BC,EAJ2B,yCAORC,MAAMP,EAAWE,EAAK,CACvCE,SACAC,KAAMA,GAAQG,KAAKC,UAAUJ,GAC7BK,YAAa,UACbC,QAAS,CACRC,cAAe,UAAYN,EAC3B,eAAgB,mBAChBO,OAAQ,sBAdgB,cAOpBC,EAPoB,gBAiBPA,EAAIC,OAjBG,cAiBpBA,EAjBoB,yBAkBnB,CACNC,GAAIF,EAAIE,GACRC,OAAQH,EAAIG,OACZC,KAAMH,EAAKG,KACXC,QAASJ,EAAKI,UAtBW,yCAyB1BC,QAAQC,IAAR,MAzB0B,+BA0BjBL,IAAI,GA1Ba,iEAAH,sDA6BVM,EArDK,SAACpB,GAA6E,IAAhEE,EAA+D,uDAA9C,MAAOC,EAAuC,uCAChG,OAAO,IAAIkB,QAAJ,uCAAY,WAAOC,EAASC,GAAhB,qBAAAtB,EAAA,6DACZG,EAAcoB,aAAaC,QAAQ,gBAAkB,GADzC,kBAGO1B,EAAaC,EAAKE,EAAQC,EAAMC,GAHvC,UAIQ,OADnBsB,EAHW,QAIHX,OAJG,yCAKTO,EAAQI,IALC,UAOZtB,EAPY,yCAQTkB,EAAQ,CAAEL,QAAS,4BAA6BH,IAAI,KAR3C,wBAUef,EAAa,2BAA4B,QAVxD,aAUX4B,EAVW,QAWAb,GAXA,wBAYhBU,aAAaI,QAAQ,cAAeD,EAAaX,KAAKZ,aAZtC,UAaQL,EAAaC,EAAKE,EAAQC,EAAMwB,EAAaX,KAAKZ,aAb1D,QAaVyB,EAbU,OAchBP,EAAQO,GAdQ,wBAgBhBP,EAAQ,CAAEL,QAAS,4BAA6BH,IAAI,IAhBpC,0DAmBjBQ,EAAQ,CAAEL,QAAS,uBAAwBH,IAAI,IAnB9B,0DAAZ,0D,OCgCFgB,EAA6B,CAClCC,MAAO,CAAEC,QAAQ,EAAOC,KAAM,UAAWC,MAAO,MAChDC,aAAc,CAAEC,KAAM,GAAIC,WAAW,GACrCC,UAAW,aACXC,UAAW,aACXC,iBAAkB,aAClBC,iBAAkB,aAClBC,OAAQ,kBAAM,IAAIrB,SAAQ,iBAAO,CAAEP,IAAI,EAAOC,OAAQ,IAAKC,KAAM,KAAMC,QAAS,SAEpE0B,EAAaC,wBAA4Bd,GAEzCe,EAAkB,SAAC,GAAkB,IAAhBC,EAAe,EAAfA,SACjC,EAA0BC,mBAAgBjB,EAAaC,OAAvD,mBAAOA,EAAP,KAAciB,EAAd,KACA,EAAwCD,mBAAuBjB,EAAaK,cAA5E,mBAAOA,EAAP,KAAqBc,EAArB,KAQMT,EAAqC,SAACJ,EAAMC,GACjDY,EAAgB,CAAEb,OAAMC,eAMnBK,EAAc,uCAAG,WAAO1C,GAAP,uCAAAC,EAAA,8FAAkE,GAAlE,IAAcC,cAAd,MAAuB,MAAvB,EAA8BC,EAA9B,EAA8BA,KAA9B,IAAoC+C,yBAApC,kBACJ9B,EAAYpB,EAAKE,EAAQC,GADrB,cAChBS,EADgB,OAEI,YAAtBsC,GACHV,EAAiB5B,EAAIK,QAASL,EAAIE,IAET,UAAtBoC,GAAkCtC,EAAIE,IACzC0B,EAAiB5B,EAAIK,QAASL,EAAIE,IANb,kBAQfF,GARe,2CAAH,sDAWduC,EAAQ,CACbpB,QACAI,eACAG,UA3B4B,SAACL,EAAMC,GACnCc,EAAS,CAAEhB,QAAQ,EAAMC,OAAMC,MAAOA,KA2BtCK,UAzB4B,WAC5BS,EAAS,CAAEhB,QAAQ,EAAOC,KAAM,UAAWC,MAAO,MAyBlDM,mBACAC,iBArB0C,WAC1CQ,EAAgB,CAAEb,KAAM,GAAIC,WAAW,KAqBvCK,UAGD,OAAO,cAACC,EAAWS,SAAZ,CAAqBD,MAAOA,EAA5B,SAAoCL,KCrEtCO,EAAiB,SAACjD,GACvBoB,aAAaI,QAAQ,cAAexB,IAGxBkD,EAAcV,wBAAyB,CACnDW,KAAM,CAAEC,WAAW,EAAMC,YAAY,GACrCC,YAAa,aACbC,QAAQ,WAAD,4BAAE,sBAAA1D,EAAA,gFAAY,GAAZ,2CAAF,kDAAC,GACRoD,iBACAO,eAAgB,eAGJC,EAAmB,SAAC,GAAkB,IAAhBf,EAAe,EAAfA,SAC1BJ,EAAWoB,qBAAWnB,GAAtBD,OACR,EAA4BK,mBAAmB,CAAES,WAAW,EAAMC,YAAY,IAA9E,mBAAOF,EAAP,KAAaQ,EAAb,KACML,EAAc,SAACF,GACpBO,GAAY,SAAAC,GAAI,kCAAUA,GAAV,IAAgBR,kBAE3BG,EAAO,uCAAG,gCAAA1D,EAAA,6DACfyD,GAAY,GADG,SAEYhB,EAAO,iBAFnB,uBAEP1B,EAFO,EAEPA,MAAMF,EAFC,EAEDA,IAEbiD,EAAY,2BAAK/C,GAAN,IAAYwC,WAAW,EAAOC,YAAY,KAErDC,GAAY,GANE,kBASR5C,GATQ,2CAAH,qDAcb,OACC,cAACwC,EAAYF,SAAb,CAAsBD,MAAO,CAAEI,OAAMG,cAAaC,UAASN,iBAAgBO,eAJrC,SAAC3B,EAAMkB,GAC7CY,GAAY,SAAAC,GAAI,kCAAUA,GAAV,kBAAiB/B,EAAOkB,SAGxC,SACEL,KC1CWmB,EAZO,WACrB,MAAwBlB,mBAAS,CAAC,EAAG,IAArC,mBAAOmB,EAAP,KAAaC,EAAb,KASA,OARAC,2BAAgB,WACf,SAASC,IACRF,EAAQ,CAACG,OAAOC,WAAYD,OAAOE,cAIpC,OAFAF,OAAOG,iBAAiB,SAAUJ,GAClCA,IACO,kBAAMC,OAAOI,oBAAoB,SAAUL,MAChD,IACIH,GCFFS,EAAoB,SAAC,GAA4B,IAA1BC,EAAyB,EAAzBA,MAAOC,EAAkB,EAAlBA,YAC3BtB,EAASO,qBAAWR,GAApBC,KAEFuB,EAAoB,WACzBD,EAAsB,UAAVD,EAAoB,OAAS,UAE1C,EAAoC7B,oBAAS,GAA7C,mBAAOgC,EAAP,KAAmBC,EAAnB,KACA,EAAgBf,IAATgB,EAAP,oBACA,OACC,eAACC,EAAD,WACC,sBAAKC,UAAU,gBAAf,UACC,cAAC,IAAD,CAASC,GAAG,IAAZ,SACC,sBAAMD,UAAU,OAAhB,mBAGAF,EAAQ,IACR,qCACC,sBAAKE,UAAU,YAAf,UACC,cAAC,IAAD,CAASC,GAAG,IAAZ,kBACA,cAAC,IAAD,CAASA,GAAG,oBAAZ,oBACA,cAAC,IAAD,CAASA,GAAG,mBAAZ,yBACC7B,EAAKE,YAAc,cAAC,IAAD,CAAS2B,GAAG,cAAZ,wBAGrB,sBAAKD,UAAU,aAAf,UACC,qBACCE,QAASP,EACTQ,IAAG,wBAA6B,SAAVV,EAAmB,OAAS,MAA/C,QACHW,IAAI,KAEJhC,EAAKE,WACL,cAAC,IAAD,CAAS2B,GAAE,cAAX,SAA6B7B,EAAKiC,WAElC,qCACC,cAAC,IAAD,CAASJ,GAAG,SAAZ,mBADD,IACsC,sBAAMD,UAAU,eAAhB,eAAwC,IAC7E,cAAC,IAAD,CAASC,GAAG,YAAZ,+BAMJ,qBACCC,QAAS,kBAAML,GAAc,IAC7BG,UAAU,OACVG,IAAI,yBACJC,IAAI,YAINR,GAAcE,EAAQ,KACtB,cAACQ,EAAD,UACC,sBAAKN,UAAU,QAAf,UACC,eAAC,IAAD,CAASC,GAAG,IAAIC,QAAS,kBAAML,GAAc,IAA7C,UACC,qBAAKM,IAAG,mCAA8BV,EAA9B,aAAgDW,IAAI,KAC5D,2CAED,eAAC,IAAD,CAASH,GAAG,mBAAmBC,QAAS,kBAAML,GAAc,IAA5D,UACC,qBAAKM,IAAG,mCAA8BV,EAA9B,gBAAmDW,IAAI,KAC/D,iDAED,qBACCF,QAAS,kBAAML,GAAc,IAC7BU,GAAG,QACHJ,IAAG,mCAA8BV,EAA9B,cACHW,IAAI,KAEL,eAAC,IAAD,CAASH,GAAG,oBAAoBC,QAAS,kBAAML,GAAc,IAA7D,UACC,qBAAKM,IAAG,mCAA8BV,EAA9B,eAAkDW,IAAI,KAC9D,6CAEAhC,EAAKE,WACL,eAAC,IAAD,CAAS2B,GAAG,cAAcC,QAAS,kBAAML,GAAc,IAAvD,UACC,qBAAKM,IAAG,mCAA8BV,EAA9B,aAAgDW,IAAI,KAC5D,8CAGD,eAAC,IAAD,CAASH,GAAG,SAASC,QAAS,kBAAML,GAAc,IAAlD,UACC,qBAAKM,IAAG,mCAA8BV,EAA9B,aAAgDW,IAAI,KAC5D,4CAGF,sBAAKF,QAASP,EAAmBK,UAAU,QAA3C,UACC,qBAAKG,IAAG,mCAA8BV,EAA9B,aAAgDW,IAAI,KAC5D,qDAQQI,iBAAKhB,GAEdO,EAAMU,IAAOC,IAAV,wrDAiFHJ,EAAkBG,IAAOE,IAAV,44BAON,qBAAGlB,MAAkBmB,aAyBvB,qBAAGnB,MAAkBoB,U,QCpJnBC,EApEI,uCAAG,kCAAAhG,EAAA,44BAkDT,6BACXiG,EAAU,CACThG,OAAQ,OACRO,QAAS,CACR,eAAgB,mBAChBE,OAAQ,oBAETR,KAAMG,KAAKC,UAAU,CAAE4F,MAzDJ,q2BA4DF9F,MAVP,6BAUkB6F,GA5DT,cA4DdtF,EA5Dc,gBA6DGA,EAAIC,OA7DP,uBA6DZG,EA7DY,EA6DZA,KA7DY,kBA8DbA,GA9Da,kCAgEpBE,QAAQC,IAAR,MAhEoB,0DAAH,qD,iBCENiF,EAAKR,IAAOS,GAAV,4PAYZ,qBAAGC,eAGOC,EAAKX,IAAOY,GAAV,wKCwDAC,EAvDa,SAAC,GAAsB,IAApBT,EAAmB,EAAnBA,OAAQU,EAAW,EAAXA,KAChCC,EAAeC,iBAAuB,MAGtCC,EAAkB,SAACC,GACN,SAAdA,IACHH,EAAaI,QAASC,YAAcL,EAAaI,QAASE,aAEzC,SAAdH,IACHH,EAAaI,QAASC,YAAcL,EAAaI,QAASE,cAI5D,OACC,eAACC,EAAD,WACC,cAACX,EAAD,UAAKP,IACL,qBACCX,QAAS,kBAAMwB,EAAgB,SAC/B1B,UAAU,WACVG,IAAI,kCACJC,IAAI,KAEL,qBACCF,QAAS,kBAAMwB,EAAgB,SAC/B1B,UAAU,WACVG,IAAI,iCACJC,IAAI,KAEL,qBAAKJ,UAAU,WAAf,SACC,qBAAKgC,IAAKR,EAAcxB,UAAU,iBAAlC,SACEuB,EACEA,EAAKU,KAAI,SAACC,EAAMC,GAAP,eACT,cAAC,IAAD,CAAkBlC,GAAE,iBAAYiC,EAAK3B,IAArC,SACC,sBAAKP,UAAU,OAAf,UACC,qBAAKA,UAAU,WAAWG,IAAK+B,EAAKE,WAAWC,WAAYjC,IAAI,KAC/D,6BAAI,UAAA8B,EAAKI,MAAMC,eAAX,eAAoBC,MAAM,EAAG,OAA7B,UAAoCN,EAAKI,MAAMG,cAA/C,aAAoC,EAAmBD,MAAM,EAAG,WAH3DL,MA9BI,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IAqC7BF,KAAI,SAAAC,GAAI,OACtB,sBAAgBlC,UAAU,OAA1B,UACC,cAAC,gBAAD,CAAe0C,eAAe,UAAUC,MAAM,UAA9C,SACC,cAAC,IAAD,CAAU3C,UAAU,YAAgBkC,KAErC,uBACA,cAAC,gBAAD,CAAeQ,eAAe,UAAUC,MAAM,UAA9C,SACC,cAAC,IAAD,CAAU7C,MAAM,QAAQ8C,OAAO,QAAYV,OANnCA,cAgBZH,EAAUtB,IAAOoC,QAAV,soEA2EW,qBAAGpD,MAAkBqD,aCrJ9B,SAASC,EAAUC,GACjC,IACMC,EADY,IAAIC,gBAAgBF,GACZC,UAC1B,OAAOE,OAAOC,YAAYH,GCO3B,I,+EAiCeI,GAjCc,SAAC,GAA2B,IAAzBC,EAAwB,EAAxBA,SAAUC,EAAc,EAAdA,QACzC,EAA0B3F,mBAASmF,EAAUO,EAASE,QAAQxC,OAAS,IAAvE,mBAAOA,EAAP,KAAcyC,EAAd,KAEAC,qBAAU,WACSX,EAAUO,EAASE,QACtBxC,OACdyC,EAAS,MAER,CAACH,IAUJ,OACC,eAACK,GAAD,WACC,cAACvC,EAAD,2BACA,sBAAKpB,UAAU,kBAAf,UACC,qBAAKG,IAAI,0DAA0DC,IAAI,WACvE,uBACCtD,KAAK,OACLkB,MAAOgD,EACP4C,SAAU,SAAAC,GAAC,OAAIJ,GAAS,kBAAMI,EAAEC,OAAO9F,UACvC+F,UAjBiB,SAACF,GACrB,GAAc,UAAVA,EAAEG,KAAmBhD,EAAMiD,OAAQ,CACtC,IAAMC,EAAS,2BAAQnB,EAAUO,EAASE,SAA3B,IAAoCxC,MAAOA,EAAMiD,SAC1DpJ,EAAM,IAAIqI,gBAAgBgB,GAAWC,WAC3CZ,EAAQa,KAAK,WAAavJ,cAoBvB8I,GAAclD,IAAOE,IAAV,q9BAYD,qBAAGlB,MAAkB4E,aCoKxBC,GAAiC,CAC7C,CACCxH,KAAM,QACNyE,KA/NyB,CAC1B,CACCgD,KAAM,SACNhE,GAAI,SACJzD,KAAM,SAEP,CACCyH,KAAM,YACNhE,GAAI,YACJzD,KAAM,SAEP,CACCyH,KAAM,SACNhE,GAAI,SACJzD,KAAM,SAEP,CACCyH,KAAM,QACNhE,GAAI,QACJzD,KAAM,SAEP,CACCyH,KAAM,QACNhE,GAAI,QACJzD,KAAM,SAEP,CACCyH,KAAM,UACNhE,GAAI,UACJzD,KAAM,SAEP,CACCyH,KAAM,SACNhE,GAAI,SACJzD,KAAM,SAEP,CACCyH,KAAM,eACNhE,GAAI,eACJzD,KAAM,SAEP,CACCyH,KAAM,QACNhE,GAAI,QACJzD,KAAM,SAEP,CACCyH,KAAM,QACNhE,GAAI,QACJzD,KAAM,SAEP,CACCyH,KAAM,UACNhE,GAAI,UACJzD,KAAM,SAEP,CACCyH,KAAM,gBACNhE,GAAI,gBACJzD,KAAM,SAEP,CACCyH,KAAM,UACNhE,GAAI,UACJzD,KAAM,SAEP,CACCyH,KAAM,SACNhE,GAAI,SACJzD,KAAM,SAEP,CACCyH,KAAM,gBACNhE,GAAI,gBACJzD,KAAM,SAEP,CACCyH,KAAM,SACNhE,GAAI,SACJzD,KAAM,SAEP,CACCyH,KAAM,eACNhE,GAAI,eACJzD,KAAM,SAEP,CACCyH,KAAM,WACNhE,GAAI,eACJzD,KAAM,WAwIP,CACCA,KAAM,SACNyE,KAvIc,CACf,CACCgD,KAAM,SACNhE,GAAI,SACJzD,KAAM,UAEP,CACCyH,KAAM,SACNhE,GAAI,SACJzD,KAAM,UAEP,CACCyH,KAAM,OACNhE,GAAI,OACJzD,KAAM,UAEP,CACCyH,KAAM,SACNhE,GAAI,SACJzD,KAAM,YAsHP,CACCA,KAAM,OACNyE,KArHuB,CACxB,CAAEgD,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,IAAMhE,GAAI,IAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,SA6ClB0H,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","file":"static/js/main.7eff2ba3.chunk.js","sourcesContent":["export const base_url = process.env.NODE_ENV === \"production\" ? \"/api\" : \"http://localhost:80/api\"\r\n\r\nexport type ClientType = {\r\n\tok: boolean\r\n\tmessage: string\r\n\tdata?: object | Array<any> | any\r\n\tstatus?: number\r\n}\r\nexport type Method = \"GET\" | \"POST\" | \"PUT\" | \"DELETE\"\r\nconst customFetch = (url: string, method: Method = \"GET\", body?: object): Promise<ClientType> => {\r\n\treturn new Promise(async (resolve, _reject) => {\r\n\t\tconst accessToken = localStorage.getItem(\"accessToken\") || \"\"\r\n\t\ttry {\r\n\t\t\tconst response1 = await fetchWrapper(url, method, body, accessToken)\r\n\t\t\tif (response1.status !== 401) {\r\n\t\t\t\treturn resolve(response1)\r\n\t\t\t}\r\n\t\t\tif (!accessToken) {\r\n\t\t\t\treturn resolve({ message: \"Please log in to continue\", ok: false })\r\n\t\t\t}\r\n\t\t\tconst authResponse: any = await fetchWrapper(\"/user/auth/refresh_token\", \"POST\")\r\n\t\t\tif (authResponse.ok) {\r\n\t\t\t\tlocalStorage.setItem(\"accessToken\", authResponse.data.accessToken)\r\n\t\t\t\tconst response2 = await fetchWrapper(url, method, body, authResponse.data.accessToken)\r\n\t\t\t\tresolve(response2)\r\n\t\t\t} else {\r\n\t\t\t\tresolve({ message: \"Please log in to continue\", ok: false })\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tresolve({ message: \"Something went wrong\", ok: false })\r\n\t\t}\r\n\t})\r\n}\r\nexport const fetchWrapper = async (\r\n\turl: string,\r\n\tmethod: string = \"GET\",\r\n\tbody?: object,\r\n\taccessToken?: string\r\n): Promise<ClientType> => {\r\n\ttry {\r\n\t\tconst res = await fetch(base_url + url, {\r\n\t\t\tmethod,\r\n\t\t\tbody: body && JSON.stringify(body),\r\n\t\t\tcredentials: \"include\",\r\n\t\t\theaders: {\r\n\t\t\t\tAuthorization: \"Bearer \" + accessToken,\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\tAccept: \"application/json\",\r\n\t\t\t},\r\n\t\t})\r\n\t\tconst json = await res.json()\r\n\t\treturn {\r\n\t\t\tok: res.ok,\r\n\t\t\tstatus: res.status,\r\n\t\t\tdata: json.data,\r\n\t\t\tmessage: json.message,\r\n\t\t}\r\n\t} catch (error) {\r\n\t\tconsole.log(error)\r\n\t\treturn { ok: false, ...error }\r\n\t}\r\n}\r\nexport default customFetch\r\n","import { createContext, FC, useState } from \"react\"\r\nimport customFetch, { Method, ClientType } from \"../utlis/client\"\r\n\r\ntype ModalType =\r\n\t// | \"CHANGE_USERNAME\"\r\n\t// | \"CHANGE_EMAIL\"\r\n\t\"CHANGE_PASSWORD\" | \"OPEN_THREAD\" | \"DEFAULT\" | \"DELETE_THREAD\" | \"DELETE_POST\" | \"DELETE_COMMENT\"\r\ntype showModal = (type: ModalType, props: any) => void\r\n\r\ntype hideModal = () => void\r\n\r\ntype showModalMessage = (text: string, isSuccess: boolean) => void\r\n\r\ntype hideModalMessage = () => void\r\n\r\ntype Client = (\r\n\turl: string,\r\n\toptions?: {\r\n\t\tmethod?: Method\r\n\t\tbody?: object\r\n\t\tshouldShowMessage?: \"default\" | \"error\" | \"none\"\r\n\t}\r\n) => Promise<ClientType>\r\n\r\ntype modal = {\r\n\tisOpen: boolean\r\n\ttype: ModalType\r\n\tprops?: any\r\n}\r\ntype modalMessage = {\r\n\ttext: string\r\n\tisSuccess: boolean\r\n}\r\ntype ContextTypes = {\r\n\tmodal: modal\r\n\tmodalMessage: modalMessage\r\n\tshowModal: showModal\r\n\thideModal: hideModal\r\n\tshowModalMessage: showModalMessage\r\n\thideModalMessage: hideModalMessage\r\n\tclient: Client\r\n}\r\nconst initialState: ContextTypes = {\r\n\tmodal: { isOpen: false, type: \"DEFAULT\", props: null },\r\n\tmodalMessage: { text: \"\", isSuccess: false },\r\n\tshowModal: () => {},\r\n\thideModal: () => {},\r\n\tshowModalMessage: () => {},\r\n\thideModalMessage: () => {},\r\n\tclient: () => new Promise(() => ({ ok: false, status: 200, data: null, message: \"\" })),\r\n}\r\nexport const AppContext = createContext<ContextTypes>(initialState)\r\n\r\nexport const AppProvider: FC = ({ children }) => {\r\n\tconst [modal, setModal] = useState<modal>(initialState.modal)\r\n\tconst [modalMessage, setModalMessage] = useState<modalMessage>(initialState.modalMessage)\r\n\r\n\tconst showModal: showModal = (type, props) => {\r\n\t\tsetModal({ isOpen: true, type, props: props })\r\n\t}\r\n\tconst hideModal: hideModal = () => {\r\n\t\tsetModal({ isOpen: false, type: \"DEFAULT\", props: {} })\r\n\t}\r\n\tconst showModalMessage: showModalMessage = (text, isSuccess) => {\r\n\t\tsetModalMessage({ text, isSuccess })\r\n\t}\r\n\tconst hideModalMessage: hideModalMessage = () => {\r\n\t\tsetModalMessage({ text: \"\", isSuccess: false })\r\n\t}\r\n\r\n\tconst client: Client = async (url, { method = \"GET\", body, shouldShowMessage = false } = {}) => {\r\n\t\tconst res = await customFetch(url, method, body)\r\n\t\tif (shouldShowMessage === \"default\") {\r\n\t\t\tshowModalMessage(res.message, res.ok)\r\n\t\t}\r\n\t\tif (shouldShowMessage === \"error\" && !res.ok) {\r\n\t\t\tshowModalMessage(res.message, res.ok)\r\n\t\t}\r\n\t\treturn res\r\n\t}\r\n\r\n\tconst value = {\r\n\t\tmodal,\r\n\t\tmodalMessage,\r\n\t\tshowModal,\r\n\t\thideModal,\r\n\t\tshowModalMessage,\r\n\t\thideModalMessage,\r\n\t\tclient,\r\n\t}\r\n\r\n\treturn <AppContext.Provider value={value}>{children}</AppContext.Provider>\r\n}\r\n","import { createContext, FC, useContext, useState } from \"react\"\r\nimport { AppContext } from \"./AppContext\"\r\ntype UserType = {\r\n\tisLoggedIn: boolean\r\n\tisLoading: boolean\r\n\tuser_id?: number\r\n\tusername?: string\r\n\temail?: string\r\n\tcreated_at?: number\r\n\tabout?: string\r\n\tavatar_url?: string\r\n}\r\n\r\ntype UserProps = {\r\n\tuser: UserType\r\n\tloadingUser: (isLoading: boolean) => void\r\n\tsetUser: () => Promise<boolean>\r\n\tsetAccessToken: (accessToken: string) => void\r\n\tchangeUserData: ChangeUserData\r\n}\r\n\r\ntype ChangeUserData = (type: \"username\" | \"avatar_url\" | \"email\" | \"about\", value: string) => void\r\nconst setAccessToken = (accessToken: string) => {\r\n\tlocalStorage.setItem(\"accessToken\", accessToken)\r\n}\r\n\r\nexport const UserContext = createContext<UserProps>({\r\n\tuser: { isLoading: true, isLoggedIn: false },\r\n\tloadingUser: () => {},\r\n\tsetUser: async () => false,\r\n\tsetAccessToken,\r\n\tchangeUserData: () => {},\r\n})\r\n\r\nexport const UserProvider: FC = ({ children }) => {\r\n\tconst { client } = useContext(AppContext)\r\n\tconst [user, setUserData] = useState<UserType>({ isLoading: true, isLoggedIn: false })\r\n\tconst loadingUser = (isLoading: boolean) => {\r\n\t\tsetUserData(prev => ({ ...prev, isLoading }))\r\n\t}\r\n\tconst setUser = async (): Promise<boolean> => {\r\n\t\tloadingUser(true)\r\n\t\tconst { data, ok } = await client(\"/user/profile\")\r\n\t\tif (ok) {\r\n\t\t\tsetUserData({ ...data, isLoading: false, isLoggedIn: true })\r\n\t\t} else {\r\n\t\t\tloadingUser(false)\r\n\t\t}\r\n\r\n\t\treturn ok\r\n\t}\r\n\tconst changeUserData: ChangeUserData = (type, value) => {\r\n\t\tsetUserData(prev => ({ ...prev, [type]: value }))\r\n\t}\r\n\treturn (\r\n\t\t<UserContext.Provider value={{ user, loadingUser, setUser, setAccessToken, changeUserData }}>\r\n\t\t\t{children}\r\n\t\t</UserContext.Provider>\r\n\t)\r\n}\r\n","import { useLayoutEffect, useState } from \"react\"\r\n\r\nconst useWindowSize = (): number[] => {\r\n\tconst [size, setSize] = useState([0, 0])\r\n\tuseLayoutEffect(() => {\r\n\t\tfunction updateSize() {\r\n\t\t\tsetSize([window.innerWidth, window.innerHeight])\r\n\t\t}\r\n\t\twindow.addEventListener(\"resize\", updateSize)\r\n\t\tupdateSize()\r\n\t\treturn () => window.removeEventListener(\"resize\", updateSize)\r\n\t}, [])\r\n\treturn size\r\n}\r\nexport default useWindowSize\r\n","import { FC, memo, useContext, useEffect, useState } from \"react\"\r\nimport { NavLink } from \"react-router-dom\"\r\nimport styled from \"styled-components\"\r\nimport { UserContext } from \"../context/UserContext\"\r\nimport useWindowSize from \"../utlis/useWindowSize\"\r\n\r\ninterface Props {\r\n\ttheme: \"light\" | \"dark\"\r\n\tswitchTheme: (theme: Props[\"theme\"]) => void\r\n}\r\nconst Navbar: FC<Props> = ({ theme, switchTheme }) => {\r\n\tconst { user } = useContext(UserContext)\r\n\r\n\tconst handleSwitchTheme = () => {\r\n\t\tswitchTheme(theme === \"light\" ? \"dark\" : \"light\")\r\n\t}\r\n\tconst [isMenuOpen, setIsMenuOpen] = useState(false)\r\n\tconst [width] = useWindowSize()\r\n\treturn (\r\n\t\t<Nav>\r\n\t\t\t<div className=\"nav-container\">\r\n\t\t\t\t<NavLink to=\"/\">\r\n\t\t\t\t\t<span className=\"logo\">Ani</span>\r\n\t\t\t\t</NavLink>\r\n\r\n\t\t\t\t{width > 640 ? (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<div className=\"nav-links\">\r\n\t\t\t\t\t\t\t<NavLink to=\"/\">Home</NavLink>\r\n\t\t\t\t\t\t\t<NavLink to=\"/search?year=2021\">Browse</NavLink>\r\n\t\t\t\t\t\t\t<NavLink to=\"/discussions/all\">Discussions</NavLink>\r\n\t\t\t\t\t\t\t{user.isLoggedIn && <NavLink to=\"/me/profile\">Profile</NavLink>}\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div className=\"user-links\">\r\n\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\tonClick={handleSwitchTheme}\r\n\t\t\t\t\t\t\t\tsrc={`/assets/icons/${theme === \"dark\" ? \"moon\" : \"sun\"}.svg`}\r\n\t\t\t\t\t\t\t\talt=\"\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t{user.isLoggedIn ? (\r\n\t\t\t\t\t\t\t\t<NavLink to={`/me/profile`}>{user.username}</NavLink>\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t<NavLink to=\"/login\">Login</NavLink> <span className=\"vertical-bar\">|</span>{\" \"}\r\n\t\t\t\t\t\t\t\t\t<NavLink to=\"/register\">Register</NavLink>\r\n\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<img\r\n\t\t\t\t\t\tonClick={() => setIsMenuOpen(true)}\r\n\t\t\t\t\t\tclassName=\"menu\"\r\n\t\t\t\t\t\tsrc=\"/assets/icons/Menu.svg\"\r\n\t\t\t\t\t\talt=\"Menu\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t\t{isMenuOpen && width < 640 && (\r\n\t\t\t\t<MobileMenuStyle>\r\n\t\t\t\t\t<div className=\"links\">\r\n\t\t\t\t\t\t<NavLink to=\"/\" onClick={() => setIsMenuOpen(false)}>\r\n\t\t\t\t\t\t\t<img src={`/assets/icons/nav-mobile-${theme}/Home.svg`} alt=\"\" />\r\n\t\t\t\t\t\t\t<span>Home</span>\r\n\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t\t<NavLink to=\"/discussions/all\" onClick={() => setIsMenuOpen(false)}>\r\n\t\t\t\t\t\t\t<img src={`/assets/icons/nav-mobile-${theme}/Message.svg`} alt=\"\" />\r\n\t\t\t\t\t\t\t<span>Discussion</span>\r\n\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\tonClick={() => setIsMenuOpen(false)}\r\n\t\t\t\t\t\t\tid=\"close\"\r\n\t\t\t\t\t\t\tsrc={`/assets/icons/nav-mobile-${theme}/Close.svg`}\r\n\t\t\t\t\t\t\talt=\"\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<NavLink to=\"/search?year=2021\" onClick={() => setIsMenuOpen(false)}>\r\n\t\t\t\t\t\t\t<img src={`/assets/icons/nav-mobile-${theme}/Search.svg`} alt=\"\" />\r\n\t\t\t\t\t\t\t<span>Search</span>\r\n\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t\t{user.isLoggedIn ? (\r\n\t\t\t\t\t\t\t<NavLink to=\"/me/profile\" onClick={() => setIsMenuOpen(false)}>\r\n\t\t\t\t\t\t\t\t<img src={`/assets/icons/nav-mobile-${theme}/User.svg`} alt=\"\" />\r\n\t\t\t\t\t\t\t\t<span>Profile</span>\r\n\t\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<NavLink to=\"/login\" onClick={() => setIsMenuOpen(false)}>\r\n\t\t\t\t\t\t\t\t<img src={`/assets/icons/nav-mobile-${theme}/User.svg`} alt=\"\" />\r\n\t\t\t\t\t\t\t\t<span>Login</span>\r\n\t\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t<div onClick={handleSwitchTheme} className=\"theme\">\r\n\t\t\t\t\t\t\t<img src={`/assets/icons/nav-mobile-${theme}/Moon.svg`} alt=\"\" />\r\n\t\t\t\t\t\t\t<span>Theme</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</MobileMenuStyle>\r\n\t\t\t)}\r\n\t\t</Nav>\r\n\t)\r\n}\r\nexport default memo(Navbar)\r\n\r\nconst Nav = styled.nav`\r\n\twidth: 100%;\r\n\t/* background-color: #4c5264; //current color */\r\n\tbackground-color: #32343b;\r\n\t.nav-container {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\tpadding: 0 50px;\r\n\t\twidth: 100%;\r\n\t\tmax-width: 1200px;\r\n\t\theight: 4rem;\r\n\t\tmargin: auto;\r\n\t\t@media screen and (max-width: 768px) {\r\n\t\t\theight: 3.5rem;\r\n\t\t\tpadding: 0 20px;\r\n\t\t}\r\n\t\tspan.logo {\r\n\t\t\tcursor: pointer;\r\n\t\t\tborder-radius: 7px;\r\n\t\t\tfont-size: 2.5rem;\r\n\t\t\tfont-weight: 600;\r\n\t\t\tcolor: white;\r\n\t\t\t&::after {\r\n\t\t\t\tcontent: \"Find\";\r\n\t\t\t\tcolor: #70c7a7;\r\n\t\t\t}\r\n\t\t\t@media screen and (max-width: 768px) {\r\n\t\t\t\tfont-size: 2rem;\r\n\t\t\t}\r\n\t\t\t@media (max-width: 640px) {\r\n\t\t\t\tfont-size: 1.8rem;\r\n\t\t\t}\r\n\t\t}\r\n\t\t.nav-links {\r\n\t\t\tdisplay: flex;\r\n\t\t\t> a {\r\n\t\t\t\tcolor: whitesmoke;\r\n\t\t\t\tmargin-right: 20px;\r\n\t\t\t\tfont-size: 1.1rem;\r\n\t\t\t\tfont-weight: 550;\r\n\t\t\t\t:active {\r\n\t\t\t\t\tcolor: white;\r\n\t\t\t\t}\r\n\t\t\t\t@media (max-width: 768px) {\r\n\t\t\t\t\tmargin-right: 15px;\r\n\t\t\t\t\tfont-size: 1rem;\r\n\t\t\t\t\tfont-weight: 500;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t.user-links {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tcolor: white;\r\n\t\ta {\r\n\t\t\tfont-size: 1.2rem;\r\n\t\t\tcolor: white;\r\n\t\t\tfont-weight: 600;\r\n\t\t\tborder-bottom: 2px #70c7a7 solid;\r\n\t\t\t@media (max-width: 768px) {\r\n\t\t\t\tfont-size: 1.1rem;\r\n\t\t\t}\r\n\t\t}\r\n\t\timg {\r\n\t\t\tcursor: pointer;\r\n\t\t\theight: 25px;\r\n\t\t\tfilter: invert(1);\r\n\t\t\tmargin-right: 20px;\r\n\t\t}\r\n\t\tspan.vertical-bar {\r\n\t\t\tmargin: 0 5px;\r\n\t\t}\r\n\t}\r\n\timg.menu {\r\n\t\twidth: 28px;\r\n\t\theight: 28px;\r\n\t\tcursor: pointer;\r\n\t}\r\n`\r\nconst MobileMenuStyle = styled.div`\r\n\twidth: 210px;\r\n\theight: 140px;\r\n\tposition: fixed;\r\n\tz-index: 5;\r\n\ttop: 20px;\r\n\tright: 20px;\r\n\tbackground: ${({ theme }) => theme.commentBg};\r\n\tborder-radius: 10px;\r\n\tbox-shadow: 0px 0px 15px 4px rgba(0, 0, 0, 0.15);\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n\tpadding: 10px;\r\n\t.links {\r\n\t\tdisplay: grid;\r\n\t\tgrid-template-columns: 1fr 1fr 1fr;\r\n\t\tgrid-template-rows: 1fr 1fr;\r\n\t\tjustify-items: center;\r\n\t\talign-items: center;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\ta,\r\n\t\t.theme {\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\t\t\talign-items: center;\r\n\t\t\timg {\r\n\t\t\t\twidth: 32px;\r\n\t\t\t\theight: 32px;\r\n\t\t\t}\r\n\t\t\tspan {\r\n\t\t\t\tfont-size: 0.7rem;\r\n\t\t\t\tcolor: ${({ theme }) => theme.header};\r\n\t\t\t\tfont-weight: 600;\r\n\t\t\t}\r\n\t\t}\r\n\t\t> #close {\r\n\t\t\tcursor: pointer;\r\n\t\t\twidth: 32px;\r\n\t\t\theight: 32px;\r\n\t\t\tposition: relative;\r\n\t\t\ttop: -4px;\r\n\t\t}\r\n\t}\r\n`\r\n","const homeListQuery = async () => {\r\n\tconst query = `\r\n  query popular {\r\n    trending: Page (page: 1) {\r\n      pageInfo {\r\n        total\r\n        currentPage\r\n        lastPage\r\n        hasNextPage\r\n        perPage\r\n      }\r\n      media(sort: TRENDING_DESC type: ANIME) {\r\n        id\r\n        title {\r\n          romaji\r\n          english\r\n          native\r\n          userPreferred\r\n        }\r\n        coverImage {\r\n          extraLarge\r\n          color\r\n        }\r\n      }\r\n    }\r\n    top: Page (page: 1) {\r\n      pageInfo {\r\n        total\r\n        currentPage\r\n        lastPage\r\n        hasNextPage\r\n        perPage\r\n      }\r\n      media(sort: POPULARITY_DESC type: ANIME) {\r\n        id\r\n        title {\r\n          romaji\r\n          english\r\n          native\r\n          userPreferred\r\n        }\r\n        coverImage {\r\n          extraLarge\r\n          color\r\n        }\r\n      }\r\n    }\r\n  }\r\n  \r\n    `\r\n\tconst url = \"https://graphql.anilist.co\",\r\n\t\toptions = {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\theaders: {\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\tAccept: \"application/json\",\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify({ query }),\r\n\t\t}\r\n\ttry {\r\n\t\tconst res = await fetch(url, options)\r\n\t\tconst { data } = await res.json()\r\n\t\treturn data\r\n\t} catch (error) {\r\n\t\tconsole.log(error)\r\n\t}\r\n}\r\n\r\nexport default homeListQuery\r\n","import styled from \"styled-components\"\r\n\r\nexport const H1 = styled.h1<{ customStyle?: string }>`\r\n\twidth: 100%;\r\n\tfont-size: 2.8rem;\r\n\t@media (max-width: 1024px) {\r\n\t\tfont-size: 2.5rem;\r\n\t}\r\n\t@media (max-width: 768px) {\r\n\t\tfont-size: 2rem;\r\n\t}\r\n\t@media (max-width: 480px) {\r\n\t\tfont-size: 1.7rem;\r\n\t}\r\n\t${({ customStyle }) => customStyle}\r\n`\r\n\r\nexport const H2 = styled.h2`\r\n\tfont-size: 2rem;\r\n\t@media (max-width: 768px) {\r\n\t\tfont-size: 1.7rem;\r\n\t}\r\n\t@media (max-width: 480px) {\r\n\t\tfont-size: 1.5rem;\r\n\t}\r\n`\r\n","import { FC, useRef } from \"react\"\r\nimport { Link } from \"react-router-dom\"\r\nimport styled from \"styled-components\"\r\nimport Skeleton, { SkeletonTheme } from \"react-loading-skeleton\"\r\nimport { H2 } from \"../styles/Styles\"\r\ninterface Props {\r\n\theader: string\r\n\tlist: Array<{\r\n\t\tid: number\r\n\t\tcoverImage: {\r\n\t\t\textraLarge: string\r\n\t\t}\r\n\t\ttitle: {\r\n\t\t\tenglish: string\r\n\t\t\tromaji: string\r\n\t\t}\r\n\t}>\r\n}\r\nconst Carousel: FC<Props> = ({ header, list }) => {\r\n\tconst containerRef = useRef<HTMLDivElement>(null)\r\n\tconst skeletonArray = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\r\n\r\n\tconst scrollContainer = (direction: \"next\" | \"prev\") => {\r\n\t\tif (direction === \"next\") {\r\n\t\t\tcontainerRef.current!.scrollLeft += containerRef.current!.clientWidth\r\n\t\t}\r\n\t\tif (direction === \"prev\") {\r\n\t\t\tcontainerRef.current!.scrollLeft -= containerRef.current!.clientWidth\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Section>\r\n\t\t\t<H2>{header}</H2>\r\n\t\t\t<img\r\n\t\t\t\tonClick={() => scrollContainer(\"next\")}\r\n\t\t\t\tclassName=\"next-btn\"\r\n\t\t\t\tsrc=\"/assets/icons/right-chevron.svg\"\r\n\t\t\t\talt=\"\"\r\n\t\t\t/>\r\n\t\t\t<img\r\n\t\t\t\tonClick={() => scrollContainer(\"prev\")}\r\n\t\t\t\tclassName=\"prev-btn\"\r\n\t\t\t\tsrc=\"/assets/icons/left-chevron.svg\"\r\n\t\t\t\talt=\"\"\r\n\t\t\t/>\r\n\t\t\t<div className=\"carousel\">\r\n\t\t\t\t<div ref={containerRef} className=\"card-container\">\r\n\t\t\t\t\t{list\r\n\t\t\t\t\t\t? list.map((item, index) => (\r\n\t\t\t\t\t\t\t\t<Link key={index} to={`/anime/${item.id}`}>\r\n\t\t\t\t\t\t\t\t\t<div className=\"card\">\r\n\t\t\t\t\t\t\t\t\t\t<img className=\"card-img\" src={item.coverImage.extraLarge} alt=\"\" />\r\n\t\t\t\t\t\t\t\t\t\t<p>{item.title.english?.slice(0, 50) || item.title.romaji?.slice(0, 50)}</p>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t  ))\r\n\t\t\t\t\t\t: skeletonArray.map(item => (\r\n\t\t\t\t\t\t\t\t<div key={item} className=\"card\">\r\n\t\t\t\t\t\t\t\t\t<SkeletonTheme highlightColor=\"#a7dac7\" color=\"#cad4de\">\r\n\t\t\t\t\t\t\t\t\t\t<Skeleton className=\"card-img\" key={item} />\r\n\t\t\t\t\t\t\t\t\t</SkeletonTheme>\r\n\t\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t\t<SkeletonTheme highlightColor=\"#a7dac7\" color=\"#cad4de\">\r\n\t\t\t\t\t\t\t\t\t\t<Skeleton width=\"120px\" height=\"10px\" key={item} />\r\n\t\t\t\t\t\t\t\t\t</SkeletonTheme>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t  ))}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</Section>\r\n\t)\r\n}\r\nexport default Carousel\r\nconst Section = styled.section`\r\n\twidth: 100%;\r\n\tmax-width: 1200px;\r\n\tpadding: 0 50px;\r\n\tmargin: auto;\r\n\tmargin-bottom: 50px;\r\n\tposition: relative;\r\n\th2 {\r\n\t\tmargin-bottom: 20px;\r\n\t}\r\n\t.next-btn,\r\n\t.prev-btn {\r\n\t\tcursor: pointer;\r\n\t\twidth: 40px;\r\n\t\tpadding: 10px;\r\n\t\tbackground-color: #4c5264;\r\n\t\tborder-radius: 50%;\r\n\t\tposition: absolute;\r\n\t\tright: 0;\r\n\t\ttop: 50%;\r\n\t\ttransform: translateY(-50%);\r\n\t\topacity: 0.4;\r\n\t\ttransition: 0.2s;\r\n\t\t&:hover {\r\n\t\t\topacity: 1;\r\n\t\t}\r\n\t}\r\n\t.next-btn {\r\n\t\tright: 0;\r\n\t}\r\n\t.prev-btn {\r\n\t\tleft: 0;\r\n\t}\r\n\t.card-container {\r\n\t\tdisplay: flex;\r\n\t\twidth: 100%;\r\n\t\tscroll-behavior: smooth;\r\n\t\toverflow-x: hidden;\r\n\t\t.card {\r\n\t\t\tmargin-right: 15px;\r\n\t\t\twidth: 150px;\r\n\t\t\t.card-img {\r\n\t\t\t\tborder-radius: 7px;\r\n\t\t\t\twidth: 150px;\r\n\t\t\t\theight: 210px;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t@media screen and (max-width: 768px) {\r\n\t\tpadding: 0 20px;\r\n\r\n\t\t.next-btn,\r\n\t\t.prev-btn {\r\n\t\t\twidth: 40px;\r\n\t\t\theight: 30px;\r\n\t\t\tpadding: 6px;\r\n\t\t\tbackground-color: #4c5264;\r\n\t\t\tborder-radius: 60px;\r\n\t\t\tposition: absolute;\r\n\t\t\ttop: 5%;\r\n\t\t}\r\n\t\t.next-btn {\r\n\t\t\tright: 20px;\r\n\t\t}\r\n\t\t.prev-btn {\r\n\t\t\tleft: unset;\r\n\t\t\tright: 70px;\r\n\t\t}\r\n\t\t.carousel {\r\n\t\t\toverflow-x: hidden;\r\n\t\t}\r\n\t\t.card-container {\r\n\t\t\toverflow-x: scroll;\r\n\t\t\t::-webkit-scrollbar-track {\r\n\t\t\t\tbackground-color: ${({ theme }) => theme.scrollbar};\r\n\t\t\t\tborder-radius: 4px;\r\n\t\t\t}\r\n\t\t\t::-webkit-scrollbar {\r\n\t\t\t\tborder-radius: 4px;\r\n\t\t\t\theight: 7px;\r\n\t\t\t\tbackground-color: #f5f5f5;\r\n\t\t\t}\r\n\t\t\t::-webkit-scrollbar-thumb {\r\n\t\t\t\tbackground-color: #58a086;\r\n\t\t\t\tborder-radius: 4px;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t@media screen and (max-width: 480px) {\r\n\t\tmargin-bottom: 40px;\r\n\r\n\t\t.next-btn,\r\n\t\t.prev-btn {\r\n\t\t\twidth: 35px;\r\n\t\t\theight: 27px;\r\n\t\t\ttop: 4%;\r\n\t\t}\r\n\t\t.next-btn {\r\n\t\t\tright: 20px;\r\n\t\t}\r\n\t\t.prev-btn {\r\n\t\t\tright: 60px;\r\n\t\t}\r\n\t\t.card-container {\r\n\t\t\t.card {\r\n\t\t\t\twidth: 120px;\r\n\t\t\t\t.card-img {\r\n\t\t\t\t\twidth: 120px;\r\n\t\t\t\t\theight: 170px;\r\n\t\t\t\t}\r\n\t\t\t\tp {\r\n\t\t\t\t\tfont-size: 0.85rem;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`\r\n","export default function getUrlObj(str: string) {\r\n\tconst urlParams = new URLSearchParams(str)\r\n\tconst entries = urlParams.entries()\r\n\treturn Object.fromEntries(entries)\r\n}\r\n","import { useState, useEffect, FC, KeyboardEvent } from \"react\"\r\nimport { RouteComponentProps } from \"react-router-dom\"\r\nimport styled from \"styled-components\"\r\nimport getUrlObj from \"../../utlis/getUrlObj\"\r\nimport { H2 } from \"../styles/Styles\"\r\n\r\ntype Props = {\r\n\tlocation: RouteComponentProps[\"location\"]\r\n\thistory: RouteComponentProps[\"history\"]\r\n}\r\nconst SearchBox: FC<Props> = ({ location, history }) => {\r\n\tconst [query, setQuery] = useState(getUrlObj(location.search).query || \"\")\r\n\r\n\tuseEffect(() => {\r\n\t\tconst searchObj = getUrlObj(location.search)\r\n\t\tif (!searchObj.query) {\r\n\t\t\tsetQuery(\"\")\r\n\t\t}\r\n\t}, [location])\r\n\r\n\tconst handleSubmit = (e: KeyboardEvent<HTMLInputElement>) => {\r\n\t\tif (e.key === \"Enter\" && query.trim()) {\r\n\t\t\tconst newParams = { ...getUrlObj(location.search), query: query.trim() }\r\n\t\t\tconst url = new URLSearchParams(newParams).toString()\r\n\t\t\thistory.push(\"/search?\" + url)\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<SearchBoxEl>\r\n\t\t\t<H2>Search anime</H2>\r\n\t\t\t<div className=\"input-container\">\r\n\t\t\t\t<img src=\"https://img.icons8.com/ios-glyphs/100/000000/search.png\" alt=\"search\" />\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tvalue={query}\r\n\t\t\t\t\tonChange={e => setQuery(() => e.target.value)}\r\n\t\t\t\t\tonKeyDown={handleSubmit}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t</SearchBoxEl>\r\n\t)\r\n}\r\nexport default SearchBox\r\nconst SearchBoxEl = styled.div`\r\n\twidth: 100%;\r\n\tmargin-top: 50px;\r\n\th2 {\r\n\t\t/* font-size: 2.5rem; */\r\n\t\tmargin-bottom: 10px;\r\n\t}\r\n\t.input-container {\r\n\t\twidth: 100%;\r\n\t\theight: 40px;\r\n\t\tposition: relative;\r\n\t\tborder: none;\r\n\t\tbox-shadow: ${({ theme }) => theme.boxShadow};\r\n\t\tborder-radius: 7px;\r\n\t\tbackground-color: white;\r\n\t\timg {\r\n\t\t\twidth: 23px;\r\n\t\t\tposition: absolute;\r\n\t\t\ttop: 50%;\r\n\t\t\ttransform: translateY(-50%);\r\n\t\t\tleft: 15px;\r\n\t\t\tfilter: invert(0.7);\r\n\t\t}\r\n\t\tinput {\r\n\t\t\theight: 100%;\r\n\t\t\twidth: 100%;\r\n\t\t\tborder: none;\r\n\t\t\tbackground: transparent;\r\n\t\t\tfont-size: 1.1rem;\r\n\t\t\tfont-weight: 300;\r\n\t\t\tpadding-left: 50px;\r\n\t\t\tcolor: #4c5264;\r\n\t\t}\r\n\t}\r\n\r\n\t@media (max-width: 768px) {\r\n\t\tmargin: 20px 0;\r\n\t\th2 {\r\n\t\t\t/* font-size: 1.7rem; */\r\n\t\t}\r\n\t\t.input-container {\r\n\t\t\theight: 30px;\r\n\t\t\tinput {\r\n\t\t\t\tfont-size: 1rem;\r\n\t\t\t\tpadding-left: 40px;\r\n\t\t\t}\r\n\t\t\timg {\r\n\t\t\t\tleft: 10px;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`\r\n","const genres: ListType[] = [\r\n\t{\r\n\t\tname: \"Action\",\r\n\t\tid: \"Action\",\r\n\t\ttype: \"genre\",\r\n\t},\r\n\t{\r\n\t\tname: \"Adventure\",\r\n\t\tid: \"Adventure\",\r\n\t\ttype: \"genre\",\r\n\t},\r\n\t{\r\n\t\tname: \"Comedy\",\r\n\t\tid: \"Comedy\",\r\n\t\ttype: \"genre\",\r\n\t},\r\n\t{\r\n\t\tname: \"Drama\",\r\n\t\tid: \"Drama\",\r\n\t\ttype: \"genre\",\r\n\t},\r\n\t{\r\n\t\tname: \"Ecchi\",\r\n\t\tid: \"Ecchi\",\r\n\t\ttype: \"genre\",\r\n\t},\r\n\t{\r\n\t\tname: \"Fantasy\",\r\n\t\tid: \"Fantasy\",\r\n\t\ttype: \"genre\",\r\n\t},\r\n\t{\r\n\t\tname: \"Horror\",\r\n\t\tid: \"Horror\",\r\n\t\ttype: \"genre\",\r\n\t},\r\n\t{\r\n\t\tname: \"Mahou Shoujo\",\r\n\t\tid: \"Mahou Shoujo\",\r\n\t\ttype: \"genre\",\r\n\t},\r\n\t{\r\n\t\tname: \"Mecha\",\r\n\t\tid: \"Mecha\",\r\n\t\ttype: \"genre\",\r\n\t},\r\n\t{\r\n\t\tname: \"Music\",\r\n\t\tid: \"Music\",\r\n\t\ttype: \"genre\",\r\n\t},\r\n\t{\r\n\t\tname: \"Mystery\",\r\n\t\tid: \"Mystery\",\r\n\t\ttype: \"genre\",\r\n\t},\r\n\t{\r\n\t\tname: \"Psychological\",\r\n\t\tid: \"Psychological\",\r\n\t\ttype: \"genre\",\r\n\t},\r\n\t{\r\n\t\tname: \"Romance\",\r\n\t\tid: \"Romance\",\r\n\t\ttype: \"genre\",\r\n\t},\r\n\t{\r\n\t\tname: \"Sci-Fi\",\r\n\t\tid: \"Sci-Fi\",\r\n\t\ttype: \"genre\",\r\n\t},\r\n\t{\r\n\t\tname: \"Slice of Life\",\r\n\t\tid: \"Slice of Life\",\r\n\t\ttype: \"genre\",\r\n\t},\r\n\t{\r\n\t\tname: \"Sports\",\r\n\t\tid: \"Sports\",\r\n\t\ttype: \"genre\",\r\n\t},\r\n\t{\r\n\t\tname: \"Supernatural\",\r\n\t\tid: \"Supernatural\",\r\n\t\ttype: \"genre\",\r\n\t},\r\n\t{\r\n\t\tname: \"Thriller\",\r\n\t\tid: \"Supernatural\",\r\n\t\ttype: \"genre\",\r\n\t},\r\n]\r\nconst seasons = [\r\n\t{\r\n\t\tname: \"Summer\",\r\n\t\tid: \"SUMMER\",\r\n\t\ttype: \"season\",\r\n\t},\r\n\t{\r\n\t\tname: \"Spring\",\r\n\t\tid: \"SPRING\",\r\n\t\ttype: \"season\",\r\n\t},\r\n\t{\r\n\t\tname: \"Fall\",\r\n\t\tid: \"FALL\",\r\n\t\ttype: \"season\",\r\n\t},\r\n\t{\r\n\t\tname: \"Winter\",\r\n\t\tid: \"WINTER\",\r\n\t\ttype: \"season\",\r\n\t},\r\n]\r\nconst year: ListType[] = [\r\n\t{ name: 1950, id: 1950, type: \"year\" },\r\n\t{ name: 1951, id: 1951, type: \"year\" },\r\n\t{ name: 1952, id: 1952, type: \"year\" },\r\n\t{ name: 1953, id: 1953, type: \"year\" },\r\n\t{ name: 1954, id: 1954, type: \"year\" },\r\n\t{ name: 1955, id: 1955, type: \"year\" },\r\n\t{ name: 1956, id: 1956, type: \"year\" },\r\n\t{ name: 1957, id: 1957, type: \"year\" },\r\n\t{ name: 1958, id: 1958, type: \"year\" },\r\n\t{ name: 1959, id: 1959, type: \"year\" },\r\n\t{ name: 1960, id: 1960, type: \"year\" },\r\n\t{ name: 1961, id: 1961, type: \"year\" },\r\n\t{ name: 1962, id: 1962, type: \"year\" },\r\n\t{ name: 1963, id: 1963, type: \"year\" },\r\n\t{ name: 1964, id: 1964, type: \"year\" },\r\n\t{ name: 1965, id: 1965, type: \"year\" },\r\n\t{ name: 1966, id: 1966, type: \"year\" },\r\n\t{ name: 1967, id: 1967, type: \"year\" },\r\n\t{ name: 1968, id: 1968, type: \"year\" },\r\n\t{ name: 1969, id: 1969, type: \"year\" },\r\n\t{ name: 1970, id: 1970, type: \"year\" },\r\n\t{ name: 1971, id: 1971, type: \"year\" },\r\n\t{ name: 1972, id: 1972, type: \"year\" },\r\n\t{ name: 1973, id: 1973, type: \"year\" },\r\n\t{ name: 1974, id: 1974, type: \"year\" },\r\n\t{ name: 1975, id: 1975, type: \"year\" },\r\n\t{ name: 1976, id: 1976, type: \"year\" },\r\n\t{ name: 1977, id: 1977, type: \"year\" },\r\n\t{ name: 1978, id: 1978, type: \"year\" },\r\n\t{ name: 1979, id: 1979, type: \"year\" },\r\n\t{ name: 1980, id: 1980, type: \"year\" },\r\n\t{ name: 1981, id: 1981, type: \"year\" },\r\n\t{ name: 1982, id: 1982, type: \"year\" },\r\n\t{ name: 1983, id: 1983, type: \"year\" },\r\n\t{ name: 1984, id: 1984, type: \"year\" },\r\n\t{ name: 1985, id: 1985, type: \"year\" },\r\n\t{ name: 1986, id: 1986, type: \"year\" },\r\n\t{ name: 1987, id: 1987, type: \"year\" },\r\n\t{ name: 1988, id: 1988, type: \"year\" },\r\n\t{ name: 1989, id: 1989, type: \"year\" },\r\n\t{ name: 1990, id: 1990, type: \"year\" },\r\n\t{ name: 1991, id: 1991, type: \"year\" },\r\n\t{ name: 1992, id: 1992, type: \"year\" },\r\n\t{ name: 1993, id: 1993, type: \"year\" },\r\n\t{ name: 1994, id: 1994, type: \"year\" },\r\n\t{ name: 1995, id: 1995, type: \"year\" },\r\n\t{ name: 1996, id: 1996, type: \"year\" },\r\n\t{ name: 1997, id: 1997, type: \"year\" },\r\n\t{ name: 1998, id: 1998, type: \"year\" },\r\n\t{ name: 1999, id: 1999, type: \"year\" },\r\n\t{ name: 2000, id: 2000, type: \"year\" },\r\n\t{ name: 2001, id: 2001, type: \"year\" },\r\n\t{ name: 2002, id: 2002, type: \"year\" },\r\n\t{ name: 2003, id: 2003, type: \"year\" },\r\n\t{ name: 2004, id: 2004, type: \"year\" },\r\n\t{ name: 2005, id: 2005, type: \"year\" },\r\n\t{ name: 2006, id: 2006, type: \"year\" },\r\n\t{ name: 2007, id: 2007, type: \"year\" },\r\n\t{ name: 2008, id: 2008, type: \"year\" },\r\n\t{ name: 2009, id: 2009, type: \"year\" },\r\n\t{ name: 2010, id: 2010, type: \"year\" },\r\n\t{ name: 2011, id: 2011, type: \"year\" },\r\n\t{ name: 2012, id: 2012, type: \"year\" },\r\n\t{ name: 2013, id: 2013, type: \"year\" },\r\n\t{ name: 2014, id: 2014, type: \"year\" },\r\n\t{ name: 2015, id: 2015, type: \"year\" },\r\n\t{ name: 2016, id: 2016, type: \"year\" },\r\n\t{ name: 2017, id: 2017, type: \"year\" },\r\n\t{ name: 2018, id: 2018, type: \"year\" },\r\n\t{ name: 2019, id: 2019, type: \"year\" },\r\n\t{ name: 2020, id: 2020, type: \"year\" },\r\n\t{ name: 2021, id: 2021, type: \"year\" },\r\n]\r\nconst formats = [\r\n\t{\r\n\t\tname: \"tv\",\r\n\t\tid: \"TV\",\r\n\t\ttype: \"format\",\r\n\t},\r\n\t{\r\n\t\tname: \"ova\",\r\n\t\tid: \"OVA\",\r\n\t\ttype: \"format\",\r\n\t},\r\n\t{\r\n\t\tname: \"movie\",\r\n\t\tid: \"MOVIE\",\r\n\t\ttype: \"format\",\r\n\t},\r\n\t{\r\n\t\tname: \"special\",\r\n\t\tid: \"SPECIAL\",\r\n\t\ttype: \"format\",\r\n\t},\r\n\t{\r\n\t\tname: \"ona\",\r\n\t\tid: \"ONA\",\r\n\t\ttype: \"format\",\r\n\t},\r\n\t{\r\n\t\tname: \"music\",\r\n\t\tid: \"MUSIC\",\r\n\t\ttype: \"format\",\r\n\t},\r\n]\r\nexport const selectLists: selectListsType[] = [\r\n\t{\r\n\t\ttype: \"Genre\",\r\n\t\tlist: genres,\r\n\t},\r\n\t{\r\n\t\ttype: \"Season\",\r\n\t\tlist: seasons,\r\n\t},\r\n\t{\r\n\t\ttype: \"Year\",\r\n\t\tlist: year.reverse(),\r\n\t},\r\n\t{\r\n\t\ttype: \"Format\",\r\n\t\tlist: formats,\r\n\t},\r\n]\r\n\r\nexport type ListType = {\r\n\tname: string | number\r\n\ttype: string\r\n\tid: string | number\r\n}\r\n\r\nexport type selectListsType = {\r\n\ttype: string\r\n\tlist: ListType[]\r\n}\r\n","import React, { useRef, useState, useEffect, FC, ChangeEvent } from \"react\"\r\nimport styled from \"styled-components\"\r\nimport getUrlObj from \"../../utlis/getUrlObj\"\r\nimport { RouteComponentProps } from \"react-router-dom\"\r\nimport { ListType, selectLists, selectListsType } from \"./SelectList\"\r\nconst List = styled.div<{ isOpen: boolean }>`\r\n\twidth: unset;\r\n\theight: max-content;\r\n\tposition: relative;\r\n\t.selected {\r\n\t\tcursor: pointer;\r\n\t\twidth: 150px;\r\n\t\theight: 30px;\r\n\t\tbackground-color: white;\r\n\t\tborder-radius: 7px;\r\n\t\tbox-shadow: ${({ theme }) => theme.boxShadow};\r\n\r\n\t\tmargin-bottom: 10px;\r\n\t\tpadding: 0 15px;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\tposition: relative;\r\n\t\t.mask {\r\n\t\t\tposition: absolute;\r\n\t\t\ttop: 0;\r\n\t\t\tbottom: 0;\r\n\t\t\tleft: 0;\r\n\t\t\tright: 0;\r\n\t\t\tz-index: 2;\r\n\t\t}\r\n\t\tspan {\r\n\t\t\tfont-size: 0.9rem;\r\n\t\t\tcolor: #979797;\r\n\t\t\tpadding: 8px 0;\r\n\t\t}\r\n\t\timg {\r\n\t\t\twidth: 15px;\r\n\t\t\theight: 15px;\r\n\t\t\tfilter: invert(0.7);\r\n\t\t\tmargin: 8px 0;\r\n\t\t}\r\n\t\t.cover {\r\n\t\t\tposition: absolute;\r\n\t\t\ttop: 0;\r\n\t\t\tbottom: 0;\r\n\t\t\tleft: 0;\r\n\t\t\tright: 0;\r\n\t\t\tz-index: 1;\r\n\t\t}\r\n\t}\r\n\t.box {\r\n\t\tlist-style: none;\r\n\t\twidth: 150px;\r\n\t\theight: max-content;\r\n\t\tmax-height: 300px;\r\n\t\tpadding: 10px;\r\n\t\toverflow-y: auto;\r\n\t\tbackground-color: white;\r\n\t\tborder-radius: 7px;\r\n\t\tbox-shadow: ${({ theme }) => theme.boxShadow};\r\n\t\tposition: absolute;\r\n\t\tdisplay: ${({ isOpen }) => (isOpen ? \"block\" : \"none\")};\r\n\t\tz-index: 2;\r\n\t\t::-webkit-scrollbar-track {\r\n\t\t\tbackground-color: ${({ theme }) => theme.scrollbar};\r\n\t\t}\r\n\t\t::-webkit-scrollbar {\r\n\t\t\tborder-radius: 4px;\r\n\t\t\twidth: 5px;\r\n\t\t\tbackground-color: #f5f5f5;\r\n\t\t}\r\n\t\t::-webkit-scrollbar-thumb {\r\n\t\t\tbackground-color: #7e7e7e;\r\n\t\t\tborder-radius: 4px;\r\n\t\t}\r\n\t\tli.option {\r\n\t\t\tcursor: pointer;\r\n\t\t\tfont-size: 0.9rem;\r\n\t\t\tcolor: rgb(63, 63, 63);\r\n\t\t\tpadding: 5px;\r\n\t\t\tborder-radius: 4px;\r\n\t\t\ttransition: 0.2s;\r\n\t\t\t&:hover {\r\n\t\t\t\tbackground-color: #e0e0e0;\r\n\t\t\t\tcolor: #43b375;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t@media (max-width: 768px) {\r\n\t\t&:nth-child(2n) {\r\n\t\t\tjustify-self: end;\r\n\t\t}\r\n\t}\r\n\t@media (max-width: 480px) {\r\n\t\t.selected,\r\n\t\t.box {\r\n\t\t\twidth: 120px;\r\n\t\t}\r\n\t}\r\n`\r\n\r\ntype Props = {\r\n\titem: selectListsType\r\n\tlocation: RouteComponentProps[\"location\"]\r\n\thistory: RouteComponentProps[\"history\"]\r\n}\r\n\r\nconst OptionList: FC<Props> = ({ item, location, history }) => {\r\n\tconst [isOpen, setIsOpen] = useState(false)\r\n\tconst listEl = useRef<HTMLDivElement>(null)\r\n\tconst ul = useRef<HTMLUListElement>(null)\r\n\r\n\tuseEffect(() => {\r\n\t\twindow.addEventListener(\"click\", closeList)\r\n\t\treturn () => window.removeEventListener(\"click\", closeList)\r\n\t}, [listEl])\r\n\r\n\tconst closeList = (e: any) => {\r\n\t\tif (e.target !== listEl.current) setIsOpen(false)\r\n\t}\r\n\r\n\tconst filterByOption = (option: ListType) => {\r\n\t\tconst params = { ...getUrlObj(location.search), [option.type]: option.id.toString() }\r\n\t\tconst url = new URLSearchParams(params).toString()\r\n\t\thistory.push(\"/search?\" + url)\r\n\t}\r\n\treturn (\r\n\t\t<List className=\"list-container\" isOpen={isOpen}>\r\n\t\t\t<div className=\"selected\">\r\n\t\t\t\t<div ref={listEl} className=\"mask\" onClick={() => setIsOpen(!isOpen)}></div>\r\n\t\t\t\t<span>{item.type}</span>\r\n\t\t\t\t<img src=\"https://img.icons8.com/ios-glyphs/30/000000/chevron-down.png\" alt=\"\" />\r\n\t\t\t</div>\r\n\t\t\t<ul ref={ul} className=\"box\">\r\n\t\t\t\t{item.list.map(option => (\r\n\t\t\t\t\t<li key={option.name} className=\"option\" onClick={() => filterByOption(option)}>\r\n\t\t\t\t\t\t{option.name}\r\n\t\t\t\t\t</li>\r\n\t\t\t\t))}\r\n\t\t\t</ul>\r\n\t\t</List>\r\n\t)\r\n}\r\nexport default OptionList\r\n","import React, { FC, useEffect, useState } from \"react\"\r\nimport styled from \"styled-components\"\r\nimport { useLocation, useHistory, RouteComponentProps } from \"react-router-dom\"\r\nimport SearchBox from \"./SearchBox\"\r\nimport { ListType, selectLists, selectListsType } from \"./SelectList\"\r\nimport OptionList from \"./OptionList\"\r\nimport getUrlObj from \"../../utlis/getUrlObj\"\r\n\r\nconst Container = styled.div`\r\n\tmax-width: 1200px;\r\n\tpadding: 0 50px;\r\n\tmargin: auto;\r\n\t@media (max-width: 768px) {\r\n\t\tpadding: 0 20px;\r\n\t}\r\n`\r\nconst AllFilters = styled.div`\r\n\twidth: 100%;\r\n\tmargin: 50px auto;\r\n\t.options-container {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\twidth: 100%;\r\n\t}\r\n\t@media (max-width: 768px) {\r\n\t\tmargin: 20px auto;\r\n\t\t.options-container {\r\n\t\t\tdisplay: grid;\r\n\t\t\tgrid-template-columns: 1fr 1fr;\r\n\t\t}\r\n\t}\r\n`\r\n\r\nconst SearchSection: FC = () => {\r\n\tconst location = useLocation()\r\n\tconst history = useHistory()\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t<SearchBox location={location} history={history} />\r\n\t\t\t<AllFilters>\r\n\t\t\t\t<div className=\"options-container\">\r\n\t\t\t\t\t{selectLists.map((item, index) => (\r\n\t\t\t\t\t\t<OptionList key={index} item={item} location={location} history={history} />\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t</AllFilters>\r\n\t\t\t<SelectedFilters location={location} history={history} />\r\n\t\t</Container>\r\n\t)\r\n}\r\nexport default SearchSection\r\nconst FiltersBox = styled.div`\r\n\tdisplay: flex;\r\n\tflex-wrap: wrap;\r\n\tmargin: 15px 0;\r\n\t.filter {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tcolor: white;\r\n\t\tborder-radius: 7px;\r\n\t\tmargin: 0 20px 20px 0;\r\n\t\tbackground: #4c5264;\r\n\t\tpadding: 4px;\r\n\t}\r\n\timg {\r\n\t\tmargin-left: 5px;\r\n\t\twidth: 15px;\r\n\t\tfilter: invert(1);\r\n\t\theight: auto;\r\n\t}\r\n`\r\ntype FilterProps = {\r\n\thistory: RouteComponentProps[\"history\"]\r\n\tlocation: RouteComponentProps[\"location\"]\r\n}\r\nconst SelectedFilters: FC<FilterProps> = ({ history, location }) => {\r\n\tconst [filter, setFilter] = useState<any[]>([])\r\n\tconst obj = getUrlObj(location.search)\r\n\r\n\tuseEffect(() => {\r\n\t\tlet arr = []\r\n\t\tfor (let key in obj) {\r\n\t\t\tif (obj[key]) {\r\n\t\t\t\tarr.push({ type: key, value: obj[key] })\r\n\t\t\t}\r\n\t\t}\r\n\t\tsetFilter(arr)\r\n\t}, [location])\r\n\tconst removeFilter = (filter: ListType) => {\r\n\t\tdelete obj[filter.type]\r\n\t\tconst url = new URLSearchParams(obj).toString()\r\n\t\thistory.push(\"/search?\" + url)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<FiltersBox>\r\n\t\t\t{filter.map((e, index) => (\r\n\t\t\t\t<div key={index} className=\"filter\">\r\n\t\t\t\t\t<span>\r\n\t\t\t\t\t\t<b>{e.type}:</b> {e.value}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t\t<img onClick={() => removeFilter(e)} src=\"./assets/icons/x.svg\" />\r\n\t\t\t\t</div>\r\n\t\t\t))}\r\n\t\t</FiltersBox>\r\n\t)\r\n}\r\n","import React, { FC, useEffect, useState } from \"react\"\r\nimport styled from \"styled-components\"\r\nimport homeListQuery from \"../api/anime/homeListAPI\"\r\nimport Carousel from \"../components/Home/Carousel\"\r\nimport SearchSection from \"../components/Search/SearchSection\"\r\ntype List = Array<{\r\n\tid: number\r\n\tcoverImage: {\r\n\t\textraLarge: string\r\n\t}\r\n\ttitle: {\r\n\t\tenglish: string\r\n\t\tromaji: string\r\n\t}\r\n}> | null\r\n\r\nconst Home: FC = () => {\r\n\tconst [trending, setTrending] = useState<List>(null)\r\n\tconst [top, setTop] = useState<List>(null)\r\n\r\n\tuseEffect(() => {\r\n\t\tlet isMounted = true\r\n\t\tconst getAnimes = async () => {\r\n\t\t\ttry {\r\n\t\t\t\tconst { top, trending } = await homeListQuery()\r\n\t\t\t\tif (isMounted) {\r\n\t\t\t\t\tsetTop(top.media)\r\n\t\t\t\t\tsetTrending(trending.media)\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.log(error)\r\n\t\t\t}\r\n\t\t}\r\n\t\tgetAnimes()\r\n\t\treturn () => {\r\n\t\t\tisMounted = false\r\n\t\t}\r\n\t}, [])\r\n\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t<div className=\"hero\">\r\n\t\t\t\t<div className=\"hero-container\">\r\n\t\t\t\t\t<h1>Discover the world of anime using the world's largest anime database</h1>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<SearchSection />\r\n\t\t\t<Carousel header=\"Popular this season\" list={trending!} />\r\n\t\t\t<Carousel header=\"Top animes of all time\" list={top!} />\r\n\t\t</Container>\r\n\t)\r\n}\r\nexport default Home\r\nconst Container = styled.div`\r\n\t.hero {\r\n\t\tbackground: url(\"/assets/images/background.jpg\");\r\n\t\tbackground-repeat: no-repeat;\r\n\t\tbackground-size: cover;\r\n\t\twidth: 100%;\r\n\t\theight: 400px;\r\n\t\tposition: relative;\r\n\t\t.hero-container {\r\n\t\t\tposition: absolute;\r\n\t\t\ttop: 0;\r\n\t\t\tleft: 0;\r\n\t\t\tright: 0;\r\n\t\t\tbottom: 0;\r\n\t\t\tbackground-color: rgba(0, 0, 0, 0.7);\r\n\t\t}\r\n\t\th1 {\r\n\t\t\tmax-width: 1200px;\r\n\t\t\tpadding: 100px 50px;\r\n\t\t\ttext-align: center;\r\n\t\t\twidth: 100%;\r\n\t\t\tmargin: auto;\r\n\t\t\tcolor: white;\r\n\t\t\tfont-size: 3rem;\r\n\t\t}\r\n\t}\r\n\t@media (max-width: 1024px) {\r\n\t\t.hero {\r\n\t\t\theight: 300px;\r\n\t\t\th1 {\r\n\t\t\t\tfont-size: 2.5rem;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t@media (max-width: 768px) {\r\n\t\t.hero {\r\n\t\t\theight: 200px;\r\n\t\t\th1 {\r\n\t\t\t\tfont-size: 2rem;\r\n\t\t\t\tpadding: 50px;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t@media (max-width: 480px) {\r\n\t\t.hero {\r\n\t\t\theight: 200px;\r\n\t\t\tmargin: 0;\r\n\t\t\th1 {\r\n\t\t\t\tpadding: 40px 20px;\r\n\t\t\t\tfont-size: 1.7rem;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`\r\n","import { FC } from \"react\"\r\nimport styled from \"styled-components\"\r\nimport BeatLoader from \"react-spinners/BeatLoader\"\r\ntype Size = \"small\" | \"medium\" | \"large\"\r\ninterface ButtonStyleType {\r\n\tsize: Size\r\n\tdisabled: boolean\r\n\tcolor: string\r\n\tcustomStyle?: string\r\n}\r\nconst PrimaryButtonStyle = styled.button<ButtonStyleType>`\r\n\tfont-family: \"Overpass\", sans-serif;\r\n\tcursor: pointer;\r\n\tbackground: ${({ color }) => color};\r\n\tborder-radius: 4px;\r\n\tborder: none;\r\n\tcolor: white;\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n\tfont-weight: 500;\r\n\ttransition: 0.2s;\r\n\twidth: max-content;\r\n\t:hover {\r\n\t\tfilter: brightness(0.9);\r\n\t}\r\n\t:disabled {\r\n\t\tfilter: brightness(0.8);\r\n\t\topacity: 0.7;\r\n\t}\r\n\tfont-size: ${({ size }) =>\r\n\t\tsize === \"small\" ? \"0.9rem\" : size === \"medium\" ? \"1.1rem\" : size === \"large\" ? \"1.5rem\" : \"0\"};\r\n\tpadding: ${({ size }) =>\r\n\t\tsize === \"small\"\r\n\t\t\t? \"3px 8px\"\r\n\t\t\t: size === \"medium\"\r\n\t\t\t? \"5px 12px\"\r\n\t\t\t: size === \"large\"\r\n\t\t\t? \"8px 16px\"\r\n\t\t\t: \"0\"};\r\n\t@media (max-width: 640px) {\r\n\t\tfont-size: ${({ size }) =>\r\n\t\t\tsize === \"small\"\r\n\t\t\t\t? \"0.8rem\"\r\n\t\t\t\t: size === \"medium\"\r\n\t\t\t\t? \"0.95rem\"\r\n\t\t\t\t: size === \"large\"\r\n\t\t\t\t? \"1.15rem\"\r\n\t\t\t\t: \"0\"};\r\n\t}\r\n\t${({ customStyle }) => customStyle}\r\n`\r\n\r\ninterface ButtonType {\r\n\tonClick?: () => void\r\n\tclassName?: string\r\n\tsize?: Size\r\n\tcolor?: \"green\" | \"red\"\r\n\tisLoading?: boolean\r\n\tdisabled?: boolean\r\n\tcustomStyle?: string\r\n}\r\nexport const PrimaryBtn: FC<ButtonType> = ({\r\n\tchildren,\r\n\tcolor = \"green\",\r\n\tsize = \"medium\",\r\n\tonClick,\r\n\tclassName,\r\n\tdisabled,\r\n\tisLoading,\r\n\tcustomStyle,\r\n}) => {\r\n\tconst spinnerSize = size === \"small\" ? 5 : size === \"medium\" ? 10 : size === \"large\" ? 15 : 0\r\n\treturn (\r\n\t\t<PrimaryButtonStyle\r\n\t\t\tcolor={color === \"red\" ? \"#F15858\" : \"#70c7a7\"}\r\n\t\t\tdisabled={disabled || false}\r\n\t\t\tsize={size}\r\n\t\t\tonClick={onClick}\r\n\t\t\tclassName={className}\r\n\t\t\tcustomStyle={customStyle}>\r\n\t\t\t{isLoading ? <BeatLoader size={spinnerSize} color=\"white\" /> : children}\r\n\t\t</PrimaryButtonStyle>\r\n\t)\r\n}\r\n\r\nconst SecondaryBtnStyle = styled.button<ButtonStyleType>`\r\n\tcursor: pointer;\r\n\tcolor: ${({ color }) => color};\r\n\tfont-weight: 500;\r\n\tfont-size: ${({ size }) =>\r\n\t\tsize === \"small\" ? \"0.8rem\" : size === \"medium\" ? \"1rem\" : size === \"large\" ? \"1.5rem\" : \"0\"};\r\n\tborder: none;\r\n\tbackground: none;\r\n\t:hover {\r\n\t\tfilter: brightness(0.9);\r\n\t}\r\n\t:disabled {\r\n\t\tfilter: brightness(0.8);\r\n\t\topacity: 0.7;\r\n\t}\r\n\t@media (max-width: 640px) {\r\n\t\tfont-size: ${({ size }) =>\r\n\t\t\tsize === \"small\"\r\n\t\t\t\t? \"0.8rem\"\r\n\t\t\t\t: size === \"medium\"\r\n\t\t\t\t? \"0.95rem\"\r\n\t\t\t\t: size === \"large\"\r\n\t\t\t\t? \"1.15rem\"\r\n\t\t\t\t: \"0\"};\r\n\t}\r\n\t${({ customStyle }) => customStyle}\r\n`\r\nexport const SecondaryBtn: FC<ButtonType> = ({\r\n\tchildren,\r\n\tcolor = \"green\",\r\n\tsize = \"medium\",\r\n\tonClick,\r\n\tdisabled,\r\n\tclassName,\r\n\tcustomStyle,\r\n}) => {\r\n\treturn (\r\n\t\t<SecondaryBtnStyle\r\n\t\t\tonClick={onClick}\r\n\t\t\tdisabled={disabled || false}\r\n\t\t\tsize={size}\r\n\t\t\tcolor={color === \"red\" ? \"#F15858\" : \"#70c7a7\"}\r\n\t\t\tclassName={className}\r\n\t\t\tcustomStyle={customStyle}>\r\n\t\t\t{children}\r\n\t\t</SecondaryBtnStyle>\r\n\t)\r\n}\r\n","import { useState, memo, useContext, FC, ChangeEvent } from \"react\"\r\nimport { Link, useHistory } from \"react-router-dom\"\r\nimport styled from \"styled-components\"\r\nimport { PrimaryBtn } from \"../components/styles/ButtonStyles\"\r\nimport { ClipLoader } from \"react-spinners\"\r\nimport { UserContext } from \"../context/UserContext\"\r\nimport { AppContext } from \"../context/AppContext\"\r\nimport { H1 } from \"../components/styles/Styles\"\r\n\r\nconst Login: FC = () => {\r\n\tconst [form, setForm] = useState({ email: null, password: null })\r\n\tconst history = useHistory()\r\n\tconst { client } = useContext(AppContext)\r\n\tconst { user, loadingUser, setUser, setAccessToken } = useContext(UserContext)\r\n\tconst { isLoading } = user\r\n\r\n\tconst handleChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n\t\tsetForm({ ...form, [e.target.name]: e.target.value })\r\n\t}\r\n\r\n\tconst handleSubmit = async () => {\r\n\t\tloadingUser(true)\r\n\t\tconst { data, ok } = await client(\"/user/auth/login\", {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tbody: form,\r\n\t\t\tshouldShowMessage: \"default\",\r\n\t\t})\r\n\t\tif (ok) {\r\n\t\t\tsetAccessToken(data.accessToken)\r\n\t\t\tsetUser().then(() => history.push(\"/\"))\r\n\t\t}\r\n\r\n\t\tloadingUser(false)\r\n\t}\r\n\treturn (\r\n\t\t<LoginEl>\r\n\t\t\t<div className=\"form-container\">\r\n\t\t\t\t<H1>Log in</H1>\r\n\t\t\t\t<form>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tname=\"email\"\r\n\t\t\t\t\t\ttype=\"email\"\r\n\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\tplaceholder=\"Email\"\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t\tautoComplete=\"email\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\tplaceholder=\"Password\"\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t\tautoComplete=\"password\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<PrimaryBtn disabled={isLoading} isLoading={isLoading} onClick={handleSubmit}>\r\n\t\t\t\t\t\t{isLoading ? <ClipLoader color=\"#fff\" size=\"25\" /> : \"Log in\"}\r\n\t\t\t\t\t</PrimaryBtn>\r\n\t\t\t\t\t<p>\r\n\t\t\t\t\t\tDon't have an accound? <Link to=\"/register\">Sign up</Link>\r\n\t\t\t\t\t</p>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t</LoginEl>\r\n\t)\r\n}\r\n\r\nexport default memo(Login)\r\n\r\nconst LoginEl = styled.div`\r\n\tmax-width: 1200px;\r\n\tpadding: 0 50px;\r\n\tmargin: auto;\r\n\t.form-container {\r\n\t\tmax-width: 400px;\r\n\t\tmargin: auto;\r\n\t\tmargin-top: 50px;\r\n\t\tpadding: 50px;\r\n\t\tbackground: ${({ theme }) => theme.commentBg};\r\n\t\tborder-radius: 4px;\r\n\t\th1 {\r\n\t\t\ttext-align: center;\r\n\t\t\tmargin-bottom: 50px;\r\n\t\t}\r\n\r\n\t\tform {\r\n\t\t\twidth: 100%;\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\t\t\talign-items: center;\r\n\t\t\tinput {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\tmargin: 10px 0;\r\n\t\t\t\theight: 35px;\r\n\t\t\t\tfont-size: 1rem;\r\n\t\t\t\tborder-radius: 4px;\r\n\t\t\t\tpadding: 5px 10px;\r\n\t\t\t\tborder: none;\r\n\t\t\t\tbackground: #edf1f5;\r\n\t\t\t}\r\n\t\t\tp {\r\n\t\t\t\tmargin-top: 50px;\r\n\t\t\t\ta {\r\n\t\t\t\t\tcolor: #70c7a7;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tbutton {\r\n\t\t\tmargin-top: 30px;\r\n\t\t}\r\n\t}\r\n\t@media (max-width: 768px) {\r\n\t\tpadding: 0;\r\n\t\tmargin: 0;\r\n\t\t.form-container {\r\n\t\t\tpadding: 50px;\r\n\t\t\tmargin: 0;\r\n\t\t\tmax-width: 100%;\r\n\t\t\theight: 80vh;\r\n\t\t}\r\n\t}\r\n\t@media (max-width: 480px) {\r\n\t\t.form-container {\r\n\t\t\tpadding: 50px 20px;\r\n\t\t\tmargin: 0;\r\n\t\t\tmax-width: 100%;\r\n\t\t\theight: 80vh;\r\n\t\t}\r\n\t}\r\n`\r\n","import { FC } from \"react\"\r\nimport ClipLoader from \"react-spinners/ClipLoader\"\r\nimport styled from \"styled-components\"\r\n\r\nconst LoadingEl = styled.div<{ padding: number }>`\r\n\twidth: 100%;\r\n\tpadding-top: ${({ padding }) => padding || \"0\"}px;\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n`\r\ntype Props = {\r\n\tsize?: number\r\n\tpadding?: number\r\n}\r\nconst LoadingSpinner: FC<Props> = ({ size, padding = 0 }) => {\r\n\treturn (\r\n\t\t<LoadingEl padding={padding}>\r\n\t\t\t<ClipLoader color=\"#70c7a7\" size={size || 50} />\r\n\t\t</LoadingEl>\r\n\t)\r\n}\r\nexport default LoadingSpinner\r\n","import { formatDistanceStrict } from \"date-fns\"\r\nimport { FC } from \"react\"\r\nimport { Link } from \"react-router-dom\"\r\nimport styled from \"styled-components\"\r\ntype Props = {\r\n\tusername: string\r\n\tavatar_url: string\r\n\tdate: number\r\n\tisEdited?: boolean\r\n}\r\nconst UserLink: FC<Props> = ({ username, avatar_url, date, isEdited }) => {\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t<Link className=\"user\" to={`/user/${username}`}>\r\n\t\t\t\t<img src={avatar_url} alt=\"\" />\r\n\t\t\t\t<div className=\"username-date\">\r\n\t\t\t\t\t<span className=\"username\">{username}</span>\r\n\t\t\t\t\t{!!date && (\r\n\t\t\t\t\t\t<span className=\"date\">\r\n\t\t\t\t\t\t\t{formatDistanceStrict(new Date(date * 1000), new Date(), {\r\n\t\t\t\t\t\t\t\taddSuffix: true,\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t{isEdited && <span className=\"edited\">(edited)</span>}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t</Link>\r\n\t\t</Container>\r\n\t)\r\n}\r\nexport default UserLink\r\nconst Container = styled.div`\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\t.username-date {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t}\r\n\t.user {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tmargin-right: 15px;\r\n\t\timg {\r\n\t\t\twidth: 40px;\r\n\t\t\theight: 40px;\r\n\t\t\tborder-radius: 7px;\r\n\t\t\tmargin-right: 10px;\r\n\t\t}\r\n\t\tspan.username {\r\n\t\t\tfont-size: 1rem;\r\n\t\t\tcolor: #70c7a7;\r\n\t\t}\r\n\t}\r\n\tspan.date,\r\n\tspan.edited {\r\n\t\tfont-size: 0.8rem;\r\n\t\tcolor: grey;\r\n\t}\r\n\t.edited {\r\n\t\tmargin-left: 5px;\r\n\t}\r\n\t@media (max-width: 768px) {\r\n\t\t.user {\r\n\t\t\timg {\r\n\t\t\t\twidth: 30px;\r\n\t\t\t\theight: 30px;\r\n\t\t\t}\r\n\t\t\tspan.username {\r\n\t\t\t\tfont-size: 0.8rem;\r\n\t\t\t}\r\n\t\t}\r\n\t\tspan.date,\r\n\t\tspan.edited {\r\n\t\t\tfont-size: 0.75rem;\r\n\t\t}\r\n\t}\r\n`\r\n","import { FC, useContext, useEffect, useLayoutEffect, useRef, useState } from \"react\"\r\nimport styled from \"styled-components\"\r\nimport { AppContext } from \"../../context/AppContext\"\r\nimport { UserContext } from \"../../context/UserContext\"\r\nimport { PrimaryBtn, SecondaryBtn } from \"../styles/ButtonStyles\"\r\nimport UserLink from \"../UserLink\"\r\nexport type CommentType = {\r\n\tuser_id: number\r\n\tcomment_id: number\r\n\tusername: string\r\n\tavatar: string\r\n\tcreated_at: number\r\n\tis_edited: boolean\r\n\ttext: string\r\n}\r\ntype CommentProps = {\r\n\tcomment: CommentType\r\n\tgetComments: () => Promise<void>\r\n}\r\nconst Comment: FC<CommentProps> = ({ comment, getComments }) => {\r\n\tconst [newComment, setNewComment] = useState(comment.text)\r\n\tconst [isEditOpen, setIsEditOpen] = useState(false)\r\n\tconst [pending, setPending] = useState(false)\r\n\tconst { user_id } = useContext(UserContext).user\r\n\tconst { showModal, client } = useContext(AppContext)\r\n\tconst textareaRef = useRef<HTMLTextAreaElement>(null)\r\n\r\n\tuseEffect(() => {\r\n\t\tif (isEditOpen && !pending) {\r\n\t\t\tsetIsEditOpen(false)\r\n\t\t}\r\n\t}, [comment])\r\n\tuseLayoutEffect(() => {\r\n\t\tif (textareaRef.current != null) {\r\n\t\t\tconst scrollHeight = textareaRef.current.scrollHeight\r\n\t\t\ttextareaRef.current.style.height = scrollHeight + \"px\"\r\n\t\t\tif (isEditOpen) {\r\n\t\t\t\ttextareaRef.current.selectionStart = textareaRef.current.value.length\r\n\t\t\t\ttextareaRef.current.selectionEnd = textareaRef.current.value.length\r\n\t\t\t\ttextareaRef.current.focus()\r\n\t\t\t}\r\n\t\t}\r\n\t}, [textareaRef.current, isEditOpen])\r\n\tconst handleEditSubmit = async () => {\r\n\t\tsetPending(true)\r\n\t\tconst { ok } = await client(`/comments/anime/${comment.comment_id}`, {\r\n\t\t\tmethod: \"PUT\",\r\n\t\t\tbody: { newComment },\r\n\t\t\tshouldShowMessage: \"default\",\r\n\t\t})\r\n\t\tif (ok) {\r\n\t\t\tawait getComments()\r\n\t\t}\r\n\r\n\t\tsetIsEditOpen(false)\r\n\t\tsetPending(false)\r\n\t}\r\n\tconst handleEditOpen = () => {\r\n\t\tsetIsEditOpen(true)\r\n\t}\r\n\treturn (\r\n\t\t<CommentBox>\r\n\t\t\t<div className=\"top-bar\">\r\n\t\t\t\t<UserLink\r\n\t\t\t\t\tusername={comment.username}\r\n\t\t\t\t\tavatar_url={comment.avatar}\r\n\t\t\t\t\tdate={comment.created_at}\r\n\t\t\t\t\tisEdited={comment.is_edited}\r\n\t\t\t\t/>\r\n\t\t\t\t{user_id == comment.user_id && (\r\n\t\t\t\t\t<div className=\"actions\">\r\n\t\t\t\t\t\t{isEditOpen ? (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<SecondaryBtn\r\n\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\tcolor=\"red\"\r\n\t\t\t\t\t\t\t\t\tonClick={() => setIsEditOpen(false)}\r\n\t\t\t\t\t\t\t\t\tdisabled={pending}>\r\n\t\t\t\t\t\t\t\t\tCancel\r\n\t\t\t\t\t\t\t\t</SecondaryBtn>\r\n\t\t\t\t\t\t\t\t<PrimaryBtn\r\n\t\t\t\t\t\t\t\t\tcustomStyle=\"margin-left: 10px;\"\r\n\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\tonClick={handleEditSubmit}\r\n\t\t\t\t\t\t\t\t\tdisabled={pending}>\r\n\t\t\t\t\t\t\t\t\tSubmit\r\n\t\t\t\t\t\t\t\t</PrimaryBtn>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<SecondaryBtn size=\"small\" onClick={handleEditOpen} disabled={pending}>\r\n\t\t\t\t\t\t\t\t\tEdit\r\n\t\t\t\t\t\t\t\t</SecondaryBtn>\r\n\t\t\t\t\t\t\t\t<SecondaryBtn\r\n\t\t\t\t\t\t\t\t\tcolor=\"red\"\r\n\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\tcustomStyle=\"margin-left: 10px;\"\r\n\t\t\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\t\t\tshowModal(\"DELETE_COMMENT\", { getComments, comment, type: \"anime\" })\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tdisabled={pending}>\r\n\t\t\t\t\t\t\t\t\tDelete\r\n\t\t\t\t\t\t\t\t</SecondaryBtn>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t\t{isEditOpen ? (\r\n\t\t\t\t<textarea\r\n\t\t\t\t\tref={textareaRef}\r\n\t\t\t\t\tname=\"newComment\"\r\n\t\t\t\t\tdefaultValue={newComment}\r\n\t\t\t\t\tonChange={e => setNewComment(e.target.value)}></textarea>\r\n\t\t\t) : (\r\n\t\t\t\t<p className=\"comment\">{comment.text}</p>\r\n\t\t\t)}\r\n\t\t</CommentBox>\r\n\t)\r\n}\r\nexport default Comment\r\n\r\nconst CommentBox = styled.div`\r\n\tborder-radius: 4px;\r\n\tpadding: 15px;\r\n\tmargin: 10px 0;\r\n\tbackground: ${({ theme }) => theme.commentBg};\r\n\t.top-bar {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t}\r\n\t.comment-data {\r\n\t\twidth: 100%;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\t.user-data {\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t}\r\n\t\timg {\r\n\t\t\twidth: 30px;\r\n\t\t\theight: 30px;\r\n\t\t\tobject-fit: cover;\r\n\t\t\tmargin-right: 10px;\r\n\t\t\tborder-radius: 4px;\r\n\t\t}\r\n\t\t.username {\r\n\t\t\tcolor: #70c7a7;\r\n\t\t}\r\n\t\t.date {\r\n\t\t\tfont-size: 0.85rem;\r\n\t\t\tmargin-left: 20px;\r\n\t\t\tcolor: grey;\r\n\t\t}\r\n\t}\r\n\t.actions {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t}\r\n\tp {\r\n\t\tmargin-top: 15px;\r\n\t\twhite-space: pre-line;\r\n\t}\r\n\ttextarea {\r\n\t\tmargin: 5px 0;\r\n\t\tpadding: 5px;\r\n\t\twidth: 100%;\r\n\t\tfont-size: 1rem;\r\n\t\theight: unset;\r\n\t\tborder-radius: 4px;\r\n\t\tborder: none;\r\n\t}\r\n\t@media (max-width: 768px) {\r\n\t\tp,\r\n\t\ttextarea {\r\n\t\t\tfont-size: 0.9rem;\r\n\t\t}\r\n\t}\r\n`\r\n","import { FC, FormEvent, useContext, useEffect, useState } from \"react\"\r\nimport styled from \"styled-components\"\r\nimport { PrimaryBtn } from \"../styles/ButtonStyles\"\r\nimport LoadingSpinner from \"../LoadingSpinner\"\r\nimport { UserContext } from \"../../context/UserContext\"\r\nimport Comment, { CommentType } from \"./Comment\"\r\nimport { AppContext } from \"../../context/AppContext\"\r\nimport { H2 } from \"../styles/Styles\"\r\n\r\ntype Props = {\r\n\tanime_id: number\r\n}\r\n\r\nconst Comments: FC<Props> = ({ anime_id }) => {\r\n\tconst [comments, setComments] = useState<CommentType[]>([])\r\n\tconst [isLoading, setIsLoading] = useState(true)\r\n\tconst [isSending, setIsSending] = useState(false)\r\n\tconst { client } = useContext(AppContext)\r\n\tconst getComments = async () => {\r\n\t\tconst { data, ok, message } = await client(`/comments/anime/${anime_id}`)\r\n\t\tif (ok) {\r\n\t\t\tsetComments(data)\r\n\t\t} else {\r\n\t\t\tconsole.log(message)\r\n\t\t}\r\n\t\tsetIsLoading(false)\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tgetComments()\r\n\t}, [])\r\n\r\n\tconst [text, setText] = useState(\"\")\r\n\r\n\tconst handleSubmit = async (e: FormEvent<HTMLFormElement>) => {\r\n\t\te.preventDefault()\r\n\t\tsetIsSending(true)\r\n\r\n\t\tconst { ok } = await client(`/comments/anime/${anime_id}`, {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tbody: { comment: text },\r\n\t\t\tshouldShowMessage: \"default\",\r\n\t\t})\r\n\t\tif (ok) {\r\n\t\t\tawait getComments()\r\n\t\t\tsetText(\"\")\r\n\t\t}\r\n\t\tsetIsSending(false)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t<H2>Comments</H2>\r\n\t\t\t<CommentForm onSubmit={handleSubmit}>\r\n\t\t\t\t<textarea\r\n\t\t\t\t\tname=\"comment\"\r\n\t\t\t\t\tonChange={e => setText(e.target.value)}\r\n\t\t\t\t\tdisabled={isSending}\r\n\t\t\t\t\tvalue={text}\r\n\t\t\t\t\tplaceholder=\"Add your comment\"></textarea>\r\n\t\t\t\t<br />\r\n\t\t\t\t<PrimaryBtn disabled={isSending} customStyle=\"padding: 7px 10px; font-size: 1.2rem;\">\r\n\t\t\t\t\tSend\r\n\t\t\t\t</PrimaryBtn>\r\n\t\t\t</CommentForm>\r\n\t\t\t<div className=\"all-comments\">\r\n\t\t\t\t{isLoading ? <LoadingSpinner size={50} /> : null}\r\n\t\t\t\t{comments?.map(comment => (\r\n\t\t\t\t\t<Comment key={comment.comment_id} comment={comment} getComments={getComments} />\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t</Container>\r\n\t)\r\n}\r\nexport default Comments\r\n\r\nconst Container = styled.section`\r\n\tmax-width: 1200px;\r\n\tpadding: 0 50px;\r\n\tmargin: auto;\r\n\r\n\t.all-comments {\r\n\t\tmargin-top: 20px;\r\n\t}\r\n\t@media (max-width: 768px) {\r\n\t\tpadding: 0 20px;\r\n\t}\r\n`\r\nconst CommentForm = styled.form`\r\n\ttextarea {\r\n\t\twidth: 100%;\r\n\t\theight: 100px;\r\n\t\tfont-size: 1.2rem;\r\n\t\tborder-radius: 4px;\r\n\t\tborder: none;\r\n\t\tpadding: 10px;\r\n\t\tmargin-bottom: 10px;\r\n\t}\r\n\t@media (max-width: 768px) {\r\n\t\ttextarea {\r\n\t\t\tfont-size: 1rem;\r\n\t\t}\r\n\t}\r\n`\r\n","import { FC } from \"react\"\r\nimport styled from \"styled-components\"\r\nimport { Link } from \"react-router-dom\"\r\nimport { PrimaryBtn } from \"../styles/ButtonStyles\"\r\nimport { H1 } from \"../styles/Styles\"\r\n\r\ntype Props = {\r\n\tdata: any\r\n\tfavAnime: {\r\n\t\tisFavorite: boolean\r\n\t\tisLoading: boolean\r\n\t}\r\n\thandleAddToFavorites: () => Promise<void>\r\n\thandleRemoveFromFavorites: () => Promise<void>\r\n\r\n\tisLoading: boolean\r\n}\r\nconst RightSide: FC<Props> = ({\r\n\tdata,\r\n\tfavAnime,\r\n\thandleAddToFavorites,\r\n\thandleRemoveFromFavorites,\r\n\tisLoading,\r\n}) => {\r\n\tconst btnName = favAnime.isFavorite ? \"Remove\" : \"Add to Favorites\"\r\n\r\n\treturn (\r\n\t\t<Section>\r\n\t\t\t<H1 customStyle=\"margin-bottom: 10px;\">{data.title.english || data.title.romaji}</H1>\r\n\t\t\t<div className=\"img-and-desc\">\r\n\t\t\t\t<div className=\"mobile-img-cont\">\r\n\t\t\t\t\t<img className=\"mobile-img\" src={data.coverImage.extraLarge} alt=\"\" />\r\n\t\t\t\t\t<PrimaryBtn\r\n\t\t\t\t\t\tdisabled={favAnime.isLoading}\r\n\t\t\t\t\t\tisLoading={favAnime.isLoading || isLoading}\r\n\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\tfavAnime.isFavorite ? handleRemoveFromFavorites() : handleAddToFavorites()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tclassName=\"fav-btn\"\r\n\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\tcolor={favAnime.isFavorite ? \"red\" : \"green\"}>\r\n\t\t\t\t\t\t{btnName}\r\n\t\t\t\t\t</PrimaryBtn>\r\n\t\t\t\t</div>\r\n\t\t\t\t<p dangerouslySetInnerHTML={{ __html: data.description }}></p>\r\n\t\t\t</div>\r\n\r\n\t\t\t<ul className=\"genres\">\r\n\t\t\t\t{data.genres.map((genre: string, index: string) => (\r\n\t\t\t\t\t<Link key={index} to={`/search?genre=${genre}`}>\r\n\t\t\t\t\t\t{genre}\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t))}\r\n\t\t\t</ul>\r\n\t\t\t{data.trailer && (\r\n\t\t\t\t<iframe\r\n\t\t\t\t\tallowFullScreen\r\n\t\t\t\t\tclassName=\"trailer\"\r\n\t\t\t\t\ttitle={data.title}\r\n\t\t\t\t\twidth=\"100%\"\r\n\t\t\t\t\theight=\"350px\"\r\n\t\t\t\t\tsrc={`https://www.youtube.com/embed/${data.trailer.id}`}></iframe>\r\n\t\t\t)}\r\n\t\t</Section>\r\n\t)\r\n}\r\nexport default RightSide\r\n\r\nconst Section = styled.section`\r\n\twidth: 60%;\r\n\tmargin-left: 50px;\r\n\tmargin-top: 0px;\r\n\r\n\t.fav-btn {\r\n\t\tdisplay: none;\r\n\t}\r\n\tp {\r\n\t\tfont-size: 1.1rem;\r\n\t\tmargin-bottom: 20px;\r\n\t}\r\n\t.mobile-img {\r\n\t\tdisplay: none;\r\n\t\tborder-radius: 7px;\r\n\t}\r\n\t.trailer {\r\n\t\tmargin: 20px 0;\r\n\t}\r\n\t.genres {\r\n\t\tdisplay: flex;\r\n\t\tflex-wrap: wrap;\r\n\t\tmargin-top: 20px;\r\n\t\ta {\r\n\t\t\tborder: 1px rgba(0, 0, 0, 0.4) solid;\r\n\t\t\tcolor: #4c5264;\r\n\t\t\tbackground-color: white;\r\n\t\t\tborder-radius: 7px;\r\n\t\t\tmargin: 5px 0;\r\n\t\t\tmargin-right: 10px;\r\n\t\t\tpadding: 2px 5px;\r\n\t\t}\r\n\t}\r\n\r\n\t@media screen and (max-width: 768px) {\r\n\t\twidth: 100%;\r\n\t\tmargin: 0;\r\n\t\t.img-and-desc {\r\n\t\t\tdisplay: flex;\r\n\t\t\tmargin-bottom: 10px;\r\n\t\t\tp {\r\n\t\t\t\tfont-size: 1rem;\r\n\t\t\t\twidth: 70%;\r\n\t\t\t}\r\n\t\t\t.mobile-img-cont {\r\n\t\t\t\twidth: 30%;\r\n\t\t\t\theight: auto;\r\n\t\t\t\tmargin-right: 15px;\r\n\r\n\t\t\t\t.mobile-img {\r\n\t\t\t\t\tdisplay: block;\r\n\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\tmargin-bottom: 15px;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t.fav-btn {\r\n\t\t\tdisplay: block;\r\n\t\t}\r\n\t\t.genres {\r\n\t\t\tmargin-top: 5px;\r\n\t\t}\r\n\r\n\t\t@media screen and (max-width: 480px) {\r\n\t\t\tmargin-top: 20px;\r\n\t\t\t.img-and-desc {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\tmargin-bottom: 10px;\r\n\t\t\t\tp {\r\n\t\t\t\t\tfont-size: 0.8rem;\r\n\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\tmargin-bottom: 0;\r\n\t\t\t\t\tmargin-top: 20px;\r\n\t\t\t\t}\r\n\t\t\t\t.mobile-img-cont {\r\n\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\tmargin-right: 0px;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tiframe {\r\n\t\t\t\theight: 220px;\r\n\t\t\t}\r\n\t\t\t.genres {\r\n\t\t\t\tli {\r\n\t\t\t\t\tfont-size: 0.9rem;\r\n\t\t\t\t\tmargin: 5px 5px 5px 0;\r\n\t\t\t\t\tpadding: 2px 5px;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`\r\n","import { FC } from \"react\"\r\nimport styled from \"styled-components\"\r\nimport { PrimaryBtn } from \"../styles/ButtonStyles\"\r\ntype Props = {\r\n\tdata: any\r\n\tfavAnime: {\r\n\t\tisFavorite: boolean\r\n\t\tisLoading: boolean\r\n\t}\r\n\thandleAddToFavorites: () => Promise<void>\r\n\thandleRemoveFromFavorites: () => Promise<void>\r\n\tisLoading: boolean\r\n}\r\nconst LeftSide: FC<Props> = ({\r\n\tdata,\r\n\tfavAnime,\r\n\thandleAddToFavorites,\r\n\thandleRemoveFromFavorites,\r\n\tisLoading,\r\n}) => {\r\n\tconst btnName = favAnime.isFavorite ? \"Remove\" : \"Add to Favorites\"\r\n\r\n\treturn (\r\n\t\t<Section>\r\n\t\t\t<img className=\"desktop-img\" src={data.coverImage.extraLarge} alt=\"\" />\r\n\t\t\t<PrimaryBtn\r\n\t\t\t\tdisabled={favAnime.isLoading}\r\n\t\t\t\tisLoading={favAnime.isLoading || isLoading}\r\n\t\t\t\tonClick={() => (favAnime.isFavorite ? handleRemoveFromFavorites() : handleAddToFavorites())}\r\n\t\t\t\tclassName=\"fav-btn\"\r\n\t\t\t\tsize=\"small\"\r\n\t\t\t\tcolor={favAnime.isFavorite ? \"red\" : \"green\"}>\r\n\t\t\t\t{btnName}\r\n\t\t\t</PrimaryBtn>\r\n\t\t\t<ul className=\"details\">\r\n\t\t\t\t<li>\r\n\t\t\t\t\tSeason\r\n\t\t\t\t\t<span>\r\n\t\t\t\t\t\t{data.season} {data.seasonYear}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li>\r\n\t\t\t\t\tFormat <span>{data.format}</span>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li>\r\n\t\t\t\t\tEpisodes <span>{data.episodes}</span>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li>\r\n\t\t\t\t\tDuration <span>{data.duration} min</span>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li>\r\n\t\t\t\t\tStatus <span>{data.status}</span>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li>\r\n\t\t\t\t\tStudio <span>{data.studios?.edges[0]?.node?.name}</span>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</Section>\r\n\t)\r\n}\r\nexport default LeftSide\r\nconst Section = styled.section`\r\n\twidth: 35%;\r\n\timg {\r\n\t\twidth: 100%;\r\n\t\tborder-radius: 5px;\r\n\t\tbox-shadow: 2px 2px 10px rgba(0, 0, 0, 0.5);\r\n\t\tmargin-bottom: 15px;\r\n\t}\r\n\t.details {\r\n\t\tmargin: 20px 0;\r\n\t\tpadding: 5px 20px;\r\n\t\tborder-radius: 3px;\r\n\t\tbackground-color: white;\r\n\t\tbox-shadow: 2px 2px 2px 2px rgba(0, 0, 0, 0.1);\r\n\t\tli {\r\n\t\t\twidth: 100%;\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\tmargin: 10px 0;\r\n\t\t\tcolor: black;\r\n\t\t\tfont-size: 1.1rem;\r\n\t\t\tspan {\r\n\t\t\t\tcolor: #4c5264;\r\n\t\t\t\tfont-size: 1rem;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t@media screen and (max-width: 768px) {\r\n\t\twidth: 100%;\r\n\t\t.details {\r\n\t\t\tmargin: 0;\r\n\t\t\tpadding: 10px 20px;\r\n\t\t\tborder-radius: 0;\r\n\t\t\tbox-shadow: none;\r\n\t\t\tli {\r\n\t\t\t\tmargin: 5px 0;\r\n\t\t\t\tfont-size: 1rem;\r\n\t\t\t\tspan {\r\n\t\t\t\t\tfont-size: 0.9rem;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t.desktop-img {\r\n\t\t\tdisplay: none;\r\n\t\t}\r\n\t\t.fav-btn {\r\n\t\t\tdisplay: none;\r\n\t\t}\r\n\t}\r\n\t@media screen and (max-width: 480px) {\r\n\t\t.details {\r\n\t\t\tpadding: 5px 10px;\r\n\t\t\tli {\r\n\t\t\t\tfont-size: 0.9rem;\r\n\t\t\t\tspan {\r\n\t\t\t\t\tfont-size: 0.85rem;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`\r\n// const GreenBtn = `\r\n// \twidth: max-content;\r\n// \theight: max-content;\r\n// \tpadding: 5px;\r\n// \tfont-size: 0.8rem;\r\n// \t@media screen and (max-width: 768px) {\r\n// \t\tdisplay: none !important;\r\n// \t}\r\n// `\r\n// const RedBtn = `\r\n// \twidth: max-content;\r\n// \theight: max-content;\r\n// \tpadding: 5px;\r\n// \tfont-size: 0.8rem;\r\n// \tbackground-color: red;\r\n// \t@media screen and (max-width: 768px) {\r\n// \t\tdisplay: none !important;\r\n// \t}\r\n// `\r\n// const ButtonStyle = `\r\n// \twidth: max-content;\r\n// \theight: max-content;\r\n// \tpadding: 5px;\r\n// \t/* font-size: 1rem; */\r\n// \tfont-size: 0.8rem;\r\n// \t@media screen and (max-width: 768px) {\r\n// \t\tdisplay: none;\r\n// \t}\r\n// `\r\n","import React from \"react\"\r\nimport styled from \"styled-components\"\r\nimport { Link } from \"react-router-dom\"\r\nimport { H2 } from \"../styles/Styles\"\r\n\r\nconst Characters = ({ data }: any) => {\r\n\tif (!data.hasOwnProperty(\"characters\")) return null\r\n\treturn (\r\n\t\t<Section>\r\n\t\t\t<H2>Main characters</H2>\r\n\t\t\t<div className=\"characters-container\">\r\n\t\t\t\t{data.characters.edges.map(\r\n\t\t\t\t\t({\r\n\t\t\t\t\t\tnode: {\r\n\t\t\t\t\t\t\tname: { full: name },\r\n\t\t\t\t\t\t\timage,\r\n\t\t\t\t\t\t\tid,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t}: any) => (\r\n\t\t\t\t\t\t<Link to={`/character/${id}`} key={id}>\r\n\t\t\t\t\t\t\t<div className=\"character-card\">\r\n\t\t\t\t\t\t\t\t<img src={image.large} alt={name} />\r\n\t\t\t\t\t\t\t\t<p>{name}</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t)\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</Section>\r\n\t)\r\n}\r\nexport default Characters\r\nconst Section = styled.section`\r\n\tmax-width: 1200px;\r\n\tpadding: 0 50px;\r\n\tmargin: 20px auto;\r\n\th2 {\r\n\t\tmargin: 20px 0;\r\n\t}\r\n\t.characters-container {\r\n\t\tdisplay: grid;\r\n\t\tgrid-template-columns: repeat(6, minmax(120px, 1fr));\r\n\t\tjustify-content: space-between;\r\n\t\tcolumn-gap: 20px;\r\n\t\trow-gap: 20px;\r\n\t\t.character-card {\r\n\t\t\timg {\r\n\t\t\t\tborder-radius: 5px;\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\theight: 210px;\r\n\t\t\t\tobject-fit: cover;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t@media screen and (max-width: 1024px) {\r\n\t\t.characters-container {\r\n\t\t\tgrid-template-columns: repeat(5, minmax(120px, 1fr));\r\n\t\t}\r\n\t}\r\n\t@media screen and (max-width: 900px) {\r\n\t\t.characters-container {\r\n\t\t\t.character-card {\r\n\t\t\t\timg {\r\n\t\t\t\t\theight: 200px;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t@media screen and (max-width: 768px) {\r\n\t\tpadding: 0 20px;\r\n\r\n\t\t.characters-container {\r\n\t\t\tgrid-template-columns: repeat(4, minmax(100px, 1fr));\r\n\t\t}\r\n\t}\r\n\t@media screen and (max-width: 620px) {\r\n\t\t.characters-container {\r\n\t\t\tgrid-template-columns: repeat(4, minmax(80px, 1fr));\r\n\t\t\t.character-card {\r\n\t\t\t\timg {\r\n\t\t\t\t\theight: 150px;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t@media screen and (max-width: 480px) {\r\n\t\t.characters-container {\r\n\t\t\tgrid-template-columns: repeat(3, 1fr);\r\n\t\t\t.character-card {\r\n\t\t\t\tp {\r\n\t\t\t\t\tfont-size: 0.8rem;\r\n\t\t\t\t}\r\n\t\t\t\timg {\r\n\t\t\t\t\theight: 170px;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t@media screen and (max-width: 400px) {\r\n\t\t.characters-container {\r\n\t\t\tgrid-template-columns: repeat(3, 1fr);\r\n\t\t\t.character-card {\r\n\t\t\t\timg {\r\n\t\t\t\t\theight: 140px;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`\r\n","import { FC } from \"react\"\r\nimport ClipLoader from \"react-spinners/ClipLoader\"\r\nimport styled from \"styled-components\"\r\n\r\nconst LoadingEl = styled.div`\r\n\tposition: fixed;\r\n\ttop: 4rem;\r\n\tbottom: 2.5rem;\r\n\tleft: 0;\r\n\tright: 0;\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n`\r\nconst Loading: FC<{ size: number }> = ({ size }) => {\r\n\treturn (\r\n\t\t<LoadingEl>\r\n\t\t\t<ClipLoader color=\"#70c7a7\" size={size || 50} />\r\n\t\t</LoadingEl>\r\n\t)\r\n}\r\nexport default Loading\r\n","const animeQuery = async (id: number) => {\r\n\tconst query = `\r\n    query ($id: Int) {\r\n      Media(id: $id) {\r\n        id\r\n        title {\r\n          romaji\r\n          english\r\n          native\r\n        }\r\n        description\r\n        trailer {\r\n          id\r\n        }\r\n        bannerImage\r\n        coverImage {\r\n          extraLarge\r\n          large\r\n          medium\r\n          color\r\n        }\r\n        format\r\n        episodes\r\n        status\r\n        duration\r\n        startDate {\r\n          year\r\n          month\r\n          day\r\n        }\r\n        endDate {\r\n          year\r\n          month\r\n          day\r\n        }\r\n        season\r\n        seasonYear\r\n        studios(isMain: true) {\r\n          edges {\r\n            id\r\n            node {\r\n              name\r\n            }\r\n          }\r\n        }\r\n        genres\r\n        characters(sort: [ROLE, ID], role: MAIN) {\r\n          edges {\r\n            id\r\n            role\r\n            node {\r\n              id\r\n              name {\r\n                full\r\n              }\r\n              image {\r\n                large\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n`\r\n\tconst url = \"https://graphql.anilist.co\",\r\n\t\toptions = {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\theaders: {\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\tAccept: \"application/json\",\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\tquery,\r\n\t\t\t\tvariables: { id },\r\n\t\t\t}),\r\n\t\t}\r\n\tconst res = await fetch(url, options)\r\n\tconst json = await res.json()\r\n\treturn json.data.Media\r\n}\r\nexport default animeQuery\r\n","import { FC, useContext, useEffect, useState } from \"react\"\r\nimport styled from \"styled-components\"\r\nimport Comments from \"../components/Anime/Comments\"\r\nimport RightSide from \"../components/Anime/RightSide\"\r\nimport LeftSide from \"../components/Anime/LeftSide\"\r\nimport Characters from \"../components/Anime/Characters\"\r\nimport Loading from \"../components/Loading\"\r\nimport animeQuery from \"../api/anime/animeAPI\"\r\nimport { RouteChildrenProps } from \"react-router\"\r\nimport { AppContext } from \"../context/AppContext\"\r\n\r\ninterface RouteProps {\r\n\tmatch: {\r\n\t\tparams: {\r\n\t\t\tid: number\r\n\t\t}\r\n\t}\r\n\thistory: RouteChildrenProps[\"history\"]\r\n}\r\ninterface Anime {\r\n\tcoverImage: {\r\n\t\textraLarge: string\r\n\t}\r\n\ttitle: {\r\n\t\tenglish: string\r\n\t\tromaji: string\r\n\t}\r\n}\r\n\r\nconst AnimePage: FC<RouteProps> = ({ match, history }) => {\r\n\tconst anime_id = match.params.id\r\n\tconst [isLoading, setIsLoading] = useState(true)\r\n\tconst [anime, setAnime] = useState<Anime | null>(null)\r\n\tconst { client } = useContext(AppContext)\r\n\tconst [favAnime, setFavAnime] = useState({ isFavorite: false, isLoading: true })\r\n\tconsole.log(\"ANimePage rerender\")\r\n\tconst getAnimeData = async () => {\r\n\t\tconst anime = await animeQuery(anime_id)\r\n\t\tif (!anime) {\r\n\t\t\treturn history.replace(\"/404\")\r\n\t\t}\r\n\t\tsetAnime(anime)\r\n\t\tsetIsLoading(false)\r\n\t\tconst { data, ok } = await client(`/favorites/anime/is_favorite/${anime_id}`)\r\n\t\tif (ok) {\r\n\t\t\tsetFavAnime({ isFavorite: data.is_favorite, isLoading: false })\r\n\t\t} else {\r\n\t\t\tsetFavAnime({ isFavorite: false, isLoading: false })\r\n\t\t}\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tgetAnimeData()\r\n\t}, [])\r\n\r\n\tconst handleAddToFavorites = async () => {\r\n\t\tsetFavAnime({ isFavorite: false, isLoading: true })\r\n\t\tconst { ok } = await client(`/favorites/anime/`, {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tbody: {\r\n\t\t\t\tanime_id,\r\n\t\t\t\tcover_image: anime?.coverImage.extraLarge,\r\n\t\t\t\ttitle: anime?.title.english || anime?.title.romaji,\r\n\t\t\t},\r\n\t\t\tshouldShowMessage: \"error\",\r\n\t\t})\r\n\r\n\t\tsetFavAnime(prev => ({ isFavorite: ok ? true : prev.isFavorite, isLoading: false }))\r\n\t}\r\n\tconst handleRemoveFromFavorites = async () => {\r\n\t\tsetFavAnime({ isFavorite: false, isLoading: true })\r\n\t\tconst { ok } = await client(`/favorites/anime/${anime_id}`, {\r\n\t\t\tmethod: \"DELETE\",\r\n\t\t\tshouldShowMessage: \"error\",\r\n\t\t})\r\n\r\n\t\tsetFavAnime(prev => ({ isFavorite: ok ? false : prev.isFavorite, isLoading: false }))\r\n\t}\r\n\tif (!isLoading)\r\n\t\treturn (\r\n\t\t\t<Container>\r\n\t\t\t\t<div className=\"flex-container\">\r\n\t\t\t\t\t<LeftSide\r\n\t\t\t\t\t\tfavAnime={favAnime}\r\n\t\t\t\t\t\thandleAddToFavorites={handleAddToFavorites}\r\n\t\t\t\t\t\thandleRemoveFromFavorites={handleRemoveFromFavorites}\r\n\t\t\t\t\t\tdata={anime}\r\n\t\t\t\t\t\tisLoading={isLoading}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<RightSide\r\n\t\t\t\t\t\tfavAnime={favAnime}\r\n\t\t\t\t\t\thandleAddToFavorites={handleAddToFavorites}\r\n\t\t\t\t\t\thandleRemoveFromFavorites={handleRemoveFromFavorites}\r\n\t\t\t\t\t\tdata={anime}\r\n\t\t\t\t\t\tisLoading={isLoading}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<Characters data={anime} />\r\n\t\t\t\t<Comments anime_id={match.params.id} />\r\n\t\t\t</Container>\r\n\t\t)\r\n\treturn <Loading size={100} />\r\n}\r\nexport default AnimePage\r\nconst Container = styled.div`\r\n\tpadding: 50px 0;\r\n\t.flex-container {\r\n\t\twidth: 100%;\r\n\t\tmax-width: 1200px;\r\n\t\tpadding: 0 50px;\r\n\t\tmargin: auto;\r\n\t\tdisplay: flex;\r\n\t}\r\n\r\n\t@media screen and (max-width: 768px) {\r\n\t\tpadding: 20px 0;\r\n\t\t.flex-container {\r\n\t\t\tflex-direction: column-reverse;\r\n\t\t\tpadding: 0 20px;\r\n\t\t}\r\n\t}\r\n\r\n\t@media screen and (max-width: 480px) {\r\n\t\tpadding: 0;\r\n\t\t.flex-container {\r\n\t\t}\r\n\t}\r\n`\r\n","import { useState, useContext, useEffect, FormEvent, ChangeEvent, FC } from \"react\"\r\nimport { Link, useHistory } from \"react-router-dom\"\r\nimport styled from \"styled-components\"\r\nimport { PrimaryBtn } from \"../components/styles/ButtonStyles\"\r\nimport { ClipLoader } from \"react-spinners\"\r\nimport { UserContext } from \"../context/UserContext\"\r\nimport { AppContext } from \"../context/AppContext\"\r\nimport { H1 } from \"../components/styles/Styles\"\r\n\r\nconst Register: FC = () => {\r\n\tconst { user, setAccessToken, setUser, loadingUser } = useContext(UserContext)\r\n\tconst { isLoading, isLoggedIn } = user\r\n\tconst { client } = useContext(AppContext)\r\n\tconst history = useHistory()\r\n\r\n\tconst [form, setForm] = useState({\r\n\t\tusername: null,\r\n\t\temail: null,\r\n\t\tpassword: null,\r\n\t\tpassword2: null,\r\n\t})\r\n\r\n\tconst handleChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n\t\tsetForm({ ...form, [e.target.name]: e.target.value })\r\n\t}\r\n\tconst handleSubmit = async (e: FormEvent) => {\r\n\t\te.preventDefault()\r\n\t\tloadingUser(true)\r\n\t\tconst { ok, data, message } = await client(\"/user/auth/register\", {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tbody: form,\r\n\t\t\tshouldShowMessage: \"default\",\r\n\t\t})\r\n\t\tif (ok) {\r\n\t\t\tsetAccessToken(data.accessToken)\r\n\t\t\tsetUser().then(() => history.push(\"/\"))\r\n\t\t}\r\n\r\n\t\tloadingUser(false)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<RegisterEl>\r\n\t\t\t<div className=\"form-container\">\r\n\t\t\t\t<H1>Register</H1>\r\n\t\t\t\t<form onSubmit={handleSubmit}>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tname=\"username\"\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t\tplaceholder=\"Username\"\r\n\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<input name=\"email\" type=\"email\" required placeholder=\"Email\" onChange={handleChange} />\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t\tplaceholder=\"Password\"\r\n\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tname=\"password2\"\r\n\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t\tplaceholder=\"Confirm password\"\r\n\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<PrimaryBtn\r\n\t\t\t\t\t\tdisabled={isLoading}\r\n\t\t\t\t\t\tisLoading={isLoading}\r\n\t\t\t\t\t\tcustomStyle={`\r\n\t\t\t\t\t\t\tfont-size: 1rem;\r\n\t\t\t\t\t\t\twidth: 120px;\r\n\t\t\t\t\t\t\theight: 40px;\r\n\t\t\t\t\t\t`}>\r\n\t\t\t\t\t\t{isLoading ? <ClipLoader color=\"#fff\" size=\"25\" /> : \"Register\"}\r\n\t\t\t\t\t</PrimaryBtn>\r\n\t\t\t\t\t<p>\r\n\t\t\t\t\t\tAlready signed up? <Link to=\"/login\">Log in</Link>\r\n\t\t\t\t\t</p>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t</RegisterEl>\r\n\t)\r\n}\r\nexport default Register\r\nconst RegisterEl = styled.div`\r\n\tmax-width: 1200px;\r\n\tpadding: 0 50px;\r\n\tmargin: auto;\r\n\t.form-container {\r\n\t\tmax-width: 400px;\r\n\t\tmargin: auto;\r\n\t\tmargin-top: 50px;\r\n\t\tpadding: 50px;\r\n\t\tbackground: ${({ theme }) => theme.commentBg};\r\n\t\tborder-radius: 4px;\r\n\t\th1 {\r\n\t\t\ttext-align: center;\r\n\t\t\tmargin-bottom: 50px;\r\n\t\t}\r\n\t\tform {\r\n\t\t\twidth: 100%;\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\t\t\talign-items: center;\r\n\t\t\tinput {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\tmargin: 10px 0;\r\n\t\t\t\theight: 35px;\r\n\t\t\t\tfont-size: 1rem;\r\n\t\t\t\tborder-radius: 4px;\r\n\t\t\t\tpadding: 5px 10px;\r\n\t\t\t\tborder: none;\r\n\t\t\t\tbackground: #edf1f5;\r\n\t\t\t}\r\n\t\t\tp {\r\n\t\t\t\tmargin-top: 50px;\r\n\t\t\t\ta {\r\n\t\t\t\t\tcolor: #70c7a7;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tbutton {\r\n\t\t\tmargin-top: 30px;\r\n\t\t}\r\n\t}\r\n\t@media (max-width: 768px) {\r\n\t\tpadding: 0;\r\n\t\tmargin: 0;\r\n\t\t.form-container {\r\n\t\t\tpadding: 50px;\r\n\t\t\tmargin: 0;\r\n\t\t\tmax-width: 100%;\r\n\t\t}\r\n\t}\r\n\t@media (max-width: 480px) {\r\n\t\t.form-container {\r\n\t\t\tpadding: 50px 20px;\r\n\t\t\tmargin: 0;\r\n\t\t\tmax-width: 100%;\r\n\t\t}\r\n\t}\r\n`\r\n","import { useState, useEffect, FC, useContext } from \"react\"\r\nimport styled from \"styled-components\"\r\nimport { Link } from \"react-router-dom\"\r\nimport { AppContext } from \"../../context/AppContext\"\r\nimport LoadingSpinner from \"../LoadingSpinner\"\r\nimport { H1, H2 } from \"../styles/Styles\"\r\ninterface Anime {\r\n\tanime_id?: number\r\n\ttitle?: string\r\n\tcover_image: string\r\n}\r\ninterface Character {\r\n\tcharacter_id?: number\r\n\tname?: string\r\n\tcover_image: string\r\n}\r\ninterface Favorites {\r\n\tanime: Anime[]\r\n\tcharacters: Character[]\r\n}\r\nconst Favorites: FC = () => {\r\n\tconst [favorites, setFavorites] = useState<Favorites | null>(null)\r\n\tconst [isLoading, setIsLoading] = useState(true)\r\n\tconst { client } = useContext(AppContext)\r\n\tuseEffect(() => {\r\n\t\tlet isMounted = true\r\n\t\tsetIsLoading(true)\r\n\t\t;(async () => {\r\n\t\t\tconst { data: animeData } = await client(\"/favorites/anime\")\r\n\t\t\tconst { data: characterData } = await client(\"/favorites/character\")\r\n\t\t\tif (isMounted) {\r\n\t\t\t\tsetFavorites({ anime: animeData, characters: characterData })\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t}\r\n\t\t})()\r\n\t\treturn () => {\r\n\t\t\tisMounted = false\r\n\t\t}\r\n\t}, [])\r\n\tif (isLoading) return <LoadingSpinner />\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t<H1>Favorites</H1>\r\n\t\t\t<H2>Anime</H2>\r\n\t\t\t{favorites?.anime?.length ? (\r\n\t\t\t\t<div className=\"list\">\r\n\t\t\t\t\t{favorites?.anime.map(anime => (\r\n\t\t\t\t\t\t// <AnimeCard key={anime.anime_id} anime={anime} />\r\n\t\t\t\t\t\t<Card key={anime.anime_id} item={anime} />\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t) : (\r\n\t\t\t\t<p>\r\n\t\t\t\t\tYou have no favorites. Why not to browse <Link to=\"/\">anime</Link>?\r\n\t\t\t\t</p>\r\n\t\t\t)}\r\n\t\t\t<H2>Chacarters</H2>\r\n\t\t\t{favorites?.characters?.length ? (\r\n\t\t\t\t<div className=\"list\">\r\n\t\t\t\t\t{favorites?.characters.map(character => (\r\n\t\t\t\t\t\t// <AnimeCard key={anime.anime_id} anime={anime} />\r\n\t\t\t\t\t\t<Card key={character.character_id} item={character} />\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t) : (\r\n\t\t\t\t<p>\r\n\t\t\t\t\tYou have no favorites. Why not to browse <Link to=\"/\">characters</Link>?\r\n\t\t\t\t</p>\r\n\t\t\t)}\r\n\t\t</Container>\r\n\t)\r\n}\r\nexport default Favorites\r\ninterface Card {\r\n\titem: Anime & Character\r\n}\r\nconst Card: FC<Card> = ({ item }) => {\r\n\tconst link = item.anime_id ? `/anime/${item.anime_id}` : `/character/${item.character_id}`\r\n\tconst title = item.title || item.name\r\n\treturn (\r\n\t\t<CardContainer>\r\n\t\t\t<Link to={link}>\r\n\t\t\t\t<img src={item.cover_image} alt=\"\" />\r\n\t\t\t\t<p>{title}</p>\r\n\t\t\t</Link>\r\n\t\t</CardContainer>\r\n\t)\r\n}\r\n//\r\nconst Container = styled.section`\r\n\twidth: 100%;\r\n\t.list {\r\n\t\twidth: 100%;\r\n\t\tdisplay: grid;\r\n\t\tgrid-template-columns: repeat(auto-fit, 120px);\r\n\t\tcolumn-gap: 20px;\r\n\t\trow-gap: 20px;\r\n\t\t@media (max-width: 640px) {\r\n\t\t\tgrid-template-columns: repeat(3, 1fr);\r\n\t\t}\r\n\t\t@media (max-width: 400px) {\r\n\t\t\tgrid-template-columns: repeat(2, 1fr);\r\n\t\t}\r\n\t}\r\n\tbutton {\r\n\t\tcursor: pointer;\r\n\t\twidth: max-content;\r\n\t\tborder: none;\r\n\t\tborder-radius: 4px;\r\n\t\tbackground-color: rgb(199, 77, 77);\r\n\t\tcolor: white;\r\n\t\tmargin-top: 5px;\r\n\t\tpadding: 3px 5px;\r\n\t\t&:disabled {\r\n\t\t\tbackground-color: grey;\r\n\t\t}\r\n\t}\r\n`\r\n\r\nconst CardContainer = styled.div`\r\n\twidth: 120px;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\timg {\r\n\t\twidth: 100%;\r\n\t\taspect-ratio: 2 / 3;\r\n\t\tobject-fit: cover;\r\n\t\tborder-radius: 5px;\r\n\t}\r\n\tp {\r\n\t\tfont-size: 0.9rem;\r\n\t\theight: 30px;\r\n\t\tmargin-bottom: 5px;\r\n\t}\r\n\t@media (max-width: 640px) {\r\n\t\t/* grid-template-columns: repeat(3, 1fr); */\r\n\t\twidth: 100%;\r\n\t}\r\n`\r\n","import { FC } from \"react\"\r\nimport { Link } from \"react-router-dom\"\r\nimport styled from \"styled-components\"\r\n\r\nconst Sidebar: FC<{ category: string }> = ({ category }) => {\r\n\treturn (\r\n\t\t<SideNav>\r\n\t\t\t<ul className=\"links\">\r\n\t\t\t\t<li className={category === \"profile\" ? \"link-active\" : \"link\"}>\r\n\t\t\t\t\t<Link to=\"/me/profile\">Profile</Link>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li className={category === \"favorites\" ? \"link-active\" : \"link\"}>\r\n\t\t\t\t\t<Link to=\"/me/favorites\">Favorites</Link>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li className={category === \"comments\" ? \"link-active\" : \"link\"}>\r\n\t\t\t\t\t<Link to=\"/me/comments\">Comments</Link>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li className={category === \"discussions\" ? \"link-active\" : \"link\"}>\r\n\t\t\t\t\t<Link to=\"/me/discussions\">Discussions</Link>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li className={category === \"settings\" ? \"link-active\" : \"link\"}>\r\n\t\t\t\t\t<Link to=\"/me/settings\">Settings</Link>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li className={category === \"social\" ? \"link-active\" : \"link\"}>\r\n\t\t\t\t\t<Link to=\"/me/social\">Social</Link>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</SideNav>\r\n\t)\r\n}\r\nexport default Sidebar\r\n\r\nconst SideNav = styled.aside`\r\n\tborder-radius: 7px;\r\n\tmargin-right: 100px;\r\n\twidth: 200px;\r\n\theight: max-content;\r\n\t.links {\r\n\t\tlist-style: none;\r\n\t\tli {\r\n\t\t\twidth: max-content;\r\n\t\t\ta {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\twidth: max-content;\r\n\t\t\t\tmargin: 10px 0;\r\n\t\t\t\tfont-size: 1.5rem;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t.link {\r\n\t\ta {\r\n\t\t\tcolor: ${({ theme }) => theme.header};\r\n\t\t}\r\n\t}\r\n\t.link-active {\r\n\t\ta {\r\n\t\t\tborder-left: #70c7a7 4px solid;\r\n\t\t\tpadding-left: 20px;\r\n\t\t\tcolor: #70c7a7;\r\n\t\t}\r\n\t}\r\n\t@media (max-width: 1024px) {\r\n\t\tmargin-right: 50px;\r\n\t}\r\n\t@media (max-width: 768px) {\r\n\t\twidth: 100%;\r\n\t\tmargin-bottom: 20px;\r\n\t\t.links {\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\toverflow-x: auto;\r\n\t\t\t> :last-child {\r\n\t\t\t\tmargin-right: 0 !important;\r\n\t\t\t}\r\n\t\t\tli {\r\n\t\t\t\tmargin-right: 25px;\r\n\t\t\t\ta {\r\n\t\t\t\t\tfont-size: 1rem;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t.link-active {\r\n\t\t\ta {\r\n\t\t\t\tborder-left: none;\r\n\t\t\t\tpadding-left: 0px;\r\n\t\t\t\tcolor: #70c7a7;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`\r\n","import { useState, useEffect, useRef, memo, useContext, FC } from \"react\"\r\nimport styled from \"styled-components\"\r\nimport { format, parseISO } from \"date-fns\"\r\nimport { PrimaryBtn, SecondaryBtn } from \"../styles/ButtonStyles\"\r\nimport Skeleton, { SkeletonTheme } from \"react-loading-skeleton\"\r\nimport { UserContext } from \"../../context/UserContext\"\r\nimport { AppContext } from \"../../context/AppContext\"\r\nimport { H1, H2 } from \"../styles/Styles\"\r\n\r\nconst Profile: FC = () => {\r\n\tconst [isEditOpen, setIsEditOpen] = useState(false)\r\n\tconst { user, setUser } = useContext(UserContext)\r\n\tconst { client } = useContext(AppContext)\r\n\tconst { isLoading } = user\r\n\tconst [newAbout, setNewAbout] = useState(user.about || \"\")\r\n\tconst [isAboutPending, setIsAboutPending] = useState(false)\r\n\tconst textareaRef = useRef<HTMLTextAreaElement>(null)\r\n\tconst handleLogout = async () => {\r\n\t\tconst { ok } = await client(`/user/auth/logout`, {\r\n\t\t\tmethod: \"DELETE\",\r\n\t\t\tshouldShowMessage: \"default\",\r\n\t\t})\r\n\t\tif (ok) {\r\n\t\t\tlocalStorage.removeItem(\"accessToken\")\r\n\t\t\twindow.location.replace(\"/\")\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (isEditOpen && textareaRef.current) {\r\n\t\t\ttextareaRef.current.focus()\r\n\t\t}\r\n\t}, [isEditOpen])\r\n\tconst handleUpdateAbout = async () => {\r\n\t\tsetIsAboutPending(true)\r\n\t\tconst { ok } = await client(\"/user/profile/about\", {\r\n\t\t\tmethod: \"PUT\",\r\n\t\t\tshouldShowMessage: \"default\",\r\n\t\t\tbody: { newAbout },\r\n\t\t})\r\n\t\tif (ok) {\r\n\t\t\tsetIsAboutPending(false)\r\n\t\t\tsetUser()\r\n\t\t}\r\n\t}\r\n\treturn (\r\n\t\t<ProfileEl>\r\n\t\t\t<H1>Profile</H1>\r\n\t\t\t<div className=\"top\">\r\n\t\t\t\t<div className=\"avatar\">\r\n\t\t\t\t\t<img src={user.avatar_url} alt=\"\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"text\">\r\n\t\t\t\t\t<H2>{user.username}</H2>\r\n\r\n\t\t\t\t\t{isLoading || !user.created_at ? (\r\n\t\t\t\t\t\t<SkeletonTheme highlightColor=\"#f5f5f5\" color=\"#c4c4c4\">\r\n\t\t\t\t\t\t\t<Skeleton width=\"7rem\" height=\"10px\" />\r\n\t\t\t\t\t\t</SkeletonTheme>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<p>Member since {format(parseISO(user.created_at.toString()), \"MMMM y\")}</p>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"about-user\">\r\n\t\t\t\t<div className=\"about-header\">\r\n\t\t\t\t\t<H2>About me</H2>\r\n\r\n\t\t\t\t\t{isEditOpen ? (\r\n\t\t\t\t\t\t<SecondaryBtn\r\n\t\t\t\t\t\t\tonClick={() => setIsEditOpen(false)}\r\n\t\t\t\t\t\t\tisLoading={isAboutPending}\r\n\t\t\t\t\t\t\tdisabled={isAboutPending}>\r\n\t\t\t\t\t\t\tCancel\r\n\t\t\t\t\t\t</SecondaryBtn>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<SecondaryBtn\r\n\t\t\t\t\t\t\tonClick={() => setIsEditOpen(true)}\r\n\t\t\t\t\t\t\tisLoading={isAboutPending}\r\n\t\t\t\t\t\t\tdisabled={isAboutPending}>\r\n\t\t\t\t\t\t\tEdit\r\n\t\t\t\t\t\t</SecondaryBtn>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t\t{isEditOpen ? (\r\n\t\t\t\t\t<div className=\"edit-about\">\r\n\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\tref={textareaRef}\r\n\t\t\t\t\t\t\tvalue={newAbout}\r\n\t\t\t\t\t\t\tonChange={e => setNewAbout(e.target.value)}></textarea>\r\n\t\t\t\t\t\t<PrimaryBtn\r\n\t\t\t\t\t\t\tisLoading={isAboutPending}\r\n\t\t\t\t\t\t\tdisabled={isAboutPending}\r\n\t\t\t\t\t\t\tonClick={handleUpdateAbout}>\r\n\t\t\t\t\t\t\tSubmit\r\n\t\t\t\t\t\t</PrimaryBtn>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t{isLoading ? (\r\n\t\t\t\t\t\t\t<SkeletonTheme highlightColor=\"#f5f5f5\" color=\"#c4c4c4\">\r\n\t\t\t\t\t\t\t\t<Skeleton width=\"100%\" height=\"10px\" />\r\n\t\t\t\t\t\t\t\t<Skeleton width=\"100%\" height=\"10px\" />\r\n\t\t\t\t\t\t\t\t<Skeleton width=\"100%\" height=\"10px\" />\r\n\t\t\t\t\t\t\t\t<Skeleton width=\"100%\" height=\"10px\" />\r\n\t\t\t\t\t\t\t\t<Skeleton width=\"100%\" height=\"10px\" />\r\n\t\t\t\t\t\t\t</SkeletonTheme>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<p>{user.about ? user.about : \"Write about yourself\"}</p>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t\t<SecondaryBtn color=\"red\" onClick={handleLogout} customStyle=\"margin-top: 20px;\">\r\n\t\t\t\t\tLogout\r\n\t\t\t\t</SecondaryBtn>\r\n\t\t\t</div>\r\n\t\t</ProfileEl>\r\n\t)\r\n}\r\nexport default memo(Profile)\r\n\r\nconst ProfileEl = styled.section`\r\n\twidth: 100%;\r\n\r\n\t.top {\r\n\t\tdisplay: flex;\r\n\t\tmargin-bottom: 50px;\r\n\t\t.avatar {\r\n\t\t\tmargin-right: 50px;\r\n\t\t\timg {\r\n\t\t\t\twidth: 180px;\r\n\t\t\t\theight: 180px;\r\n\t\t\t\tborder-radius: 5px;\r\n\t\t\t\tobject-fit: cover;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t.about-user {\r\n\t\t.about-header {\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\talign-items: center;\r\n\t\t}\r\n\t\tp {\r\n\t\t\tbackground: ${({ theme }) => theme.commentBg};\r\n\t\t\tborder-radius: 4px;\r\n\t\t\tpadding: 10px;\r\n\t\t}\r\n\t}\r\n\t.edit-about {\r\n\t\twidth: 100%;\r\n\t\ttextarea {\r\n\t\t\twidth: 100%;\r\n\t\t\tmin-height: 200px;\r\n\t\t\theight: max-content;\r\n\t\t\tborder: none;\r\n\t\t\tborder-radius: 4px;\r\n\t\t\tpadding: 10px;\r\n\t\t\tmargin: 10px 0;\r\n\t\t\tfont-size: 1rem;\r\n\t\t\tcolor: ${({ theme }) => theme.text};\r\n\t\t\tbackground: ${({ theme }) => theme.commentBg};\r\n\t\t}\r\n\t}\r\n\t@media (max-width: 480px) {\r\n\t\t.top {\r\n\t\t\t.avatar {\r\n\t\t\t\tmargin-right: 30px;\r\n\t\t\t\timg {\r\n\t\t\t\t\twidth: 130px;\r\n\t\t\t\t\theight: 130px;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t.text {\r\n\t\t\t\tp {\r\n\t\t\t\t\tfont-size: 0.9rem;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`\r\n","import { FC } from \"react\"\r\nimport styled from \"styled-components\"\r\nimport { H2 } from \"./styles/Styles\"\r\n\r\nconst EmptyEl = styled.div`\r\n\twidth: 100%;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n\timg {\r\n\t\tmax-width: 200px;\r\n\t\tmargin-bottom: 20px;\r\n\t}\r\n`\r\nconst EmptyState: FC<{ src: string; header: string }> = ({ src, header }) => {\r\n\treturn (\r\n\t\t<EmptyEl>\r\n\t\t\t<img src={src} alt=\"\" />\r\n\t\t\t<H2>{header}</H2>\r\n\t\t</EmptyEl>\r\n\t)\r\n}\r\nexport default EmptyState\r\n","import { useState, useEffect, FC, useContext } from \"react\"\r\nimport { Link } from \"react-router-dom\"\r\nimport styled from \"styled-components\"\r\nimport { formatRelative } from \"date-fns\"\r\nimport EmptyState from \"../EmptyState\"\r\n\r\nimport LoadingSpinner from \"../LoadingSpinner\"\r\nimport { AppContext } from \"../../context/AppContext\"\r\nimport { H1, H2 } from \"../styles/Styles\"\r\ntype AnimeComment = {\r\n\tcomment_id: string\r\n\ttext: string\r\n\tanime_id?: number\r\n\tcreated_at: number\r\n\tis_edited: boolean\r\n}\r\ntype CharacterComment = {\r\n\tcomment_id: string\r\n\ttext: string\r\n\tcharacter_id?: number\r\n\tcreated_at: number\r\n\tis_edited: boolean\r\n}\r\nconst Comments: FC = () => {\r\n\tconst [animeComments, setAnimeComments] = useState<AnimeComment[]>([])\r\n\tconst [characterComments, setCharacterComments] = useState<CharacterComment[]>([])\r\n\tconst [isLoading, setIsLoading] = useState(true)\r\n\tconst { client } = useContext(AppContext)\r\n\tuseEffect(() => {\r\n\t\tlet isMounted = true\r\n\r\n\t\tconst getComments = async () => {\r\n\t\t\tconst { data: animeData } = await client(\"/comments/anime/user\")\r\n\t\t\tconst { data: characterData } = await client(\"/comments/character/user\")\r\n\t\t\tif (isMounted) {\r\n\t\t\t\tsetAnimeComments(animeData)\r\n\t\t\t\tsetCharacterComments(characterData)\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t}\r\n\t\t}\r\n\t\tgetComments()\r\n\t\treturn () => {\r\n\t\t\tisMounted = false\r\n\t\t}\r\n\t}, [])\r\n\r\n\treturn (\r\n\t\t<CommentsContainer>\r\n\t\t\t<H1>All comments</H1>\r\n\t\t\t{isLoading ? (\r\n\t\t\t\t<LoadingSpinner size={50} padding={100} />\r\n\t\t\t) : (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<H2>Anime comments</H2>\r\n\t\t\t\t\t{animeComments?.length ? (\r\n\t\t\t\t\t\tanimeComments.map(comment => <Comment key={comment.comment_id} comment={comment} />)\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<EmptyState src=\"/assets/images/empty_comments.png\" header=\"You have no comments\" />\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t<H2>Character comments</H2>\r\n\t\t\t\t\t{characterComments?.length ? (\r\n\t\t\t\t\t\tcharacterComments.map(comment => <Comment key={comment.comment_id} comment={comment} />)\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<EmptyState src=\"/assets/images/empty_comments.png\" header=\"You have no comments\" />\r\n\t\t\t\t\t)}\r\n\t\t\t\t</>\r\n\t\t\t)}\r\n\t\t</CommentsContainer>\r\n\t)\r\n}\r\nexport default Comments\r\n\r\nconst Comment: FC<{ comment: AnimeComment & CharacterComment }> = ({ comment }) => {\r\n\tconst link = comment.character_id\r\n\t\t? `/character/${comment.character_id}`\r\n\t\t: `/anime/${comment.anime_id}`\r\n\tconst linkTitle = comment.character_id ? \"Character\" : \"Anime\"\r\n\treturn (\r\n\t\t<CommentBox>\r\n\t\t\t<p className=\"comment\">{comment.text}</p>\r\n\t\t\t<div className=\"meta\">\r\n\t\t\t\t<span>\r\n\t\t\t\t\tCommented on <Link to={link}>{linkTitle}</Link>\r\n\t\t\t\t</span>\r\n\t\t\t\t<span className=\"date\">\r\n\t\t\t\t\t{formatRelative(new Date(comment.created_at * 1000), new Date())}{\" \"}\r\n\t\t\t\t\t{comment.is_edited && \"(edited)\"}\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t</CommentBox>\r\n\t)\r\n}\r\n\r\nconst CommentsContainer = styled.section`\r\n\twidth: 100%;\r\n`\r\nconst CommentBox = styled.div`\r\n\tborder-radius: 4px;\r\n\tpadding: 15px;\r\n\tmargin: 10px 0;\r\n\tcolor: ${({ theme }) => theme.text};\r\n\tbackground: ${({ theme }) => theme.commentBg};\r\n\r\n\tp.comment {\r\n\t\tcolor: ${({ theme }) => theme.header};\r\n\t\tmargin-bottom: 15px;\r\n\t\tfont-size: 1rem;\r\n\t\t@media (max-width: 640px) {\r\n\t\t\tfont-size: 0.9rem;\r\n\t\t}\r\n\t}\r\n\t.meta {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\tfont-size: 0.9rem;\r\n\t}\r\n\timg {\r\n\t\twidth: 20px;\r\n\t\tmargin-left: 20px;\r\n\t}\r\n`\r\n","import { formatRelative } from \"date-fns\"\r\nimport { FC, useContext, useEffect, useState } from \"react\"\r\nimport { Link } from \"react-router-dom\"\r\nimport styled from \"styled-components\"\r\nimport { AppContext } from \"../../context/AppContext\"\r\nimport { H1 } from \"../styles/Styles\"\r\ninterface Thread {\r\n\tthread_id: string\r\n\ttopic: string\r\n\tcreated_at: number\r\n\tis_edited: boolean\r\n}\r\nconst DiscussionsStyle = styled.section`\r\n\t.thread {\r\n\t\tmargin-bottom: 15px;\r\n\t\t@media (max-width: 640px) {\r\n\t\t\tmargin-bottom: 10px;\r\n\t\t}\r\n\t\th2 {\r\n\t\t\tfont-size: 1.5rem;\r\n\t\t\tmargin-bottom: 0;\r\n\t\t\t@media (max-width: 640px) {\r\n\t\t\t\tfont-size: 1.1rem;\r\n\t\t\t}\r\n\t\t}\r\n\t\tspan.date {\r\n\t\t\tcolor: grey;\r\n\t\t\t@media (max-width: 640px) {\r\n\t\t\t\tfont-size: 0.9rem;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`\r\n\r\nconst Discussions: FC = () => {\r\n\tconst [threads, setThreads] = useState<Thread[] | null>(null)\r\n\tconst [isLoading, setIsLoading] = useState(true)\r\n\tconst { client } = useContext(AppContext)\r\n\tuseEffect(() => {\r\n\t\tsetIsLoading(true)\r\n\t\tlet isMounted = true\r\n\t\tconst getData = async () => {\r\n\t\t\tconst { data } = await client(`/discussion/thread/user`)\r\n\t\t\tif (isMounted) {\r\n\t\t\t\tsetThreads(data)\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t}\r\n\t\t}\r\n\t\tgetData()\r\n\t\treturn () => {\r\n\t\t\tisMounted = false\r\n\t\t}\r\n\t}, [])\r\n\treturn (\r\n\t\t<DiscussionsStyle>\r\n\t\t\t<H1>Threads</H1>\r\n\t\t\t{isLoading ? (\r\n\t\t\t\t<>Loading...</>\r\n\t\t\t) : (\r\n\t\t\t\tthreads?.map(thread => (\r\n\t\t\t\t\t<div className=\"thread\" key={thread.thread_id}>\r\n\t\t\t\t\t\t<Link to={`/discussions/thread/${thread.thread_id}`}>\r\n\t\t\t\t\t\t\t<h2>{thread.topic}</h2>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t<span className=\"date\">\r\n\t\t\t\t\t\t\t{formatRelative(new Date(thread.created_at * 1000), new Date())}{\" \"}\r\n\t\t\t\t\t\t\t{thread.is_edited && \"(edited)\"}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t))\r\n\t\t\t)}\r\n\t\t</DiscussionsStyle>\r\n\t)\r\n}\r\nexport default Discussions\r\n","import { useContext, useRef, useState } from \"react\"\r\nimport styled from \"styled-components\"\r\nimport { AppContext } from \"../../../context/AppContext\"\r\nimport { UserContext } from \"../../../context/UserContext\"\r\nimport { PrimaryBtn } from \"../../styles/ButtonStyles\"\r\nimport { H2 } from \"../../styles/Styles\"\r\n\r\nexport default function Avatar() {\r\n\tconst inputRef = useRef<HTMLInputElement>(null)\r\n\tconst [fileInput, setFileInput] = useState<string>(\"\")\r\n\tconst [previewImg, setPreviewImg] = useState<any>(null)\r\n\tconst [b64Img, setB64Img] = useState<any>(null)\r\n\tconst [message, setMessage] = useState(\"\")\r\n\tconst { avatar_url } = useContext(UserContext).user\r\n\tconst { showModalMessage, client } = useContext(AppContext)\r\n\tconst { setUser } = useContext(UserContext)\r\n\tconst handleFileInput = (e: any) => {\r\n\t\tif (!e.target.files[0]) return\r\n\t\tconst file = e.target.files[0]\r\n\t\tif (file.size / 1024 > 1500) {\r\n\t\t\tsetFileInput(\"\")\r\n\t\t\treturn showModalMessage(\"Image size must not exceed 1.5MB\", false)\r\n\t\t}\r\n\t\tsetMessage(\"\")\r\n\t\tsetFileInput(e.target.value)\r\n\t\tconst reader = new FileReader()\r\n\t\treader.readAsDataURL(file)\r\n\t\treader.onloadend = () => {\r\n\t\t\tsetB64Img(reader.result)\r\n\t\t\tsetPreviewImg(reader.result)\r\n\t\t}\r\n\t\treader.onerror = () => {\r\n\t\t\tshowModalMessage(\"Something went wrong\", false)\r\n\t\t}\r\n\t}\r\n\r\n\tconst handleSubmit = async () => {\r\n\t\tsetMessage(\"Loading...\")\r\n\t\tsetFileInput(\"\")\r\n\t\tif (!b64Img) return showModalMessage(\"Please select an image\", false)\r\n\t\tconst { ok } = await client(\"/user/profile/avatar\", {\r\n\t\t\tmethod: \"PUT\",\r\n\t\t\tbody: { data: b64Img },\r\n\t\t\tshouldShowMessage: \"default\",\r\n\t\t})\r\n\t\tsetMessage(\"\")\r\n\t\tif (ok) {\r\n\t\t\tsetUser()\r\n\t\t}\r\n\t}\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t<H2>Avatar</H2>\r\n\t\t\t<div className=\"avatar\">\r\n\t\t\t\t<InputSquare className=\"image\" onClick={() => inputRef?.current?.click()}>\r\n\t\t\t\t\t<div className=\"line\">\r\n\t\t\t\t\t\t<p>{message ? message : \"Click to choose an image\"}</p>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tref={inputRef}\r\n\t\t\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\t\t\taccept=\"image/*\"\r\n\t\t\t\t\t\t\tdefaultValue={fileInput}\r\n\t\t\t\t\t\t\tonChange={handleFileInput}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</InputSquare>\r\n\t\t\t\t{previewImg ? (\r\n\t\t\t\t\t<img className=\"image\" src={previewImg} />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<img className=\"image\" src={avatar_url} alt=\"\" />\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t\t<PrimaryBtn disabled={!fileInput} onClick={handleSubmit}>\r\n\t\t\t\tSave\r\n\t\t\t</PrimaryBtn>\r\n\t\t</Container>\r\n\t)\r\n}\r\nconst Container = styled.div`\r\n\t.avatar {\r\n\t\tdisplay: flex;\r\n\t\tmargin-bottom: 20px;\r\n\t}\r\n\timg {\r\n\t\tobject-fit: cover;\r\n\t\tmargin-left: 20px;\r\n\t\tborder-radius: 4px;\r\n\t}\r\n\t.image {\r\n\t\twidth: 250px;\r\n\t\theight: 250px;\r\n\t}\r\n\t@media (max-width: 1024px) {\r\n\t\t.image {\r\n\t\t\twidth: 200px;\r\n\t\t\theight: 200px;\r\n\t\t}\r\n\t}\r\n\t@media (max-width: 480px) {\r\n\t\t.image {\r\n\t\t\twidth: 130px;\r\n\t\t\theight: 130px;\r\n\t\t}\r\n\t}\r\n`\r\nconst InputSquare = styled.div`\r\n\tcursor: pointer;\r\n\tborder-radius: 4px;\r\n\tbackground: ${({ theme }) => theme.commentBg};\r\n\tpadding: 20px;\r\n\t.line {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tborder: 2px gray dashed;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tinput {\r\n\t\t\tdisplay: none;\r\n\t\t}\r\n\t\tp {\r\n\t\t\ttext-align: center;\r\n\t\t}\r\n\t}\r\n\t@media (max-width: 480px) {\r\n\t\tpadding: 10px;\r\n\r\n\t\t.line {\r\n\t\t\tp {\r\n\t\t\t\tfont-size: 0.9rem;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`\r\n","import { useContext, useState } from \"react\"\r\nimport styled from \"styled-components\"\r\nimport { AppContext } from \"../../../context/AppContext\"\r\nimport { UserContext } from \"../../../context/UserContext\"\r\nimport { PrimaryBtn, SecondaryBtn } from \"../../styles/ButtonStyles\"\r\nimport { H2 } from \"../../styles/Styles\"\r\ninterface Edit {\r\n\tisOpen: boolean\r\n\ttype: \"none\" | \"username\" | \"email\"\r\n}\r\nexport default function Credentials() {\r\n\tconst { user, setUser } = useContext(UserContext)\r\n\tconst { showModal, client } = useContext(AppContext)\r\n\tconst [edit, setEdit] = useState<Edit>({ isOpen: false, type: \"none\" })\r\n\tconst [newUsername, setNewUsername] = useState({ text: \"\", isPending: false })\r\n\tconst [newEmail, setNewEmail] = useState({ text: \"\", isPending: false })\r\n\r\n\tconst handleSubmitUsername = async () => {\r\n\t\tsetNewUsername(prev => ({ ...prev, isPending: true }))\r\n\t\tconst { ok } = await client(\"/user/update/username\", {\r\n\t\t\tmethod: \"PUT\",\r\n\t\t\tshouldShowMessage: \"default\",\r\n\t\t\tbody: { newUsername: newUsername.text.trim() },\r\n\t\t})\r\n\t\tsetNewUsername(prev => ({ ...prev, isPending: false }))\r\n\t\tif (ok) {\r\n\t\t\tsetUser()\r\n\t\t}\r\n\t}\r\n\tconst handleSubmitEmail = async () => {\r\n\t\tsetNewEmail(prev => ({ ...prev, isPending: true }))\r\n\t\tconst { ok } = await client(\"/user/update/email\", {\r\n\t\t\tmethod: \"PUT\",\r\n\t\t\tshouldShowMessage: \"default\",\r\n\t\t\tbody: { newEmail: newEmail.text.trim() },\r\n\t\t})\r\n\t\tsetNewEmail(prev => ({ ...prev, isPending: false }))\r\n\t\tif (ok) {\r\n\t\t\tsetUser()\r\n\t\t}\r\n\t}\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t<div className=\"username\">\r\n\t\t\t\t<div className=\"top\">\r\n\t\t\t\t\t<H2>Username</H2>\r\n\t\t\t\t\t{edit.isOpen && edit.type === \"username\" ? (\r\n\t\t\t\t\t\t<div className=\"buttons\">\r\n\t\t\t\t\t\t\t<SecondaryBtn\r\n\t\t\t\t\t\t\t\tisLoading={newUsername.isPending}\r\n\t\t\t\t\t\t\t\tdisabled={newUsername.isPending}\r\n\t\t\t\t\t\t\t\tonClick={() => setEdit({ isOpen: false, type: \"none\" })}>\r\n\t\t\t\t\t\t\t\tCancel\r\n\t\t\t\t\t\t\t</SecondaryBtn>\r\n\t\t\t\t\t\t\t<PrimaryBtn\r\n\t\t\t\t\t\t\t\tisLoading={newUsername.isPending}\r\n\t\t\t\t\t\t\t\tdisabled={newUsername.isPending}\r\n\t\t\t\t\t\t\t\tonClick={handleSubmitUsername}>\r\n\t\t\t\t\t\t\t\tSubmit\r\n\t\t\t\t\t\t\t</PrimaryBtn>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<SecondaryBtn size=\"medium\" onClick={() => setEdit({ isOpen: true, type: \"username\" })}>\r\n\t\t\t\t\t\t\tChange\r\n\t\t\t\t\t\t</SecondaryBtn>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t\t{edit.isOpen && edit.type === \"username\" ? (\r\n\t\t\t\t\t<Input\r\n\t\t\t\t\t\tdisabled={newEmail.isPending}\r\n\t\t\t\t\t\tvalue={newUsername.text}\r\n\t\t\t\t\t\tonChange={e => setNewUsername({ text: e.target.value, isPending: false })}\r\n\t\t\t\t\t\tplaceholder=\"New username...\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<div className=\"data\">{user.username}</div>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"email\">\r\n\t\t\t\t<div className=\"top\">\r\n\t\t\t\t\t<H2>Email</H2>\r\n\t\t\t\t\t{edit.isOpen && edit.type === \"email\" ? (\r\n\t\t\t\t\t\t<div className=\"buttons\">\r\n\t\t\t\t\t\t\t<SecondaryBtn\r\n\t\t\t\t\t\t\t\tisLoading={newEmail.isPending}\r\n\t\t\t\t\t\t\t\tdisabled={newEmail.isPending}\r\n\t\t\t\t\t\t\t\tonClick={() => setEdit({ isOpen: false, type: \"none\" })}>\r\n\t\t\t\t\t\t\t\tCancel\r\n\t\t\t\t\t\t\t</SecondaryBtn>\r\n\t\t\t\t\t\t\t<PrimaryBtn\r\n\t\t\t\t\t\t\t\tisLoading={newEmail.isPending}\r\n\t\t\t\t\t\t\t\tdisabled={newEmail.isPending}\r\n\t\t\t\t\t\t\t\tonClick={handleSubmitEmail}>\r\n\t\t\t\t\t\t\t\tSubmit\r\n\t\t\t\t\t\t\t</PrimaryBtn>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<SecondaryBtn size=\"medium\" onClick={() => setEdit({ isOpen: true, type: \"email\" })}>\r\n\t\t\t\t\t\t\tChange\r\n\t\t\t\t\t\t</SecondaryBtn>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t\t{edit.isOpen && edit.type === \"email\" ? (\r\n\t\t\t\t\t<Input\r\n\t\t\t\t\t\tdisabled={newEmail.isPending}\r\n\t\t\t\t\t\tvalue={newEmail.text}\r\n\t\t\t\t\t\tonChange={e => setNewEmail({ text: e.target.value, isPending: false })}\r\n\t\t\t\t\t\tplaceholder=\"New email...\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<div className=\"data\">{user.email}</div>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"password\">\r\n\t\t\t\t<div className=\"top\">\r\n\t\t\t\t\t<H2>Password</H2>\r\n\t\t\t\t\t<SecondaryBtn size=\"medium\" onClick={() => showModal(\"CHANGE_PASSWORD\", null)}>\r\n\t\t\t\t\t\tChange\r\n\t\t\t\t\t</SecondaryBtn>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"data\">********</div>\r\n\t\t\t</div>\r\n\t\t</Container>\r\n\t)\r\n}\r\n\r\nconst Container = styled.div`\r\n\t.top {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\tmargin-top: 40px;\r\n\t}\r\n\t.data {\r\n\t\tborder-radius: 4px;\r\n\t\tpadding: 10px;\r\n\t\tmargin: 10px 0;\r\n\t\tcolor: ${({ theme }) => theme.text};\r\n\t\tbackground: ${({ theme }) => theme.commentBg};\r\n\t}\r\n\t.buttons {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tbutton {\r\n\t\t\tmargin-left: 10px;\r\n\t\t}\r\n\t}\r\n`\r\nconst Input = styled.input`\r\n\tdisplay: block;\r\n\tmin-width: 300px;\r\n\twidth: 100%;\r\n\theight: 30px;\r\n\tmargin: 25px 0;\r\n\tpadding: 0 5px;\r\n\tposition: relative;\r\n\tborder: none;\r\n\tborder-radius: 4px;\r\n\tfont-size: 1.1rem;\r\n\tbox-shadow: 0px 0px 5px rgb(0 0 0 / 5%);\r\n\tbackground-color: white;\r\n\t@media (max-width: 640px) {\r\n\t\tfont-size: 0.95rem;\r\n\t}\r\n`\r\n","import styled from \"styled-components\"\r\nimport { H1 } from \"../../styles/Styles\"\r\nimport Avatar from \"./Avatar\"\r\nimport Credentials from \"./Credentials\"\r\n\r\nexport default function Settings() {\r\n\treturn (\r\n\t\t<SettingsContainer>\r\n\t\t\t<H1>Settings</H1>\r\n\t\t\t<div>\r\n\t\t\t\t<Avatar />\r\n\t\t\t\t<Credentials />\r\n\t\t\t</div>\r\n\t\t</SettingsContainer>\r\n\t)\r\n}\r\n\r\nconst SettingsContainer = styled.div`\r\n\twidth: 100%;\r\n`\r\n","import { FC, useContext, useEffect, useState } from \"react\"\r\nimport { Link } from \"react-router-dom\"\r\nimport styled from \"styled-components\"\r\nimport { AppContext } from \"../../context/AppContext\"\r\nimport { H1, H2 } from \"../styles/Styles\"\r\n\r\n// const UserCard = styled.div``\r\ninterface Relation {\r\n\tfollowing: {\r\n\t\tusername: string\r\n\t\tavatar: string\r\n\t}[]\r\n\tfollowers: {\r\n\t\tusername: string\r\n\t\tavatar: string\r\n\t}[]\r\n}\r\nconst Social: FC = () => {\r\n\tconst [relation, setRelation] = useState<Relation | null>(null)\r\n\tconst { client } = useContext(AppContext)\r\n\r\n\tconst getRelation = async () => {\r\n\t\tconst { ok, data } = await client(`/user/follow`)\r\n\t\tif (ok) {\r\n\t\t\tsetRelation(data)\r\n\t\t\tconsole.log(data)\r\n\t\t}\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tgetRelation()\r\n\t}, [])\r\n\r\n\treturn (\r\n\t\t<SocialEl>\r\n\t\t\t<H1>Social</H1>\r\n\t\t\t<H2>Following</H2>\r\n\t\t\t<div className=\"list\">\r\n\t\t\t\t{relation?.following?.map(following => (\r\n\t\t\t\t\t<Link key={following.username} className=\"user-link\" to={`/user/${following.username}`}>\r\n\t\t\t\t\t\t<img src={following.avatar} alt=\"\" />\r\n\t\t\t\t\t\t<p>{following.username}</p>\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\r\n\t\t\t<H2>Followers</H2>\r\n\t\t\t<div className=\"list\">\r\n\t\t\t\t{relation?.followers.map(follower => (\r\n\t\t\t\t\t<Link key={follower.username} className=\"user-link\" to={`/user/${follower.username}`}>\r\n\t\t\t\t\t\t<img src={follower.avatar} alt=\"\" />\r\n\t\t\t\t\t\t<p>{follower.username}</p>\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t</SocialEl>\r\n\t)\r\n}\r\nexport default Social\r\n\r\nconst SocialEl = styled.div`\r\n\t.list {\r\n\t\tdisplay: flex;\r\n\t}\r\n\t.user-link {\r\n\t\twidth: 100px;\r\n\t\tmargin-right: 10px;\r\n\t\tdisplay: block;\r\n\t\timg {\r\n\t\t\twidth: 100%;\r\n\t\t\tborder-radius: 10px;\r\n\t\t\taspect-ratio: 1 / 1;\r\n\t\t\tobject-fit: cover;\r\n\t\t}\r\n\t}\r\n`\r\n","import { useContext, useEffect } from \"react\"\r\nimport { useParams, useHistory } from \"react-router-dom\"\r\nimport styled from \"styled-components\"\r\nimport Favorites from \"../components/Account/Favorites\"\r\nimport Sidebar from \"../components/Account/Sidebar\"\r\nimport Profile from \"../components/Account/Profile\"\r\nimport Comments from \"../components/Account/Comments\"\r\nimport Discussions from \"../components/Account/Discussions\"\r\nimport Settings from \"../components/Account/Settings/Settings\"\r\nimport Social from \"../components/Account/Social\"\r\nimport { UserContext } from \"../context/UserContext\"\r\nimport LoadingSpinner from \"../components/LoadingSpinner\"\r\n\r\nexport default function User() {\r\n\tconst { category } = useParams<{ category: string }>()\r\n\tconst history = useHistory()\r\n\tconst { isLoading, isLoggedIn } = useContext(UserContext).user\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!isLoggedIn && !isLoading) {\r\n\t\t\thistory.push(\"/login\")\r\n\t\t}\r\n\t}, [isLoggedIn, isLoading])\r\n\tif (isLoading) return <LoadingSpinner />\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t<div className=\"flex\">\r\n\t\t\t\t<Sidebar category={category} />\r\n\t\t\t\t{category === \"profile\" && <Profile />}\r\n\t\t\t\t{category === \"favorites\" && <Favorites />}\r\n\t\t\t\t{category === \"comments\" && <Comments />}\r\n\t\t\t\t{category === \"discussions\" && <Discussions />}\r\n\t\t\t\t{category === \"settings\" && <Settings />}\r\n\t\t\t\t{category === \"social\" && <Social />}\r\n\t\t\t</div>\r\n\t\t</Container>\r\n\t)\r\n}\r\n\r\nconst Container = styled.div`\r\n\tmax-width: 1200px;\r\n\tpadding: 0 50px;\r\n\tmargin: 50px auto;\r\n\t.flex {\r\n\t\tdisplay: flex;\r\n\t}\r\n\timg.avatar {\r\n\t\twidth: 100px;\r\n\t}\r\n\t.preview-img {\r\n\t\theight: 200px;\r\n\t}\r\n\th1 {\r\n\t\tmargin-bottom: 20px;\r\n\t}\r\n\th2 {\r\n\t\tmargin-bottom: 15px;\r\n\t}\r\n\t@media (max-width: 768px) {\r\n\t\tpadding: 0 20px;\r\n\t\tmargin: 20px auto;\r\n\t\t.flex {\r\n\t\t\tdisplay: block;\r\n\t\t}\r\n\t}\r\n`\r\n","export interface Theme {\r\n\ttheme: \"light\" | \"dark\"\r\n\tbody: string\r\n\theader: string\r\n\ttext: string\r\n\tscrollbar: string\r\n\tboxShadow: string\r\n\tcommentBg: string\r\n}\r\nexport const lightTheme: Theme = {\r\n\ttheme: \"light\",\r\n\tbody: \"#edf1f5\",\r\n\theader: \"#3f4453\",\r\n\ttext: \"#4c5264\",\r\n\tscrollbar: \"#e4e4e4\",\r\n\tboxShadow: \"0px 0px 5px rgba(0, 0, 0, 0.05)\",\r\n\tcommentBg: \"white\",\r\n}\r\n\r\nexport const darkTheme: Theme = {\r\n\ttheme: \"dark\",\r\n\tbody: \"#161e29\",\r\n\theader: \"#f5f5f5\",\r\n\ttext: \"#d3d3d3\",\r\n\tscrollbar: \"darkgrey\",\r\n\tboxShadow: \"0px 0px 10px 3px rgba(255, 255, 255, 0.3)\",\r\n\tcommentBg: \"#32343b\",\r\n}\r\n","import styled from \"styled-components\"\r\n\r\nconst FooterEl = styled.footer`\r\n\tbackground-color: #32343b;\r\n\t/* position: absolute; */\r\n\t/* bottom: 0; */\r\n\t/* left: 0; */\r\n\t/* right: 0; */\r\n\t.footer-container {\r\n\t\twidth: 100%;\r\n\t\tmax-width: 1200px;\r\n\t\tmargin: 0 auto;\r\n\t\tpadding: 10px 50px;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\t.logo {\r\n\t\t\tcolor: rgb(255, 255, 255);\r\n\t\t\tfont-size: 2rem;\r\n\t\t\tfont-weight: 600;\r\n\t\t\twidth: 230px;\r\n\t\t\tfilter: invert(0.2);\r\n\t\t\t&::after {\r\n\t\t\t\tcontent: \"Find\";\r\n\t\t\t\tcolor: #70c7a7;\r\n\t\t\t}\r\n\t\t}\r\n\t\tspan {\r\n\t\t\tcolor: #eeeeee;\r\n\t\t\tfont-size: 0.85rem;\r\n\t\t\tsmall {\r\n\t\t\t\tcolor: rgb(207, 83, 83);\r\n\t\t\t}\r\n\t\t}\r\n\t\tp {\r\n\t\t\tcolor: #eeeeee;\r\n\t\t\tfont-size: 0.85rem;\r\n\t\t\twidth: 230px;\r\n\t\t}\r\n\t}\r\n\r\n\t@media screen and (max-width: 768px) {\r\n\t\t.footer-container {\r\n\t\t\tpadding: 10px 0;\r\n\t\t\tflex-direction: column;\r\n\t\t\t.logo,\r\n\t\t\tp {\r\n\t\t\t\twidth: max-content;\r\n\t\t\t\tmargin: 10px 0;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t@media screen and (max-width: 480px) {\r\n\t\t.footer-container {\r\n\t\t\t.logo {\r\n\t\t\t\tfont-size: 2rem;\r\n\t\t\t\tmargin: 5px 0;\r\n\t\t\t}\r\n\t\t\tp {\r\n\t\t\t\tmargin: 5px 0;\r\n\t\t\t}\r\n\t\t\tspan,\r\n\t\t\tp {\r\n\t\t\t\tfont-size: 0.9rem;\r\n\t\t\t\tfont-weight: 400;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`\r\nexport default function Footer() {\r\n\treturn (\r\n\t\t<FooterEl>\r\n\t\t\t<div className=\"footer-container\">\r\n\t\t\t\t<div className=\"logo\">Ani</div>\r\n\t\t\t\t<span>\r\n\t\t\t\t\tCreated with <small>❤</small> by Sultan\r\n\t\t\t\t</span>\r\n\t\t\t\t<p>\r\n\t\t\t\t\tEmail:\r\n\t\t\t\t\t<a href=\"mailto:turan.sultann@gmail.com\">turan.sultann@gmail.com</a>\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t</FooterEl>\r\n\t)\r\n}\r\n","import { createRef, FC, RefObject, useContext, useEffect } from \"react\"\r\nimport { createPortal } from \"react-dom\"\r\nimport styled from \"styled-components\"\r\nimport { CSSTransition } from \"react-transition-group\"\r\nimport { AppContext } from \"../../context/AppContext\"\r\n\r\nconst ModalMessage: FC = () => {\r\n\tconst { modalMessage, showModalMessage, hideModalMessage } = useContext(AppContext)\r\n\tconst { text, isSuccess } = modalMessage\r\n\tconst ref = createRef<HTMLDivElement>()\r\n\r\n\tuseEffect(() => {\r\n\t\tif (text) {\r\n\t\t\tconst close = setTimeout(() => {\r\n\t\t\t\thideModalMessage()\r\n\t\t\t}, 3000)\r\n\t\t\treturn () => clearTimeout(close)\r\n\t\t}\r\n\t}, [text])\r\n\r\n\treturn createPortal(\r\n\t\t<CSSTransition\r\n\t\t\tnodeRef={ref}\r\n\t\t\tin={text ? true : false}\r\n\t\t\ttimeout={200}\r\n\t\t\tclassNames=\"message\"\r\n\t\t\tunmountOnExit>\r\n\t\t\t<Container isSuccess={isSuccess} ref={ref}>\r\n\t\t\t\t<p>{text}</p>\r\n\t\t\t\t<span onClick={hideModalMessage}>&#10006;</span>\r\n\t\t\t</Container>\r\n\t\t</CSSTransition>,\r\n\t\tdocument.querySelector(\"#root\")!\r\n\t)\r\n}\r\nexport default ModalMessage\r\n\r\nconst Container = styled.div<{ isSuccess: boolean }>`\r\n\tposition: fixed;\r\n\ttop: 0px;\r\n\tleft: 50%;\r\n\ttransform: translate(-50%, 50px);\r\n\tbackground: ${({ isSuccess }) => (isSuccess ? \"#c3f1c7\" : \"#e4c4c4\")};\r\n\tpadding: 10px;\r\n\tborder-radius: 4px;\r\n\theight: max-content;\r\n\twidth: 400px;\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n\talign-items: center;\r\n\tz-index: 2;\r\n\tp {\r\n\t\tcolor: ${({ isSuccess }) => (isSuccess ? \"#00915c\" : \"#C2185B\")};\r\n\t\tmargin-right: 10px;\r\n\t}\r\n\tspan {\r\n\t\tfont-size: 1.2rem;\r\n\t\tcursor: pointer;\r\n\t\tcolor: #303030;\r\n\t}\r\n\t&.message-enter {\r\n\t\ttransform: translate(-50%, 0px);\r\n\t\ttransition: 200ms;\r\n\t\topacity: 0;\r\n\t}\r\n\t&.message-enter-active {\r\n\t\ttransform: translate(-50%, 50px);\r\n\t\ttransition: 200ms;\r\n\t\topacity: 1;\r\n\t}\r\n\t&.message-exit {\r\n\t\ttransform: translate(-50%, 50px);\r\n\t\ttransition: 200ms;\r\n\t}\r\n\t&.message-exit-active {\r\n\t\ttransform: translate(-50%, 0px);\r\n\t\ttransition: 200ms;\r\n\t\topacity: 0;\r\n\t}\r\n\t@media (max-width: 480px) {\r\n\t\twidth: calc(100% - 40px);\r\n\t\tp {\r\n\t\t\tfont-size: 0.9rem;\r\n\t\t}\r\n\t}\r\n`\r\n","import { FC, useContext, useState } from \"react\"\r\nimport { PrimaryBtn, SecondaryBtn } from \"../styles/ButtonStyles\"\r\nimport styled, { css } from \"styled-components\"\r\nimport { AppContext } from \"../../context/AppContext\"\r\nimport { UserContext } from \"../../context/UserContext\"\r\nimport { useHistory } from \"react-router\"\r\nimport { H2 } from \"../styles/Styles\"\r\n\r\n// const PrimaryBtnStyle = css`\r\n// \tpadding: 5px;\r\n// `.toString()\r\n// export const ChangeUsernameModal: FC = () => {\r\n// \tconst [newUsername, setNewUsername] = useState(\"\")\r\n// \tconst [isLoading, setIsLoading] = useState(false)\r\n// \tconst { hideModal, client } = useContext(AppContext)\r\n// \tconst { changeUserData } = useContext(UserContext)\r\n\r\n// \tconst handleSubmit = async () => {\r\n// \t\tsetIsLoading(true)\r\n// \t\tconst { ok } = await client(\"/user/update/username\", {\r\n// \t\t\tmethod: \"PUT\",\r\n// \t\t\tbody: {\r\n// \t\t\t\tdata: newUsername,\r\n// \t\t\t},\r\n// \t\t\tshouldShowMessage: \"default\",\r\n// \t\t})\r\n\r\n// \t\tif (ok) {\r\n// \t\t\tchangeUserData(\"username\", newUsername)\r\n// \t\t}\r\n// \t\tsetIsLoading(false)\r\n// \t}\r\n// \treturn (\r\n// \t\t<>\r\n// \t\t\t<H2>Change username</H2>\r\n// \t\t\t<Input\r\n// \t\t\t\ttype=\"text\"\r\n// \t\t\t\tvalue={newUsername}\r\n// \t\t\t\tonChange={e => setNewUsername(e.target.value)}\r\n// \t\t\t\tplaceholder=\"New username\"\r\n// \t\t\t/>\r\n// \t\t\t<div className=\"buttons\">\r\n// \t\t\t\t<SecondaryBtn className=\"cancel\" onClick={() => hideModal()} disabled={isLoading}>\r\n// \t\t\t\t\tCancel\r\n// \t\t\t\t</SecondaryBtn>\r\n// \t\t\t\t<PrimaryBtn onClick={handleSubmit} disabled={isLoading} isLoading={isLoading}>\r\n// \t\t\t\t\tSubmit\r\n// \t\t\t\t</PrimaryBtn>\r\n// \t\t\t</div>\r\n// \t\t</>\r\n// \t)\r\n// }\r\n// export const ChangeEmailModal = () => {\r\n// \tconst [newEmail, setNewEmail] = useState(\"\")\r\n// \tconst [isLoading, setIsLoading] = useState(false)\r\n// \tconst { hideModal, client } = useContext(AppContext)\r\n// \tconst { changeUserData } = useContext(UserContext)\r\n\r\n// \tconst handleSubmit = async () => {\r\n// \t\tsetIsLoading(true)\r\n// \t\tconst { ok } = await client(\"/user/update/email\", {\r\n// \t\t\tmethod: \"PUT\",\r\n// \t\t\tbody: {\r\n// \t\t\t\tdata: newEmail,\r\n// \t\t\t},\r\n// \t\t\tshouldShowMessage: \"default\",\r\n// \t\t})\r\n\r\n// \t\tif (ok) {\r\n// \t\t\tchangeUserData(\"username\", newEmail)\r\n// \t\t}\r\n// \t\tsetIsLoading(false)\r\n// \t}\r\n\r\n// \treturn (\r\n// \t\t<>\r\n// \t\t\t<H2>Change email</H2>\r\n// \t\t\t<Input\r\n// \t\t\t\ttype=\"text\"\r\n// \t\t\t\tvalue={newEmail}\r\n// \t\t\t\tonChange={e => setNewEmail(e.target.value)}\r\n// \t\t\t\tplaceholder=\"New email\"\r\n// \t\t\t/>\r\n// \t\t\t<div className=\"buttons\">\r\n// \t\t\t\t<SecondaryBtn className=\"cancel\" onClick={() => hideModal()} disabled={isLoading}>\r\n// \t\t\t\t\tCancel\r\n// \t\t\t\t</SecondaryBtn>\r\n// \t\t\t\t<PrimaryBtn onClick={handleSubmit} disabled={isLoading} isLoading={isLoading}>\r\n// \t\t\t\t\tSubmit\r\n// \t\t\t\t</PrimaryBtn>\r\n// \t\t\t</div>\r\n// \t\t</>\r\n// \t)\r\n// }\r\nexport const ChangePasswordModal = () => {\r\n\tconst { hideModal, client, showModalMessage } = useContext(AppContext)\r\n\tconst [isLoading, setIsLoading] = useState(false)\r\n\tconst [oldPassword, setOldPassword] = useState(\"\")\r\n\tconst [newPassword, setNewPassword] = useState(\"\")\r\n\tconst [newPassword2, setNewPassword2] = useState(\"\")\r\n\r\n\tconst handleSubmit = async () => {\r\n\t\tsetIsLoading(true)\r\n\t\tif (newPassword !== newPassword2) {\r\n\t\t\tsetIsLoading(false)\r\n\r\n\t\t\treturn showModalMessage(`Passwords don't match`, false)\r\n\t\t}\r\n\r\n\t\tconst { ok } = await client(\"/user/update/password\", {\r\n\t\t\tmethod: \"PUT\",\r\n\t\t\tbody: {\r\n\t\t\t\toldPassword,\r\n\t\t\t\tnewPassword,\r\n\t\t\t},\r\n\t\t\tshouldShowMessage: \"default\",\r\n\t\t})\r\n\t\tif (ok) {\r\n\t\t\thideModal()\r\n\t\t}\r\n\t\tsetIsLoading(false)\r\n\t}\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<H2>Change password</H2>\r\n\t\t\t<Input\r\n\t\t\t\ttype=\"password\"\r\n\t\t\t\tvalue={oldPassword}\r\n\t\t\t\tonChange={e => setOldPassword(e.target.value)}\r\n\t\t\t\tplaceholder=\"Current password\"\r\n\t\t\t/>\r\n\t\t\t<Input\r\n\t\t\t\ttype=\"password\"\r\n\t\t\t\tvalue={newPassword}\r\n\t\t\t\tonChange={e => setNewPassword(e.target.value)}\r\n\t\t\t\tplaceholder=\"New password\"\r\n\t\t\t/>\r\n\t\t\t<Input\r\n\t\t\t\ttype=\"password\"\r\n\t\t\t\tvalue={newPassword2}\r\n\t\t\t\tonChange={e => setNewPassword2(e.target.value)}\r\n\t\t\t\tplaceholder=\"Confirm new password\"\r\n\t\t\t/>\r\n\t\t\t<div className=\"buttons\">\r\n\t\t\t\t<SecondaryBtn className=\"cancel\" onClick={() => hideModal()} disabled={isLoading}>\r\n\t\t\t\t\tCancel\r\n\t\t\t\t</SecondaryBtn>\r\n\t\t\t\t<PrimaryBtn onClick={handleSubmit} disabled={isLoading} isLoading={isLoading}>\r\n\t\t\t\t\tSubmit\r\n\t\t\t\t</PrimaryBtn>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t)\r\n}\r\nexport const DeleteCommentModal = () => {\r\n\tconst [isLoading, setIsLoading] = useState(false)\r\n\tconst { hideModal, modal, client } = useContext(AppContext)\r\n\tconst { comment, getComments, type } = modal.props\r\n\r\n\tconst handleDelete = async () => {\r\n\t\tsetIsLoading(true)\r\n\t\tconst { ok } = await client(`/comments/${type}/${comment.comment_id}`, {\r\n\t\t\tmethod: \"DELETE\",\r\n\t\t\tshouldShowMessage: \"default\",\r\n\t\t})\r\n\t\tif (ok) {\r\n\t\t\tawait getComments()\r\n\t\t}\r\n\r\n\t\tsetIsLoading(false)\r\n\t\thideModal()\r\n\t}\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<H2>Delete comment</H2>\r\n\t\t\t<p>\r\n\t\t\t\tAre you sure you want to delete the comment? <br />\r\n\t\t\t\t<span>{comment.text}</span>\r\n\t\t\t</p>\r\n\t\t\t<div className=\"buttons\">\r\n\t\t\t\t<SecondaryBtn onClick={hideModal} className=\"cancel\" disabled={isLoading}>\r\n\t\t\t\t\tCancel\r\n\t\t\t\t</SecondaryBtn>\r\n\t\t\t\t<PrimaryBtn onClick={handleDelete} disabled={isLoading} isLoading={isLoading}>\r\n\t\t\t\t\tDelete\r\n\t\t\t\t</PrimaryBtn>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport const DeleteThreadModal = () => {\r\n\tconst { hideModal, modal, client } = useContext(AppContext)\r\n\r\n\tconst { thread, getThread } = modal.props\r\n\tconst [isLoading, setIsLoading] = useState(false)\r\n\r\n\tconst handleDelete = async () => {\r\n\t\tsetIsLoading(true)\r\n\t\tconst { ok } = await client(`/discussion/thread/${thread.thread_id}`, {\r\n\t\t\tmethod: \"DELETE\",\r\n\t\t\tshouldShowMessage: \"default\",\r\n\t\t})\r\n\t\tif (ok) {\r\n\t\t\tgetThread()\r\n\t\t\thideModal()\r\n\t\t}\r\n\r\n\t\tsetIsLoading(false)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<H2>Delete thread</H2>\r\n\t\t\t<p>\r\n\t\t\t\tAre you sure you want to delete the thread? <br />\r\n\t\t\t\t<span>{thread.topic}</span>\r\n\t\t\t</p>\r\n\t\t\t<div className=\"buttons\">\r\n\t\t\t\t<SecondaryBtn onClick={hideModal} className=\"cancel\" disabled={isLoading}>\r\n\t\t\t\t\tCancel\r\n\t\t\t\t</SecondaryBtn>\r\n\t\t\t\t<PrimaryBtn onClick={handleDelete} disabled={isLoading} isLoading={isLoading}>\r\n\t\t\t\t\tDelete\r\n\t\t\t\t</PrimaryBtn>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t)\r\n}\r\nexport const DeletePostModal = () => {\r\n\tconst { hideModal, modal, client } = useContext(AppContext)\r\n\r\n\tconst [isLoading, setIsLoading] = useState(false)\r\n\r\n\tconst { post, getPosts } = modal.props\r\n\r\n\tconst handleDeletePost = async () => {\r\n\t\tsetIsLoading(true)\r\n\t\tconst { ok } = await client(`/discussion/post/${post.post_id}`, {\r\n\t\t\tmethod: \"DELETE\",\r\n\t\t\tshouldShowMessage: \"default\",\r\n\t\t})\r\n\t\tif (ok) {\r\n\t\t\tgetPosts()\r\n\t\t}\r\n\r\n\t\tsetIsLoading(false)\r\n\t\thideModal()\r\n\t}\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<H2>Delete post</H2>\r\n\t\t\t<p>\r\n\t\t\t\tAre you sure you want to delete this post? <br />\r\n\t\t\t\t<span>{post.body}</span>\r\n\t\t\t</p>\r\n\t\t\t<div className=\"buttons\">\r\n\t\t\t\t<SecondaryBtn onClick={() => hideModal()} className=\"cancel\" disabled={isLoading}>\r\n\t\t\t\t\tCancel\r\n\t\t\t\t</SecondaryBtn>\r\n\t\t\t\t<PrimaryBtn onClick={handleDeletePost} disabled={isLoading} isLoading={isLoading}>\r\n\t\t\t\t\tDelete\r\n\t\t\t\t</PrimaryBtn>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t)\r\n}\r\nexport const OpenThreadModal: FC = () => {\r\n\tconst [topic, setTopic] = useState(\"\")\r\n\tconst [body, setBody] = useState(\"\")\r\n\tconst [isLoading, setIsLoading] = useState(false)\r\n\tconst { client } = useContext(AppContext)\r\n\tconst history = useHistory()\r\n\tconst { hideModal } = useContext(AppContext)\r\n\tconst handleSubmit = async () => {\r\n\t\tsetIsLoading(true)\r\n\t\tconst { data, ok } = await client(\"/discussion/thread/\", {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tbody: { topic, body },\r\n\t\t\tshouldShowMessage: \"error\",\r\n\t\t})\r\n\t\tif (ok) {\r\n\t\t\thideModal()\r\n\t\t\thistory.push(`/discussions/thread/${data.thread_id}`)\r\n\t\t}\r\n\r\n\t\tsetIsLoading(false)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<H2>Open a Thread</H2>\r\n\t\t\t<Input\r\n\t\t\t\ttype=\"text\"\r\n\t\t\t\tplaceholder=\"Thread Topic\"\r\n\t\t\t\tdefaultValue={topic}\r\n\t\t\t\tonChange={e => setTopic(e.target.value)}\r\n\t\t\t\tdisabled={isLoading}\r\n\t\t\t/>\r\n\t\t\t<Textarea\r\n\t\t\t\tplaceholder=\"What to you want to discuss?\"\r\n\t\t\t\tdefaultValue={body}\r\n\t\t\t\tdisabled={isLoading}\r\n\t\t\t\tonChange={e => setBody(e.target.value)}></Textarea>\r\n\t\t\t<div className=\"buttons\">\r\n\t\t\t\t<SecondaryBtn onClick={hideModal} className=\"cancel\" disabled={isLoading}>\r\n\t\t\t\t\tCancel\r\n\t\t\t\t</SecondaryBtn>\r\n\t\t\t\t<PrimaryBtn onClick={handleSubmit} disabled={isLoading}>\r\n\t\t\t\t\tCreate a thread\r\n\t\t\t\t</PrimaryBtn>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nconst Input = styled.input`\r\n\tdisplay: block;\r\n\tmin-width: 300px;\r\n\twidth: 100%;\r\n\theight: 30px;\r\n\tmargin: 25px 0;\r\n\tpadding: 0 5px;\r\n\tposition: relative;\r\n\tborder: none;\r\n\tborder-radius: 4px;\r\n\tfont-size: 1.1rem;\r\n\tbox-shadow: 0px 0px 5px rgb(0 0 0 / 5%);\r\n\tbackground-color: white;\r\n\t@media (max-width: 640px) {\r\n\t\tfont-size: 0.95rem;\r\n\t}\r\n`\r\nconst Textarea = styled.textarea`\r\n\tmargin: 5px 0;\r\n\tpadding: 5px;\r\n\twidth: 600px;\r\n\theight: 300px;\r\n\tfont-size: 1rem;\r\n\tborder-radius: 4px;\r\n\tborder: none;\r\n\t@media (max-width: 640px) {\r\n\t\tfont-size: 0.9rem;\r\n\t}\r\n`\r\n","import { FC, useContext } from \"react\"\r\nimport ReactDom from \"react-dom\"\r\nimport styled from \"styled-components\"\r\nimport { AppContext } from \"../../context/AppContext\"\r\nimport {\r\n\t// ChangeEmailModal,\r\n\tChangePasswordModal,\r\n\t// ChangeUsernameModal,\r\n\tOpenThreadModal,\r\n\tDeleteThreadModal,\r\n\tDeletePostModal,\r\n\tDeleteCommentModal,\r\n\t// DeletePostModal,\r\n} from \"./Modals\"\r\n\r\nconst MODAL_COMPONENTS = {\r\n\t// CHANGE_USERNAME: ChangeUsernameModal,\r\n\t// CHANGE_EMAIL: ChangeEmailModal,\r\n\tCHANGE_PASSWORD: ChangePasswordModal,\r\n\tOPEN_THREAD: OpenThreadModal,\r\n\tDEFAULT: () => null,\r\n\tDELETE_THREAD: DeleteThreadModal,\r\n\tDELETE_POST: DeletePostModal,\r\n\tDELETE_COMMENT: DeleteCommentModal,\r\n}\r\nexport default function RootModal() {\r\n\tconst { isOpen, type } = useContext(AppContext).modal\r\n\tif (!isOpen) return null\r\n\tconst CurrentModal: FC = MODAL_COMPONENTS[type] || null\r\n\r\n\treturn ReactDom.createPortal(\r\n\t\t<ModalContainer>\r\n\t\t\t<div className=\"container\">\r\n\t\t\t\t<div className=\"content\">\r\n\t\t\t\t\t<CurrentModal />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</ModalContainer>,\r\n\t\tdocument.querySelector(\".App\")!\r\n\t)\r\n}\r\n\r\nconst ModalContainer = styled.div`\r\n\tposition: fixed;\r\n\tbackground: rgba(0, 0, 0, 0.5);\r\n\ttop: 0;\r\n\tbottom: 0;\r\n\tleft: 0;\r\n\tright: 0;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\r\n\t.container {\r\n\t\twidth: max-content;\r\n\t\tbackground: ${({ theme }) => theme.body};\r\n\t\tpadding: 25px;\r\n\t\tborder-radius: 4px;\r\n\t\th2,\r\n\t\tp {\r\n\t\t\tmargin-bottom: 10px;\r\n\t\t}\r\n\t}\r\n\t.buttons {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t}\r\n\t@media (max-width: 768px) {\r\n\t\t.container {\r\n\t\t\twidth: calc(100% - 40px);\r\n\t\t\ttextarea {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\tfont-size: 0.95rem;\r\n\t\t\t}\r\n\t\t\tinput {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`\r\n","const query = `\r\nquery($id: Int){\r\n  Character(id: $id) {\r\n    id\r\n    name {\r\n      first\r\n      last\r\n      full\r\n      native\r\n      alternative\r\n    }\r\n    description\r\n    image {\r\n      large\r\n    }\r\n\t\t media(type: ANIME) {\r\n      edges {\r\n        node {\r\n\t\t\t\t\tid\r\n          type\r\n          title {\r\n            romaji\r\n            english\r\n            native\r\n            userPreferred\r\n          }\r\n\t\t\t\t\t coverImage {\r\n            extraLarge\r\n            large\r\n            medium\r\n            color\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n`\r\nconst characterQuery = async (character_id: number) => {\r\n\tconst url = \"https://graphql.anilist.co\",\r\n\t\toptions = {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\theaders: {\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\tAccept: \"application/json\",\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\tquery,\r\n\t\t\t\tvariables: { id: character_id },\r\n\t\t\t}),\r\n\t\t}\r\n\tconst res = await fetch(url, options)\r\n\r\n\tconst json = await res.json()\r\n\treturn json.data.Character\r\n}\r\nexport default characterQuery\r\n","import { formatDistanceToNow } from \"date-fns\"\r\nimport { FC, useContext, useEffect, useLayoutEffect, useRef, useState } from \"react\"\r\nimport { Link } from \"react-router-dom\"\r\nimport styled from \"styled-components\"\r\nimport { AppContext } from \"../../context/AppContext\"\r\nimport { UserContext } from \"../../context/UserContext\"\r\nimport { PrimaryBtn, SecondaryBtn } from \"../styles/ButtonStyles\"\r\nimport UserLink from \"../UserLink\"\r\nexport type CommentType = {\r\n\tuser_id: number\r\n\tcomment_id: number\r\n\tusername: string\r\n\tavatar: string\r\n\tcreated_at: number\r\n\tis_edited: boolean\r\n\ttext: string\r\n}\r\ntype CommentProps = {\r\n\tcomment: CommentType\r\n\tgetComments: () => Promise<void>\r\n}\r\nconst Comment: FC<CommentProps> = ({ comment, getComments }) => {\r\n\tconst [newComment, setNewComment] = useState(comment.text)\r\n\tconst [isEditOpen, setIsEditOpen] = useState(false)\r\n\tconst [pending, setPending] = useState(false)\r\n\tconst { user_id } = useContext(UserContext).user\r\n\tconst { showModal, client } = useContext(AppContext)\r\n\tconst textareaRef = useRef<HTMLTextAreaElement>(null)\r\n\r\n\tuseEffect(() => {\r\n\t\tif (isEditOpen && !pending) {\r\n\t\t\tsetIsEditOpen(false)\r\n\t\t}\r\n\t}, [comment])\r\n\r\n\tconst handleEditSubmit = async () => {\r\n\t\tsetPending(true)\r\n\t\tconst { ok } = await client(`/comments/character/${comment.comment_id}`, {\r\n\t\t\tmethod: \"PUT\",\r\n\t\t\tbody: {\r\n\t\t\t\tnew_comment: newComment,\r\n\t\t\t},\r\n\t\t\tshouldShowMessage: \"default\",\r\n\t\t})\r\n\t\tif (ok) {\r\n\t\t\tawait getComments()\r\n\t\t}\r\n\r\n\t\tsetIsEditOpen(false)\r\n\t\tsetPending(false)\r\n\t}\r\n\tuseLayoutEffect(() => {\r\n\t\tif (textareaRef.current != null) {\r\n\t\t\tconst scrollHeight = textareaRef.current.scrollHeight\r\n\t\t\ttextareaRef.current.style.height = scrollHeight + \"px\"\r\n\t\t\tif (isEditOpen) {\r\n\t\t\t\ttextareaRef.current.selectionStart = textareaRef.current.value.length\r\n\t\t\t\ttextareaRef.current.selectionEnd = textareaRef.current.value.length\r\n\t\t\t\ttextareaRef.current.focus()\r\n\t\t\t}\r\n\t\t}\r\n\t}, [textareaRef.current, isEditOpen])\r\n\treturn (\r\n\t\t<CommentBox>\r\n\t\t\t<div className=\"top-bar\">\r\n\t\t\t\t{/* <div className=\"comment-data\">\r\n\t\t\t\t\t<Link to={link} className=\"user-data\">\r\n\t\t\t\t\t\t<img src={comment.avatar} alt=\"\" />\r\n\t\t\t\t\t\t<span className=\"username\">{comment.username}</span>\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t\t<span className=\"date\">\r\n\t\t\t\t\t\t{formatDistanceToNow(new Date(comment.created_at * 1000))} ago{\" \"}\r\n\t\t\t\t\t\t{comment.is_edited && \"(edited)\"}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</div> */}\r\n\t\t\t\t<UserLink\r\n\t\t\t\t\tusername={comment.username}\r\n\t\t\t\t\tavatar_url={comment.avatar}\r\n\t\t\t\t\tdate={comment.created_at}\r\n\t\t\t\t\tisEdited={comment.is_edited}\r\n\t\t\t\t/>\r\n\t\t\t\t{user_id == comment.user_id && (\r\n\t\t\t\t\t<div className=\"actions\">\r\n\t\t\t\t\t\t{isEditOpen ? (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<SecondaryBtn size=\"small\" onClick={() => setIsEditOpen(false)} disabled={pending}>\r\n\t\t\t\t\t\t\t\t\tCancel\r\n\t\t\t\t\t\t\t\t</SecondaryBtn>\r\n\t\t\t\t\t\t\t\t<PrimaryBtn\r\n\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\tcustomStyle=\"margin-left:15px;\"\r\n\t\t\t\t\t\t\t\t\tonClick={handleEditSubmit}\r\n\t\t\t\t\t\t\t\t\tdisabled={pending}>\r\n\t\t\t\t\t\t\t\t\tSubmit\r\n\t\t\t\t\t\t\t\t</PrimaryBtn>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<SecondaryBtn size=\"small\" onClick={() => setIsEditOpen(true)} disabled={pending}>\r\n\t\t\t\t\t\t\t\t\tEdit\r\n\t\t\t\t\t\t\t\t</SecondaryBtn>\r\n\t\t\t\t\t\t\t\t<PrimaryBtn\r\n\t\t\t\t\t\t\t\t\tcolor=\"red\"\r\n\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\tcustomStyle=\"margin-left: 15px;\"\r\n\t\t\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\t\t\tshowModal(\"DELETE_COMMENT\", { getComments, comment, type: \"character\" })\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tdisabled={pending}>\r\n\t\t\t\t\t\t\t\t\tDelete\r\n\t\t\t\t\t\t\t\t</PrimaryBtn>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t\t{isEditOpen ? (\r\n\t\t\t\t<textarea\r\n\t\t\t\t\tref={textareaRef}\r\n\t\t\t\t\tname=\"newComment\"\r\n\t\t\t\t\tdefaultValue={newComment}\r\n\t\t\t\t\tonChange={e => setNewComment(e.target.value)}></textarea>\r\n\t\t\t) : (\r\n\t\t\t\t<p className=\"comment\">{comment.text}</p>\r\n\t\t\t)}\r\n\t\t</CommentBox>\r\n\t)\r\n}\r\nexport default Comment\r\nconst CommentBox = styled.div`\r\n\tborder-radius: 4px;\r\n\tpadding: 15px;\r\n\tmargin: 10px 0;\r\n\tbackground: ${({ theme }) => theme.commentBg};\r\n\t.top-bar {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t}\r\n\t.comment-data {\r\n\t\twidth: 100%;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\t.user-data {\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t}\r\n\t\timg {\r\n\t\t\twidth: 30px;\r\n\t\t\theight: 30px;\r\n\t\t\tobject-fit: cover;\r\n\t\t\tmargin-right: 10px;\r\n\t\t\tborder-radius: 4px;\r\n\t\t}\r\n\t\t.username {\r\n\t\t\tcolor: #70c7a7;\r\n\t\t}\r\n\t\t.date {\r\n\t\t\tfont-size: 0.85rem;\r\n\t\t\tmargin-left: 20px;\r\n\t\t\tcolor: grey;\r\n\t\t}\r\n\t}\r\n\t.actions {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t}\r\n\tp {\r\n\t\tmargin-top: 15px;\r\n\t\twhite-space: pre-line;\r\n\t}\r\n\ttextarea {\r\n\t\tmargin: 5px 0;\r\n\t\tpadding: 5px;\r\n\t\twidth: 100%;\r\n\t\tfont-size: 1rem;\r\n\t\theight: unset;\r\n\t\tborder-radius: 4px;\r\n\t\tborder: none;\r\n\t}\r\n\t@media (max-width: 768px) {\r\n\t\tp,\r\n\t\ttextarea {\r\n\t\t\tfont-size: 0.9rem;\r\n\t\t}\r\n\t}\r\n`\r\n/*\r\nconst CommentBox = styled.div`\r\n\tborder-radius: 4px;\r\n\tpadding: 15px;\r\n\tmargin: 10px 0;\r\n\tbackground: ${({ theme }) => theme.commentBg};\r\n\t.top-bar {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t}\r\n\t.comment-data {\r\n\t\twidth: 100%;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\t.user-data {\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t}\r\n\t\timg {\r\n\t\t\twidth: 30px;\r\n\t\t\theight: 30px;\r\n\t\t\tobject-fit: cover;\r\n\t\t\tmargin-right: 10px;\r\n\t\t\tborder-radius: 4px;\r\n\t\t}\r\n\t\t.username {\r\n\t\t\tcolor: #70c7a7;\r\n\t\t}\r\n\t\t.date {\r\n\t\t\tfont-size: 0.85rem;\r\n\t\t\tmargin-left: 20px;\r\n\t\t\tcolor: grey;\r\n\t\t}\r\n\t}\r\n\t.actions {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t}\r\n\tp {\r\n\t\tmargin-top: 15px;\r\n\t}\r\n\ttextarea {\r\n\t\tmargin: 5px 0;\r\n\t\tpadding: 5px;\r\n\t\twidth: 100%;\r\n\t\tfont-size: 1rem;\r\n\t\theight: auto;\r\n\t\tborder-radius: 4px;\r\n\t\tborder: none;\r\n\t}\r\n`\r\n*/\r\n","import { FC, FormEvent, useContext, useEffect, useState } from \"react\"\r\nimport styled from \"styled-components\"\r\nimport { PrimaryBtn } from \"../styles/ButtonStyles\"\r\nimport LoadingSpinner from \"../LoadingSpinner\"\r\nimport Comment, { CommentType } from \"./Comment\"\r\nimport { AppContext } from \"../../context/AppContext\"\r\nimport { H2 } from \"../styles/Styles\"\r\n\r\ntype Props = {\r\n\tcharacter_id: number\r\n}\r\n\r\nconst Comments: FC<Props> = ({ character_id }) => {\r\n\tconst [comments, setComments] = useState<CommentType[]>([])\r\n\tconst [isLoading, setIsLoading] = useState(true)\r\n\tconst [isSending, setIsSending] = useState(false)\r\n\tconst { client } = useContext(AppContext)\r\n\tconst getComments = async () => {\r\n\t\tsetIsLoading(true)\r\n\t\tconst { data } = await client(`/comments/character/${character_id}`)\r\n\t\tsetComments(data)\r\n\t\tsetIsLoading(false)\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tlet isMounted = true\r\n\t\tclient(`/comments/character/${character_id}`).then(({ data }) => {\r\n\t\t\tif (isMounted) {\r\n\t\t\t\tsetComments(data)\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t}\r\n\t\t})\r\n\t\treturn () => {\r\n\t\t\tisMounted = false\r\n\t\t}\r\n\t}, [])\r\n\r\n\tconst [text, setText] = useState(\"\")\r\n\r\n\tconst handleSubmit = async (e: FormEvent<HTMLFormElement>) => {\r\n\t\te.preventDefault()\r\n\t\tsetIsSending(true)\r\n\t\tconst { ok } = await client(`/comments/character/${character_id}`, {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tbody: {\r\n\t\t\t\tcomment: text,\r\n\t\t\t},\r\n\t\t\tshouldShowMessage: \"default\",\r\n\t\t})\r\n\t\tif (ok) {\r\n\t\t\tawait getComments()\r\n\t\t\tsetText(\"\")\r\n\t\t}\r\n\t\tsetIsSending(false)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t<H2>Comments</H2>\r\n\t\t\t<CommentForm onSubmit={handleSubmit}>\r\n\t\t\t\t<textarea\r\n\t\t\t\t\tname=\"comment\"\r\n\t\t\t\t\tonChange={e => setText(e.target.value)}\r\n\t\t\t\t\tdisabled={isSending}\r\n\t\t\t\t\tvalue={text}\r\n\t\t\t\t\tplaceholder=\"Add your comment\"></textarea>\r\n\t\t\t\t<br />\r\n\t\t\t\t<PrimaryBtn disabled={isSending} customStyle=\"padding: 7px 10px; font-size: 1.2rem;\">\r\n\t\t\t\t\tSend\r\n\t\t\t\t</PrimaryBtn>\r\n\t\t\t</CommentForm>\r\n\t\t\t<div className=\"all-comments\">\r\n\t\t\t\t{isLoading ? <LoadingSpinner size={50} /> : null}\r\n\t\t\t\t{comments?.map(comment => (\r\n\t\t\t\t\t<Comment key={comment.comment_id} comment={comment} getComments={getComments} />\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t</Container>\r\n\t)\r\n}\r\nexport default Comments\r\n\r\nconst Container = styled.section`\r\n\twidth: 100%;\r\n\tmargin: auto;\r\n\r\n\t.all-comments {\r\n\t\tmargin-top: 20px;\r\n\t}\r\n`\r\nconst CommentForm = styled.form`\r\n\ttextarea {\r\n\t\twidth: 100%;\r\n\t\theight: 100px;\r\n\t\tfont-size: 1.2rem;\r\n\t\tborder-radius: 4px;\r\n\t\tborder: none;\r\n\t\tpadding: 10px;\r\n\t\tmargin-bottom: 10px;\r\n\t}\r\n\t@media (max-width: 768px) {\r\n\t\ttextarea {\r\n\t\t\tfont-size: 1rem;\r\n\t\t}\r\n\t}\r\n`\r\n","import { FC, memo, useContext, useEffect, useState } from \"react\"\r\nimport styled from \"styled-components\"\r\nimport marked from \"marked\"\r\nimport characterQuery from \"../api/anime/characterAPI\"\r\nimport { Link } from \"react-router-dom\"\r\nimport { PrimaryBtn } from \"../components/styles/ButtonStyles\"\r\nimport LoadingSpinner from \"../components/LoadingSpinner\"\r\nimport { AppContext } from \"../context/AppContext\"\r\nimport Comments from \"../components/Character/Comments\"\r\nimport { H1, H2 } from \"../components/styles/Styles\"\r\nimport useWindowSize from \"../utlis/useWindowSize\"\r\nmarked.setOptions({ breaks: true })\r\ninterface Props {\r\n\tmatch: {\r\n\t\tparams: {\r\n\t\t\tid: number\r\n\t\t}\r\n\t}\r\n}\r\ninterface Character {\r\n\tcharacter_id: number\r\n\timage: {\r\n\t\tlarge: string\r\n\t\textraLarge: string\r\n\t}\r\n\tname: {\r\n\t\tfull: string\r\n\t}\r\n\tdescription: string\r\n\tmedia: {\r\n\t\tedges: any\r\n\t}\r\n}\r\n\r\nconst CharacterPage: FC<Props> = ({ match }) => {\r\n\tconst character_id = match.params.id\r\n\tconst [character, setCharacter] = useState<Character | null>(null)\r\n\tconst [isLoading, setIsLoading] = useState(true)\r\n\tconst [favCharacter, setFavCharacter] = useState({ isFavorite: false, isLoading: true })\r\n\tconst { client } = useContext(AppContext)\r\n\tconst [isSmallScreen, setIsSmallScreen] = useState(false)\r\n\tconst [width] = useWindowSize()\r\n\tuseEffect(() => {\r\n\t\tlet isMounted = true\r\n\t\tcharacterQuery(character_id).then(data => {\r\n\t\t\tif (isMounted) {\r\n\t\t\t\tsetCharacter(data)\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t}\r\n\t\t})\r\n\t\tclient(`/favorites/character/is_favorite/${character_id}`).then(({ ok, data }) => {\r\n\t\t\tif (ok) {\r\n\t\t\t\tsetFavCharacter({ isFavorite: data.is_favorite, isLoading: false })\r\n\t\t\t} else {\r\n\t\t\t\tsetFavCharacter({ isFavorite: false, isLoading: false })\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\treturn () => {\r\n\t\t\tisMounted = false\r\n\t\t}\r\n\t}, [])\r\n\tuseEffect(() => {\r\n\t\tsetIsSmallScreen(width < 768)\r\n\t}, [width])\r\n\r\n\tconst handleAddToFavorites = async () => {\r\n\t\tsetFavCharacter({ isFavorite: false, isLoading: true })\r\n\t\tconst { ok } = await client(`/favorites/character/`, {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tbody: {\r\n\t\t\t\tcharacter_id,\r\n\t\t\t\tcover_image: character?.image.large,\r\n\t\t\t\tname: character?.name.full,\r\n\t\t\t},\r\n\t\t\tshouldShowMessage: \"error\",\r\n\t\t})\r\n\t\tsetFavCharacter(prev => ({ isFavorite: ok ? true : prev.isFavorite, isLoading: false }))\r\n\t}\r\n\r\n\tconst handleRemoveFromFavorites = async () => {\r\n\t\tsetFavCharacter({ isFavorite: false, isLoading: true })\r\n\t\tconst { ok } = await client(`/favorites/character/${character_id}`, {\r\n\t\t\tmethod: \"DELETE\",\r\n\t\t\tshouldShowMessage: \"error\",\r\n\t\t})\r\n\t\tsetFavCharacter(prev => ({ isFavorite: ok ? false : prev.isFavorite, isLoading: false }))\r\n\t}\r\n\r\n\tif (isLoading) return <LoadingSpinner />\r\n\treturn (\r\n\t\t<CharacterPageEl>\r\n\t\t\t<section className=\"top\">\r\n\t\t\t\t{isSmallScreen && <H1>{character?.name.full}</H1>}\r\n\t\t\t\t<div className=\"image\">\r\n\t\t\t\t\t<img src={character?.image.extraLarge || character?.image.large} alt=\"\" />\r\n\t\t\t\t\t<PrimaryBtn\r\n\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\tcolor={favCharacter.isFavorite ? \"red\" : \"green\"}\r\n\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\tfavCharacter.isFavorite ? handleRemoveFromFavorites() : handleAddToFavorites()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tdisabled={favCharacter.isLoading}\r\n\t\t\t\t\t\tisLoading={favCharacter.isLoading}>\r\n\t\t\t\t\t\t{favCharacter.isFavorite ? \"Remove\" : \"Add to Favorites\"}\r\n\t\t\t\t\t</PrimaryBtn>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"text\">\r\n\t\t\t\t\t{!isSmallScreen && <H1>{character?.name.full}</H1>}\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tdangerouslySetInnerHTML={{\r\n\t\t\t\t\t\t\t__html: character?.description ? marked(character?.description!) : \"\",\r\n\t\t\t\t\t\t}}></div>\r\n\t\t\t\t</div>\r\n\t\t\t</section>\r\n\t\t\t<section className=\"relation\">\r\n\t\t\t\t<H2>Appears in</H2>\r\n\t\t\t\t<RelationCardList>\r\n\t\t\t\t\t{character!.media.edges.map(({ node }: any) => (\r\n\t\t\t\t\t\t<RelationCard key={node.id}>\r\n\t\t\t\t\t\t\t<Link to={`/anime/${node.id}`}>\r\n\t\t\t\t\t\t\t\t<img src={node.coverImage.extraLarge || node.coverImage.large} alt=\"\" />\r\n\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t<p>{node.title.english || node.title.romaji}</p>\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t</RelationCard>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</RelationCardList>\r\n\t\t\t</section>\r\n\t\t\t<section className=\"comments\">\r\n\t\t\t\t<Comments character_id={character_id} />\r\n\t\t\t</section>\r\n\t\t</CharacterPageEl>\r\n\t)\r\n}\r\nexport default memo(CharacterPage)\r\nconst CharacterPageEl = styled.div`\r\n\tmax-width: 1200px;\r\n\tpadding: 50px;\r\n\tmargin: auto;\r\n\t@media (max-width: 768px) {\r\n\t\tpadding: 20px;\r\n\t}\r\n\tsection.top {\r\n\t\tdisplay: flex;\r\n\t\twidth: 100%;\r\n\t\theight: max-content;\r\n\t\t.text {\r\n\t\t\twidth: 70%;\r\n\t\t\tp {\r\n\t\t\t\tfont-size: 1.1rem;\r\n\t\t\t}\r\n\t\t\tdel {\r\n\t\t\t\tbackground-color: ${({ theme }) => theme.text};\r\n\t\t\t\t:hover {\r\n\t\t\t\t\tbackground-color: unset;\r\n\t\t\t\t\ttext-decoration: none;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t.image {\r\n\t\t\twidth: 30%;\r\n\t\t\tmargin-right: 50px;\r\n\t\t\timg {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\theight: auto;\r\n\t\t\t\tmargin-bottom: 10px;\r\n\t\t\t\tborder-radius: 5px;\r\n\t\t\t\tbox-shadow: 0px 0px 10px rgba(0, 0, 0, 0.5);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tsection.relation {\r\n\t\tmargin: 30px 0;\r\n\t}\r\n\t@media (max-width: 768px) {\r\n\t\tsection.top {\r\n\t\t\tflex-direction: column;\r\n\t\t\th1 {\r\n\t\t\t\ttext-align: center;\r\n\t\t\t}\r\n\t\t\t.text {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\tmargin-top: 20px;\r\n\t\t\t\tp {\r\n\t\t\t\t\tfont-size: 0.9rem;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t.image {\r\n\t\t\t\twidth: 100%;\r\n\r\n\t\t\t\timg {\r\n\t\t\t\t\twidth: 200px;\r\n\t\t\t\t\tdisplay: block;\r\n\t\t\t\t\tmargin: 0 auto;\r\n\t\t\t\t\tmargin-bottom: 20px;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`\r\nconst RelationCardList = styled.section`\r\n\tdisplay: grid;\r\n\tgrid-template-columns: repeat(5, 1fr);\r\n\tcolumn-gap: 20px;\r\n\trow-gap: 20px;\r\n\t@media (max-width: 720px) {\r\n\t\tgrid-template-columns: repeat(4, 1fr);\r\n\t}\r\n\t@media (max-width: 640px) {\r\n\t\tgrid-template-columns: repeat(3, 1fr);\r\n\t}\r\n`\r\nconst RelationCard = styled.div`\r\n\twidth: 100%;\r\n\timg {\r\n\t\tborder-radius: 7px;\r\n\t\taspect-ratio: 2 / 3;\r\n\t\twidth: 100%;\r\n\t\theight: auto;\r\n\t\tobject-fit: cover;\r\n\t}\r\n`\r\n","import { formatDistanceStrict } from \"date-fns\"\r\nimport { useContext, useEffect, useState } from \"react\"\r\nimport { Link } from \"react-router-dom\"\r\nimport styled, { css } from \"styled-components\"\r\nimport { PrimaryBtn } from \"../components/styles/ButtonStyles\"\r\nimport { H1, H2 } from \"../components/styles/Styles\"\r\nimport UserLink from \"../components/UserLink\"\r\nimport { AppContext } from \"../context/AppContext\"\r\nimport useWindowSize from \"../utlis/useWindowSize\"\r\ntype Thread = {\r\n\tthread_id: string\r\n\tavatar: string\r\n\tusername: string\r\n\ttopic: string\r\n\tbody: string\r\n\tcreated_at: number\r\n}\r\nexport default function DiscussionListPage() {\r\n\tconst [threads, setThreads] = useState<Thread[]>([])\r\n\tconst [isLoading, setIsLoading] = useState(true)\r\n\tconst { showModal, client } = useContext(AppContext)\r\n\tconst [width] = useWindowSize()\r\n\tuseEffect(() => {\r\n\t\tlet isMounted = true\r\n\t\tclient(\"/discussion/thread/all\").then(({ data }) => {\r\n\t\t\tif (isMounted) {\r\n\t\t\t\tsetThreads(data)\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t}\r\n\t\t})\r\n\t\treturn () => {\r\n\t\t\tisMounted = false\r\n\t\t}\r\n\t}, [])\r\n\treturn (\r\n\t\t<PageEl>\r\n\t\t\t<Header>\r\n\t\t\t\t<H1>Discussions</H1>\r\n\t\t\t\t<PrimaryBtn\r\n\t\t\t\t\tsize={width > 768 ? \"medium\" : \"small\"}\r\n\t\t\t\t\tonClick={() => showModal(\"OPEN_THREAD\", null)}>\r\n\t\t\t\t\tOpen a Thread\r\n\t\t\t\t</PrimaryBtn>\r\n\t\t\t</Header>\r\n\t\t\t<p className=\"intro\">Join open discussions about anime or open your own thread.</p>\r\n\r\n\t\t\t{!isLoading && threads.length\r\n\t\t\t\t? threads.map(thread => (\r\n\t\t\t\t\t\t<ThreadCard key={thread.thread_id}>\r\n\t\t\t\t\t\t\t<Link className=\"thread-link\" to={`/discussions/thread/${thread.thread_id}`}>\r\n\t\t\t\t\t\t\t\t<h2>{thread.topic}</h2>\r\n\t\t\t\t\t\t\t\t<p>{thread.body}</p>\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t<UserLink\r\n\t\t\t\t\t\t\t\tusername={thread.username}\r\n\t\t\t\t\t\t\t\tavatar_url={thread.avatar}\r\n\t\t\t\t\t\t\t\tdate={thread.created_at}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</ThreadCard>\r\n\t\t\t\t  ))\r\n\t\t\t\t: \"Loading...\"}\r\n\t\t</PageEl>\r\n\t)\r\n}\r\nconst Header = styled.div`\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n\talign-items: center;\r\n\tbutton {\r\n\t\tflex-shrink: 0;\r\n\t}\r\n`\r\nconst PageEl = styled.div`\r\n\tmax-width: 1200px;\r\n\tpadding: 50px;\r\n\tmargin: auto;\r\n\t@media (max-width: 768px) {\r\n\t\tpadding: 20px;\r\n\t}\r\n\r\n\tp.intro {\r\n\t\tfont-size: 1.1rem;\r\n\t\tmargin-bottom: 20px;\r\n\t\t@media (max-width: 768px) {\r\n\t\t\tfont-size: 1rem;\r\n\t\t}\r\n\t\t@media (max-width: 640px) {\r\n\t\t\tfont-size: 0.9rem;\r\n\t\t}\r\n\t}\r\n`\r\nconst ThreadCard = styled.div`\r\n\tbackground: ${({ theme }) => theme.commentBg};\r\n\tborder-radius: 4px;\r\n\tpadding: 20px;\r\n\tmargin: 20px 0;\r\n\ta.thread-link {\r\n\t\th2 {\r\n\t\t\tfont-size: 1.5rem;\r\n\t\t\tcolor: ${({ theme }) => theme.text};\r\n\t\t\tfont-weight: 700;\r\n\t\t\t@media (max-width: 768px) {\r\n\t\t\t\tfont-size: 1.2rem;\r\n\t\t\t}\r\n\t\t\t@media (max-width: 640px) {\r\n\t\t\t\tfont-size: 1.1rem;\r\n\t\t\t}\r\n\t\t}\r\n\t\tp {\r\n\t\t\tmargin: 10px 0;\r\n\t\t\t@media (max-width: 640px) {\r\n\t\t\t\tfont-size: 0.9rem;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`\r\n","import { FC } from \"react\"\r\nimport styled from \"styled-components\"\r\n\r\nconst LikeEl = styled.div`\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\twidth: max-content;\r\n\tspan.count {\r\n\t\tfont-size: 1.1rem;\r\n\t\tfont-weight: 600;\r\n\t\tmargin-right: 5px;\r\n\t\tcolor: ${({ theme }) => theme.text};\r\n\t}\r\n\tbutton.heart {\r\n\t\tfont-size: 1.5rem;\r\n\t\tcolor: #ff5050;\r\n\t\tcursor: pointer;\r\n\t\tfont-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Oxygen, Ubuntu, Cantarell,\r\n\t\t\t\"Open Sans\", \"Helvetica Neue\", sans-serif;\r\n\t\tborder: none;\r\n\t\tbackground: transparent;\r\n\t\t&:disabled {\r\n\t\t\tcolor: #636262;\r\n\t\t}\r\n\t}\r\n`\r\ninterface Props {\r\n\tcount: number\r\n\tisLiked: boolean\r\n\tisPending: boolean\r\n\tonClick: () => void\r\n}\r\nconst Like: FC<Props> = ({ count, isLiked, onClick, isPending }) => {\r\n\tconst style = {\r\n\t\tclassName: isLiked ? \"heart liked\" : \"heart unliked\",\r\n\t\ticonCode: isLiked ? \"&#x2665;\" : \"&#x2661;\",\r\n\t}\r\n\r\n\treturn (\r\n\t\t<LikeEl>\r\n\t\t\t<span className=\"count\">{!!Number(count) && count}</span>\r\n\t\t\t<button\r\n\t\t\t\tonClick={onClick}\r\n\t\t\t\tdisabled={isPending}\r\n\t\t\t\tclassName={style.className}\r\n\t\t\t\tdangerouslySetInnerHTML={{ __html: style.iconCode }}></button>\r\n\t\t</LikeEl>\r\n\t)\r\n}\r\nexport default Like\r\n","import { FC, memo, useContext, useState } from \"react\"\r\nimport styled from \"styled-components\"\r\nimport { AppContext } from \"../../context/AppContext\"\r\nimport { UserContext } from \"../../context/UserContext\"\r\nimport { PrimaryBtn, SecondaryBtn } from \"../styles/ButtonStyles\"\r\nimport Like from \"../Like\"\r\nimport UserLink from \"../UserLink\"\r\nimport { Post } from \"./Posts\"\r\ninterface Props {\r\n\tpost: Post\r\n\tdepth?: number\r\n\tthread: {\r\n\t\tthread_id: string\r\n\t\tis_deleted: boolean\r\n\t}\r\n\tgetPosts: () => Promise<void>\r\n}\r\nconst RenderPosts: FC<Props> = ({ post, depth = 0, thread, getPosts }) => {\r\n\tconst [isCommentFieldOpen, setIsCommentFieldOpen] = useState(false)\r\n\tconst [newPost, setNewPost] = useState({ isLoading: false, text: \"\" })\r\n\tconst [isEditOpen, setIsEditOpen] = useState(false)\r\n\tconst [editedPost, setEditedPost] = useState({ isLoading: false, text: post.body })\r\n\tconst user = useContext(UserContext).user\r\n\tconst { showModal, client } = useContext(AppContext)\r\n\tconst [isLikePending, setIsLikePending] = useState(false)\r\n\r\n\tconst handlePostSubmit = async () => {\r\n\t\tsetNewPost(prev => ({ ...prev, isLoading: true }))\r\n\t\tconst { ok } = await client(`/discussion/post/${thread.thread_id}`, {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tbody: {\r\n\t\t\t\tparent_id: post.post_id,\r\n\t\t\t\tbody: newPost.text,\r\n\t\t\t},\r\n\t\t\tshouldShowMessage: \"default\",\r\n\t\t})\r\n\r\n\t\tif (ok) {\r\n\t\t\tgetPosts()\r\n\t\t\tsetNewPost({ text: \"\", isLoading: false })\r\n\t\t\tsetIsCommentFieldOpen(false)\r\n\t\t}\r\n\t\tsetNewPost(prev => ({ ...prev, isLoading: false }))\r\n\t}\r\n\r\n\tconst handleEditSubmit = async () => {\r\n\t\tsetEditedPost(prev => ({ ...prev, isLoading: true }))\r\n\t\tconst { ok } = await client(`/discussion/post/${post.post_id}`, {\r\n\t\t\tmethod: \"PUT\",\r\n\t\t\tbody: {\r\n\t\t\t\tbody: editedPost.text,\r\n\t\t\t},\r\n\t\t\tshouldShowMessage: \"default\",\r\n\t\t})\r\n\t\tif (ok) {\r\n\t\t\tawait getPosts()\r\n\t\t\tsetIsEditOpen(false)\r\n\t\t}\r\n\t\tsetEditedPost({ text: post.body, isLoading: false })\r\n\t}\r\n\tconst handleEditCancel = () => {\r\n\t\tsetIsEditOpen(false)\r\n\t\tsetEditedPost({ isLoading: false, text: post.body })\r\n\t}\r\n\tconst handleLike = async () => {\r\n\t\tsetIsLikePending(true)\r\n\r\n\t\tconst { ok } = await client(`/discussion/post/like/${post.post_id}`, {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tshouldShowMessage: \"error\",\r\n\t\t})\r\n\t\tif (ok) {\r\n\t\t\tawait getPosts()\r\n\t\t}\r\n\t\tsetIsLikePending(false)\r\n\t}\r\n\r\n\tconst handleUnlike = async () => {\r\n\t\tsetIsLikePending(true)\r\n\t\tconst { ok } = await client(`/discussion/post/unlike/${post.post_id}`, {\r\n\t\t\tmethod: \"DELETE\",\r\n\t\t\tshouldShowMessage: \"error\",\r\n\t\t})\r\n\t\tif (ok) {\r\n\t\t\tawait getPosts()\r\n\t\t}\r\n\t\tsetIsLikePending(false)\r\n\t}\r\n\treturn (\r\n\t\t<PostEl key={post.post_id} depth={depth}>\r\n\t\t\t{/* Top bar */}\r\n\t\t\t<div className=\"wrapper\">\r\n\t\t\t\t<div className=\"top\">\r\n\t\t\t\t\t<UserLink\r\n\t\t\t\t\t\tusername={post.username}\r\n\t\t\t\t\t\tdate={post.created_at}\r\n\t\t\t\t\t\tavatar_url={post.avatar}\r\n\t\t\t\t\t\tisEdited={post.is_edited}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{!post.is_deleted && (\r\n\t\t\t\t\t\t<Like\r\n\t\t\t\t\t\t\tcount={post.like_count}\r\n\t\t\t\t\t\t\tisLiked={post.is_liked}\r\n\t\t\t\t\t\t\tisPending={isLikePending}\r\n\t\t\t\t\t\t\tonClick={post.is_liked ? handleUnlike : handleLike}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t{isEditOpen && !post.is_deleted ? (\r\n\t\t\t\t\t\t<div className=\"edit-actions\">\r\n\t\t\t\t\t\t\t<div className=\"left\">\r\n\t\t\t\t\t\t\t\t<SecondaryBtn\r\n\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\tonClick={handleEditCancel}\r\n\t\t\t\t\t\t\t\t\tdisabled={editedPost.isLoading}>\r\n\t\t\t\t\t\t\t\t\tCancel\r\n\t\t\t\t\t\t\t\t</SecondaryBtn>\r\n\t\t\t\t\t\t\t\t<PrimaryBtn\r\n\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\tonClick={handleEditSubmit}\r\n\t\t\t\t\t\t\t\t\tdisabled={editedPost.isLoading}\r\n\t\t\t\t\t\t\t\t\tcustomStyle={`padding: 2px 5px;`}>\r\n\t\t\t\t\t\t\t\t\tSubmit\r\n\t\t\t\t\t\t\t\t</PrimaryBtn>\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t<PrimaryBtn\r\n\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\tcolor=\"red\"\r\n\t\t\t\t\t\t\t\tonClick={() => showModal(\"DELETE_POST\", { post, getPosts })}\r\n\t\t\t\t\t\t\t\tdisabled={editedPost.isLoading}>\r\n\t\t\t\t\t\t\t\tDelete\r\n\t\t\t\t\t\t\t</PrimaryBtn>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\tuser.username === post.username &&\r\n\t\t\t\t\t\t!post.is_deleted &&\r\n\t\t\t\t\t\t!isCommentFieldOpen && (\r\n\t\t\t\t\t\t\t<SecondaryBtn onClick={() => setIsEditOpen(true)}>Edit</SecondaryBtn>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t\t{/* Edit */}\r\n\t\t\t\t{isEditOpen && !post.is_deleted ? (\r\n\t\t\t\t\t<textarea\r\n\t\t\t\t\t\tclassName=\"edit\"\r\n\t\t\t\t\t\tvalue={editedPost.text}\r\n\t\t\t\t\t\tonChange={e => setEditedPost(prev => ({ ...prev, text: e.target.value }))}></textarea>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<p className=\"body\">{post.body}</p>\r\n\t\t\t\t)}\r\n\t\t\t\t{/* Reply */}\r\n\t\t\t\t{isCommentFieldOpen ? (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\tclassName=\"reply\"\r\n\t\t\t\t\t\t\tonChange={e => setNewPost({ text: e.target.value, isLoading: false })}\r\n\t\t\t\t\t\t\tvalue={newPost.text}\r\n\t\t\t\t\t\t\tplaceholder=\"Add your comment\"></textarea>\r\n\t\t\t\t\t\t<div className=\"send-actions\">\r\n\t\t\t\t\t\t\t<SecondaryBtn\r\n\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\tdisabled={newPost.isLoading}\r\n\t\t\t\t\t\t\t\tonClick={() => setIsCommentFieldOpen(false)}>\r\n\t\t\t\t\t\t\t\tCancel\r\n\t\t\t\t\t\t\t</SecondaryBtn>\r\n\t\t\t\t\t\t\t<PrimaryBtn\r\n\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\tdisabled={newPost.isLoading}\r\n\t\t\t\t\t\t\t\tonClick={() => handlePostSubmit()}\r\n\t\t\t\t\t\t\t\tcustomStyle={`padding: 2px 5px;`}>\r\n\t\t\t\t\t\t\t\tSend\r\n\t\t\t\t\t\t\t</PrimaryBtn>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t!isEditOpen &&\r\n\t\t\t\t\t!thread.is_deleted &&\r\n\t\t\t\t\t!post.is_deleted && (\r\n\t\t\t\t\t\t<SecondaryBtn onClick={() => setIsCommentFieldOpen(true)}>Reply</SecondaryBtn>\r\n\t\t\t\t\t)\r\n\t\t\t\t)}\r\n\t\t\t\t{/* Replies */}\r\n\t\t\t\t{post?.children?.map(post => (\r\n\t\t\t\t\t<RenderPosts\r\n\t\t\t\t\t\tpost={post}\r\n\t\t\t\t\t\tthread={thread}\r\n\t\t\t\t\t\tgetPosts={getPosts}\r\n\t\t\t\t\t\tkey={post.post_id}\r\n\t\t\t\t\t\tdepth={Number(depth) + 1}\r\n\t\t\t\t\t/>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t</PostEl>\r\n\t)\r\n}\r\nexport default memo(RenderPosts)\r\nconst PostEl = styled.div<{ depth: number }>`\r\n\tmargin: 15px 0;\r\n\tpadding: ${({ depth }) => (depth === 0 ? \"15px 15px 15px 0\" : \"0px\")};\r\n\tborder-left: 3px #b6b6b6 solid;\r\n\tborder-radius: 4px;\r\n\tbackground-color: ${({ theme }) => theme.commentBg};\r\n\t@media (max-width: 640px) {\r\n\t\tborder-left: 2px #b6b6b6 solid;\r\n\t}\r\n\t.wrapper {\r\n\t\tpadding-left: 20px;\r\n\t\t@media (max-width: 640px) {\r\n\t\t\tpadding-left: 10px;\r\n\t\t}\r\n\t}\r\n\t.top {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\t> button {\r\n\t\t\tmargin-left: 20px;\r\n\t\t}\r\n\t}\r\n\tp.body {\r\n\t\tmargin: 15px 0;\r\n\t\t@media (max-width: 768px) {\r\n\t\t\tfont-size: 0.9rem;\r\n\t\t\tmargin: 10px 0;\r\n\t\t\tfont-weight: 300;\r\n\t\t}\r\n\t}\r\n\t.edit-actions {\r\n\t\twidth: 100%;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\t.left {\r\n\t\t\tdisplay: flex;\r\n\t\t\tbutton {\r\n\t\t\t\tmargin: 0 10px;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t.send-actions {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tbutton {\r\n\t\t\tmargin-right: 10px;\r\n\t\t}\r\n\t}\r\n\ttextarea.reply,\r\n\ttextarea.edit {\r\n\t\twidth: 100%;\r\n\t\theight: 80px;\r\n\t\tfont-size: 1rem;\r\n\t\tborder-radius: 4px;\r\n\t\tpadding: 5px;\r\n\t\tmargin: 8px 0;\r\n\t\t@media (max-width: 640px) {\r\n\t\t\tfont-size: 0.9rem;\r\n\t\t}\r\n\t}\r\n\ttextarea.reply {\r\n\t\t/* border: none; */\r\n\t\tborder: 1px grey solid;\r\n\t}\r\n\ttextarea.edit {\r\n\t\tborder: 1px grey solid;\r\n\t}\r\n`\r\n","import { FC, memo, useContext, useEffect, useState } from \"react\"\r\nimport styled from \"styled-components\"\r\nimport { AppContext } from \"../../context/AppContext\"\r\nimport { PrimaryBtn } from \"../styles/ButtonStyles\"\r\nimport LoadingSpinner from \"../LoadingSpinner\"\r\nimport RenderPosts from \"./RenderPosts\"\r\nimport { ThreadType } from \"./Thread\"\r\nexport interface Post {\r\n\tpost_id: string\r\n\tcreated_at: number\r\n\tbody: string\r\n\tparent_id: string\r\n\tusername: string\r\n\tuser_id: number\r\n\tis_edited: boolean\r\n\tis_deleted: boolean\r\n\tis_liked: boolean\r\n\tlike_count: number\r\n\tavatar: string\r\n\tchildren: Post[]\r\n}\r\nconst Posts: FC<{ thread: ThreadType }> = ({ thread }) => {\r\n\tconst [newPost, setNewPost] = useState({ text: \"\", isLoading: false })\r\n\tconst [posts, setPosts] = useState<Post[]>([])\r\n\tconst [isLoading, setIsLoading] = useState(true)\r\n\tconst { client } = useContext(AppContext)\r\n\tuseEffect(() => {\r\n\t\tgetPosts().then(() => setIsLoading(false))\r\n\t}, [])\r\n\tconst getPosts = async () => {\r\n\t\tconst { data } = await client(`/discussion/post/${thread.thread_id}`)\r\n\t\tsetPosts(data)\r\n\t}\r\n\r\n\tconst submitPost = async (parent_id: string | null, body: string) => {\r\n\t\tsetNewPost({ ...newPost, isLoading: true })\r\n\t\tconst { ok } = await client(`/discussion/post/${thread.thread_id}`, {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tbody: {\r\n\t\t\t\tparent_id,\r\n\t\t\t\tbody,\r\n\t\t\t},\r\n\t\t\tshouldShowMessage: \"default\",\r\n\t\t})\r\n\t\tif (ok) {\r\n\t\t\tgetPosts()\r\n\t\t}\r\n\t\tsetNewPost({ text: \"\", isLoading: false })\r\n\t}\r\n\r\n\tif (isLoading) return <LoadingSpinner />\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{thread.is_deleted ? null : (\r\n\t\t\t\t<CommentForm>\r\n\t\t\t\t\t<textarea\r\n\t\t\t\t\t\tname=\"comment\"\r\n\t\t\t\t\t\tonChange={e => setNewPost({ text: e.target.value, isLoading: false })}\r\n\t\t\t\t\t\tvalue={newPost.text}\r\n\t\t\t\t\t\tplaceholder=\"Add your post\"></textarea>\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<PrimaryBtn\r\n\t\t\t\t\t\tonClick={() => submitPost(null, newPost.text)}\r\n\t\t\t\t\t\tdisabled={newPost.isLoading}\r\n\t\t\t\t\t\tcustomStyle={`font-size: 1.2rem; padding: 5px 10px;`}>\r\n\t\t\t\t\t\tSend\r\n\t\t\t\t\t</PrimaryBtn>\r\n\t\t\t\t</CommentForm>\r\n\t\t\t)}\r\n\t\t\t{posts ? (\r\n\t\t\t\tposts.map(post => (\r\n\t\t\t\t\t<RenderPosts\r\n\t\t\t\t\t\tpost={post}\r\n\t\t\t\t\t\tthread={{ thread_id: thread.thread_id, is_deleted: thread.is_deleted! }}\r\n\t\t\t\t\t\tgetPosts={getPosts}\r\n\t\t\t\t\t\tkey={post.post_id}\r\n\t\t\t\t\t/>\r\n\t\t\t\t))\r\n\t\t\t) : (\r\n\t\t\t\t<div>Nothing to display</div>\r\n\t\t\t)}\r\n\t\t</>\r\n\t)\r\n}\r\nexport default memo(Posts)\r\n// Duplicate from Comments.jsx\r\nconst CommentForm = styled.div`\r\n\tmargin-bottom: 30px;\r\n\r\n\ttextarea {\r\n\t\twidth: 100%;\r\n\t\theight: 100px;\r\n\t\tfont-size: 1.2rem;\r\n\t\tborder-radius: 4px;\r\n\t\tborder: none;\r\n\t\tpadding: 10px;\r\n\t\tmargin-bottom: 10px;\r\n\t\t@media (max-width: 768px) {\r\n\t\t\tfont-size: 1rem;\r\n\t\t}\r\n\t\t@media (max-width: 640px) {\r\n\t\t\tfont-size: 0.9rem;\r\n\t\t}\r\n\t}\r\n`\r\n","import { Dispatch, FC, SetStateAction, useContext, useEffect, useState } from \"react\"\r\nimport styled from \"styled-components\"\r\nimport { PrimaryBtn, SecondaryBtn } from \"../styles/ButtonStyles\"\r\nimport UserLink from \"../UserLink\"\r\nimport Like from \"../Like\"\r\nimport { UserContext } from \"../../context/UserContext\"\r\nimport { RouteComponentProps } from \"react-router\"\r\nimport { AppContext } from \"../../context/AppContext\"\r\nimport LoadingSpinner from \"../LoadingSpinner\"\r\nimport { H1 } from \"../styles/Styles\"\r\n\r\nexport type ThreadType = {\r\n\tthread_id: string\r\n\ttopic?: string\r\n\tbody?: string\r\n\tavatar?: string\r\n\tlike_count?: number\r\n\tcreated_at?: number\r\n\tuser_id?: number\r\n\tusername?: string\r\n\tis_deleted?: boolean\r\n\tis_liked?: boolean\r\n\tisEdited?: boolean\r\n}\r\ntype Props = {\r\n\tthread: ThreadType\r\n\tsetThread: Dispatch<SetStateAction<ThreadType>>\r\n\thistory: RouteComponentProps[\"history\"]\r\n}\r\nconst Thread: FC<Props> = ({ thread, setThread, history }) => {\r\n\tconst [isLoading, setIsLoading] = useState(true)\r\n\tconst [isEditLoading, setIsEditLoading] = useState(false)\r\n\tconst [isEditOpen, setIsEditOpen] = useState(false)\r\n\tconst [isLikePending, setIsLikePending] = useState(true)\r\n\tconst [editedThread, setEditedThread] = useState({\r\n\t\ttopic: \"\",\r\n\t\tbody: \"\",\r\n\t})\r\n\tconst user = useContext(UserContext).user\r\n\tconst { showModal, client } = useContext(AppContext)\r\n\tuseEffect(() => {\r\n\t\tif (!user.isLoading && !thread.topic) {\r\n\t\t\tgetThread()\r\n\t\t}\r\n\t}, [user.isLoading])\r\n\r\n\tconst getThread = async () => {\r\n\t\tconst { data } = await client(`/discussion/thread/${thread.thread_id}`)\r\n\t\tif (!data) return history.replace(\"/404\")\r\n\t\tsetIsLoading(false)\r\n\t\tsetIsLikePending(false)\r\n\t\tsetIsEditOpen(false)\r\n\t\tsetThread(data)\r\n\t\tsetEditedThread({ topic: data.topic, body: data.body })\r\n\t}\r\n\tconst handleEdit = async () => {\r\n\t\tsetIsEditLoading(true)\r\n\t\tconst { ok } = await client(`/discussion/thread/${thread.thread_id}`, {\r\n\t\t\tmethod: \"PUT\",\r\n\t\t\tbody: editedThread,\r\n\t\t\tshouldShowMessage: \"default\",\r\n\t\t})\r\n\t\tif (ok) {\r\n\t\t\tgetThread()\r\n\t\t\tsetIsEditOpen(false)\r\n\t\t}\r\n\t\tsetIsEditLoading(false)\r\n\t}\r\n\tconst handleDelete = () => {\r\n\t\tshowModal(\"DELETE_THREAD\", { thread, getThread })\r\n\t}\r\n\r\n\tconst handleLike = async () => {\r\n\t\tsetIsLikePending(true)\r\n\t\tconst { ok } = await client(`/discussion/thread/like/${thread.thread_id}`, {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tshouldShowMessage: \"error\",\r\n\t\t})\r\n\t\tif (ok) {\r\n\t\t\tsetThread(prev => ({ ...prev, is_liked: true, like_count: Number(prev.like_count) + 1 }))\r\n\t\t\tsetIsLikePending(false)\r\n\t\t}\r\n\t}\r\n\r\n\tconst handleUnlike = async () => {\r\n\t\tsetIsLikePending(true)\r\n\t\tconst { ok } = await client(`/discussion/thread/like/${thread.thread_id}`, {\r\n\t\t\tmethod: \"DELETE\",\r\n\t\t\tshouldShowMessage: \"error\",\r\n\t\t})\r\n\t\tif (ok) {\r\n\t\t\tsetThread(prev => ({ ...prev, is_liked: false, like_count: Number(prev.like_count) - 1 }))\r\n\t\t\tsetIsLikePending(false)\r\n\t\t}\r\n\t}\r\n\tif (isLoading) return <LoadingSpinner />\r\n\tif (isEditOpen)\r\n\t\treturn (\r\n\t\t\t<ThreadCardEl>\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tid=\"edit-topic\"\r\n\t\t\t\t\tvalue={editedThread.topic}\r\n\t\t\t\t\tonChange={e => setEditedThread(prev => ({ ...prev, topic: e.target.value }))}\r\n\t\t\t\t\tdisabled={isEditLoading}\r\n\t\t\t\t/>\r\n\t\t\t\t<textarea\r\n\t\t\t\t\tid=\"edit-body\"\r\n\t\t\t\t\tvalue={editedThread.body}\r\n\t\t\t\t\tonChange={e => setEditedThread(prev => ({ ...prev, body: e.target.value }))}\r\n\t\t\t\t\tdisabled={isEditLoading}></textarea>\r\n\t\t\t\t<div className=\"buttons\">\r\n\t\t\t\t\t<div className=\"left\">\r\n\t\t\t\t\t\t<SecondaryBtn onClick={() => setIsEditOpen(false)}>Cancel</SecondaryBtn>\r\n\t\t\t\t\t\t<PrimaryBtn onClick={handleEdit} disabled={isEditLoading}>\r\n\t\t\t\t\t\t\tSubmit\r\n\t\t\t\t\t\t</PrimaryBtn>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<SecondaryBtn color=\"red\" onClick={handleDelete}>\r\n\t\t\t\t\t\tDelete\r\n\t\t\t\t\t</SecondaryBtn>\r\n\t\t\t\t</div>\r\n\t\t\t</ThreadCardEl>\r\n\t\t)\r\n\treturn (\r\n\t\t<ThreadCardEl>\r\n\t\t\t<h1>{thread.topic}</h1>\r\n\t\t\t<p className=\"body\">{thread.body}</p>\r\n\r\n\t\t\t<div className=\"actions\">\r\n\t\t\t\t<UserLink\r\n\t\t\t\t\tavatar_url={thread.avatar!}\r\n\t\t\t\t\tusername={thread.username!}\r\n\t\t\t\t\tdate={thread.created_at!}\r\n\t\t\t\t\tisEdited={thread.isEdited!}\r\n\t\t\t\t/>\r\n\t\t\t\t<div className=\"like-edit\">\r\n\t\t\t\t\t<Like\r\n\t\t\t\t\t\tcount={thread.like_count!}\r\n\t\t\t\t\t\tisLiked={thread.is_liked!}\r\n\t\t\t\t\t\tisPending={isLikePending}\r\n\t\t\t\t\t\tonClick={thread.is_liked ? handleUnlike : handleLike}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{thread.user_id === user.user_id && !thread.is_deleted ? (\r\n\t\t\t\t\t\t<SecondaryBtn onClick={() => setIsEditOpen(true)}>Edit</SecondaryBtn>\r\n\t\t\t\t\t) : null}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</ThreadCardEl>\r\n\t)\r\n}\r\nexport default Thread\r\nconst ThreadCardEl = styled.div`\r\n\tmargin-bottom: 50px;\r\n\t@media (max-width: 640px) {\r\n\t\tmargin-bottom: 30px;\r\n\t}\r\n\th1 {\r\n\t\tfont-size: 2.2rem;\r\n\t\t@media (max-width: 768px) {\r\n\t\t\tfont-size: 1.7rem;\r\n\t\t}\r\n\t\t@media (max-width: 640px) {\r\n\t\t\tfont-size: 1.4rem;\r\n\t\t}\r\n\t}\r\n\tp.body {\r\n\t\twhite-space: pre-line;\r\n\t\tfont-size: 1.1rem;\r\n\t\tmargin: 10px 0;\r\n\t\t@media (max-width: 640px) {\r\n\t\t\tfont-size: 0.9rem;\r\n\t\t}\r\n\t}\r\n\t.actions {\r\n\t\tdisplay: flex;\r\n\t\t.like-edit {\r\n\t\t\tdisplay: flex;\r\n\t\t\t> * {\r\n\t\t\t\tmargin-right: 15px;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t// edit\r\n\tinput#edit-topic {\r\n\t\tfont-size: 1.1rem;\r\n\t\tmargin-bottom: 15px;\r\n\t\tpadding: 5px 8px;\r\n\t\twidth: 100%;\r\n\t\tborder: none;\r\n\t\tborder-radius: 4px;\r\n\t\t@media (max-width: 640px) {\r\n\t\t\tfont-size: 0.9rem;\r\n\t\t}\r\n\t}\r\n\ttextarea {\r\n\t\twidth: 100%;\r\n\t\theight: 100px;\r\n\t\tfont-size: 1rem;\r\n\t\tborder-radius: 4px;\r\n\t\tborder: none;\r\n\t\tpadding: 10px;\r\n\t\tmargin-bottom: 10px;\r\n\t\t@media (max-width: 640px) {\r\n\t\t\tfont-size: 0.85rem;\r\n\t\t}\r\n\t}\r\n\r\n\t.buttons {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\t.left {\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\t> button {\r\n\t\t\t\tmargin-right: 15px;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`\r\n","import { FC, memo, useState } from \"react\"\r\nimport { RouteComponentProps } from \"react-router\"\r\nimport styled from \"styled-components\"\r\nimport Posts from \"../components/Discussions/Posts\"\r\nimport Thread, { ThreadType } from \"../components/Discussions/Thread\"\r\ntype Props = {\r\n\tmatch: {\r\n\t\tparams: {\r\n\t\t\tthread_id: string\r\n\t\t}\r\n\t}\r\n\thistory: RouteComponentProps[\"history\"]\r\n}\r\nconst DiscussionPage: FC<Props> = ({ match, history }) => {\r\n\tconst [thread, setThread] = useState<ThreadType>({\r\n\t\tthread_id: match.params.thread_id,\r\n\t})\r\n\treturn (\r\n\t\t<PageEl>\r\n\t\t\t<>\r\n\t\t\t\t<Thread thread={thread} setThread={setThread} history={history} />\r\n\t\t\t\t<Posts thread={thread} />\r\n\t\t\t</>\r\n\t\t</PageEl>\r\n\t)\r\n}\r\nexport default DiscussionPage\r\nconst PageEl = styled.div`\r\n\twidth: 100%;\r\n\tmax-width: 1200px;\r\n\tpadding: 0 50px;\r\n\tmargin: 30px auto;\r\n\t@media (max-width: 768px) {\r\n\t\tpadding: 0 20px;\r\n\t}\r\n`\r\n","import { H1 } from \"../components/styles/Styles\"\r\n\r\nexport default function NotFound() {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<H1>Oops! Not found...</H1>\r\n\t\t\t<p>The page you requested cannot be found.</p>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { FC, memo, useContext, useEffect, useState } from \"react\"\r\nimport LoadingSpinner from \"../components/LoadingSpinner\"\r\nimport styled, { css } from \"styled-components\"\r\nimport { PrimaryBtn } from \"../components/styles/ButtonStyles\"\r\nimport { RouteComponentProps } from \"react-router\"\r\nimport { UserContext } from \"../context/UserContext\"\r\nimport { AppContext } from \"../context/AppContext\"\r\nimport { Link } from \"react-router-dom\"\r\nimport { H1, H2 } from \"../components/styles/Styles\"\r\nimport { format } from \"date-fns\"\r\nimport useWindowSize from \"../utlis/useWindowSize\"\r\n\r\ninterface Props {\r\n\tmatch: {\r\n\t\tparams: {\r\n\t\t\tusername: string\r\n\t\t}\r\n\t}\r\n\thistory: RouteComponentProps[\"history\"]\r\n}\r\ninterface Member {\r\n\tuser: {\r\n\t\tusername: string\r\n\t\tuser_id: number\r\n\t\tavatar_url: string\r\n\t\tabout: string\r\n\t\tcreated_at: number\r\n\t}\r\n\tfavorite_anime: {\r\n\t\tanime_id: number\r\n\t\tcover_image: string\r\n\t\ttitle: string\r\n\t}[]\r\n\tfavorite_characters: {\r\n\t\tcharacter_id: number\r\n\t\tcover_image: string\r\n\t\tname: string\r\n\t}[]\r\n\tfollowers: {\r\n\t\tusername: string\r\n\t\tavatar: string\r\n\t}[]\r\n\tfollowing: {\r\n\t\tusername: string\r\n\t\tavatar: string\r\n\t}[]\r\n\tthreads: {\r\n\t\ttopic: string\r\n\t\tthread_id: string\r\n\t}[]\r\n}\r\nconst MemberPage: FC<Props> = ({ match, history }) => {\r\n\tconst user = useContext(UserContext).user\r\n\tconst [member, setMember] = useState<Member | null>(null)\r\n\tconst [isLoading, setIsLoading] = useState(true)\r\n\tconst [following, setFollowing] = useState({ isLoading: true, isFollowing: false })\r\n\tconst [width] = useWindowSize()\r\n\r\n\tconst { client } = useContext(AppContext)\r\n\tuseEffect(() => {\r\n\t\tif (user.isLoggedIn && user.username === match.params.username) {\r\n\t\t\thistory.replace(\"/me/profile\")\r\n\t\t}\r\n\t}, [user.isLoggedIn, match.params.username])\r\n\tuseEffect(() => {\r\n\t\tsetIsLoading(true)\r\n\t\tlet isMounted = true\r\n\t\tconst getMember = async () => {\r\n\t\t\tconst { data, status } = await client(`/member/${match.params.username}`)\r\n\t\t\tif (data && isMounted) {\r\n\t\t\t\tsetMember(data)\r\n\t\t\t\tsetFollowing({ isLoading: false, isFollowing: data.isFollowing })\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t}\r\n\t\t\tif (status === 404) {\r\n\t\t\t\thistory.replace(\"/404\")\r\n\t\t\t}\r\n\t\t}\r\n\t\tgetMember()\r\n\t\treturn () => {\r\n\t\t\tisMounted = false\r\n\t\t}\r\n\t}, [match.params.username])\r\n\tconst handleFollow = async () => {\r\n\t\tsetFollowing(prev => ({ isFollowing: prev.isFollowing, isLoading: true }))\r\n\r\n\t\tconst { ok } = await client(`/member/${match.params.username}`, {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tshouldShowMessage: \"default\",\r\n\t\t})\r\n\t\tsetFollowing(prev => ({ isFollowing: ok ? true : prev.isFollowing, isLoading: false }))\r\n\t}\r\n\tconst handleUnfollow = async () => {\r\n\t\tsetFollowing(prev => ({ isFollowing: prev.isFollowing, isLoading: true }))\r\n\r\n\t\tconst { ok } = await client(`/member/${match.params.username}`, {\r\n\t\t\tmethod: \"DELETE\",\r\n\t\t\tshouldShowMessage: \"default\",\r\n\t\t})\r\n\t\tsetFollowing(prev => ({ isFollowing: ok ? false : prev.isFollowing, isLoading: false }))\r\n\t}\r\n\tif (isLoading) return <LoadingSpinner />\r\n\tif (width < 640) {\r\n\t\treturn (\r\n\t\t\t<MemberPageStyle>\r\n\t\t\t\t<MobileStyle>\r\n\t\t\t\t\t<div className=\"user-info-top\">\r\n\t\t\t\t\t\t<div className=\"avatar\">\r\n\t\t\t\t\t\t\t<img src={member?.user.avatar_url} alt=\"\" />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"username-date\">\r\n\t\t\t\t\t\t\t<H1>{member?.user.username}</H1>\r\n\t\t\t\t\t\t\t<p className=\"member\">Member since {format(new Date(user.created_at!), \"MMMM y\")}</p>\r\n\t\t\t\t\t\t\t<PrimaryBtn\r\n\t\t\t\t\t\t\t\tcolor={following.isFollowing ? \"red\" : \"green\"}\r\n\t\t\t\t\t\t\t\tonClick={following.isFollowing ? handleUnfollow : handleFollow}\r\n\t\t\t\t\t\t\t\tisLoading={following.isLoading}\r\n\t\t\t\t\t\t\t\tdisabled={following.isLoading}>\r\n\t\t\t\t\t\t\t\t{following.isFollowing ? \"Unfollow\" : \"Follow\"}\r\n\t\t\t\t\t\t\t</PrimaryBtn>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"about\">\r\n\t\t\t\t\t\t<H2>About</H2>\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t{member?.user.about ||\r\n\t\t\t\t\t\t\t\t\"Apparently, this user prefers to keep an air of mystery about them.\"}\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"social\">\r\n\t\t\t\t\t\t<div className=\"followers\">\r\n\t\t\t\t\t\t\t<H2>Follwers</H2>\r\n\t\t\t\t\t\t\t<div className=\"list\">\r\n\t\t\t\t\t\t\t\t{member?.followers.map(follower => (\r\n\t\t\t\t\t\t\t\t\t<UserLink\r\n\t\t\t\t\t\t\t\t\t\tkey={follower.username}\r\n\t\t\t\t\t\t\t\t\t\tusername={follower.username}\r\n\t\t\t\t\t\t\t\t\t\tavatar_url={follower.avatar}\r\n\t\t\t\t\t\t\t\t\t\tisMobile={true}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"following\">\r\n\t\t\t\t\t\t\t<H2>Following</H2>\r\n\t\t\t\t\t\t\t<div className=\"list\">\r\n\t\t\t\t\t\t\t\t{member?.following.map(following => (\r\n\t\t\t\t\t\t\t\t\t<UserLink\r\n\t\t\t\t\t\t\t\t\t\tkey={following.username}\r\n\t\t\t\t\t\t\t\t\t\tusername={following.username}\r\n\t\t\t\t\t\t\t\t\t\tavatar_url={following.avatar}\r\n\t\t\t\t\t\t\t\t\t\tisMobile={true}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"favorites\">\r\n\t\t\t\t\t\t<H2>Favorites</H2>\r\n\t\t\t\t\t\t<h3>Anime</h3>\r\n\t\t\t\t\t\t<div className=\"list\">\r\n\t\t\t\t\t\t\t{member?.favorite_anime?.map(anime => (\r\n\t\t\t\t\t\t\t\t<Card key={anime.anime_id}>\r\n\t\t\t\t\t\t\t\t\t<Link to={`/anime/${anime.anime_id}`}>\r\n\t\t\t\t\t\t\t\t\t\t<img src={anime.cover_image} alt=\"\" />\r\n\t\t\t\t\t\t\t\t\t\t<p>{anime.title}</p>\r\n\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t{member?.favorite_characters.length ? (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<h3>Characters</h3>\r\n\t\t\t\t\t\t\t\t<div className=\"list\">\r\n\t\t\t\t\t\t\t\t\t{member?.favorite_characters?.map(character => (\r\n\t\t\t\t\t\t\t\t\t\t<Card key={character.character_id}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Link to={`/character/${character.character_id}`}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<img src={character.cover_image} alt=\"\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<p>{character.name}</p>\r\n\t\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{member?.threads.length && (\r\n\t\t\t\t\t\t<div className=\"threads\">\r\n\t\t\t\t\t\t\t<H2>Threads</H2>\r\n\t\t\t\t\t\t\t{member?.threads.map(thread => (\r\n\t\t\t\t\t\t\t\t<Link key={thread.thread_id} to={`/discussions/thread/${thread.thread_id}`}>\r\n\t\t\t\t\t\t\t\t\t{thread.topic}\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</MobileStyle>\r\n\t\t\t</MemberPageStyle>\r\n\t\t)\r\n\t}\r\n\treturn (\r\n\t\t<MemberPageStyle>\r\n\t\t\t<Aside>\r\n\t\t\t\t<div className=\"avatar-container\">\r\n\t\t\t\t\t<img src={member?.user.avatar_url} alt=\"\" />\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<PrimaryBtn\r\n\t\t\t\t\tcolor={following.isFollowing ? \"red\" : \"green\"}\r\n\t\t\t\t\tonClick={following.isFollowing ? handleUnfollow : handleFollow}\r\n\t\t\t\t\tisLoading={following.isLoading}\r\n\t\t\t\t\tdisabled={following.isLoading}>\r\n\t\t\t\t\t{following.isFollowing ? \"Unfollow\" : \"Follow\"}\r\n\t\t\t\t</PrimaryBtn>\r\n\t\t\t\t<div className=\"social\">\r\n\t\t\t\t\t<div className=\"followers\">\r\n\t\t\t\t\t\t<H2>Follwers</H2>\r\n\t\t\t\t\t\t<div className=\"list\">\r\n\t\t\t\t\t\t\t{member?.followers.map(follower => (\r\n\t\t\t\t\t\t\t\t<UserLink\r\n\t\t\t\t\t\t\t\t\tkey={follower.username}\r\n\t\t\t\t\t\t\t\t\tusername={follower.username}\r\n\t\t\t\t\t\t\t\t\tavatar_url={follower.avatar}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"following\">\r\n\t\t\t\t\t\t<H2>Following</H2>\r\n\t\t\t\t\t\t<div className=\"list\">\r\n\t\t\t\t\t\t\t{member?.following.map(following => (\r\n\t\t\t\t\t\t\t\t<UserLink\r\n\t\t\t\t\t\t\t\t\tkey={following.username}\r\n\t\t\t\t\t\t\t\t\tusername={following.username}\r\n\t\t\t\t\t\t\t\t\tavatar_url={following.avatar}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</Aside>\r\n\r\n\t\t\t<MainSection>\r\n\t\t\t\t<div className=\"top\">\r\n\t\t\t\t\t<H1>{member?.user.username}'s Profile</H1>\r\n\t\t\t\t\t<p className=\"member\">Member since {format(new Date(user.created_at!), \"MMMM y\")}</p>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"about\">\r\n\t\t\t\t\t<H2>About</H2>\r\n\t\t\t\t\t<p>\r\n\t\t\t\t\t\t{member?.user.about ||\r\n\t\t\t\t\t\t\t\"Apparently, this user prefers to keep an air of mystery about them.\"}\r\n\t\t\t\t\t</p>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"favorites\">\r\n\t\t\t\t\t<H2>Favorites</H2>\r\n\t\t\t\t\t<h3>Anime</h3>\r\n\t\t\t\t\t<div className=\"list\">\r\n\t\t\t\t\t\t{member?.favorite_anime?.map(anime => (\r\n\t\t\t\t\t\t\t<Card key={anime.anime_id}>\r\n\t\t\t\t\t\t\t\t<Link to={`/anime/${anime.anime_id}`}>\r\n\t\t\t\t\t\t\t\t\t<img src={anime.cover_image} alt=\"\" />\r\n\t\t\t\t\t\t\t\t\t<p>{anime.title}</p>\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{member?.favorite_characters.length ? (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<h3>Characters</h3>\r\n\t\t\t\t\t\t\t<div className=\"list\">\r\n\t\t\t\t\t\t\t\t{member?.favorite_characters?.map(character => (\r\n\t\t\t\t\t\t\t\t\t<Card key={character.character_id}>\r\n\t\t\t\t\t\t\t\t\t\t<Link to={`/character/${character.character_id}`}>\r\n\t\t\t\t\t\t\t\t\t\t\t<img src={character.cover_image} alt=\"\" />\r\n\t\t\t\t\t\t\t\t\t\t\t<p>{character.name}</p>\r\n\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t) : null}\r\n\t\t\t\t</div>\r\n\t\t\t\t{member?.threads.length ? (\r\n\t\t\t\t\t<div className=\"threads\">\r\n\t\t\t\t\t\t<H2>Threads</H2>\r\n\t\t\t\t\t\t{member?.threads.map(thread => (\r\n\t\t\t\t\t\t\t<Link key={thread.thread_id} to={`/discussions/thread/${thread.thread_id}`}>\r\n\t\t\t\t\t\t\t\t{thread.topic}\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) : null}\r\n\t\t\t</MainSection>\r\n\t\t</MemberPageStyle>\r\n\t)\r\n}\r\nexport default memo(MemberPage)\r\nconst UserLink: FC<{ username: string; avatar_url: string; isMobile?: boolean }> = ({\r\n\tusername,\r\n\tavatar_url,\r\n\tisMobile = false,\r\n}) => {\r\n\treturn (\r\n\t\t<UserLinkStyle isMobile={isMobile}>\r\n\t\t\t<Link key={username} className=\"user-card\" to={`/user/${username}`}>\r\n\t\t\t\t<img src={avatar_url} alt=\"\" />\r\n\t\t\t\t<span>{username}</span>\r\n\t\t\t</Link>\r\n\t\t</UserLinkStyle>\r\n\t)\r\n}\r\nconst UserLinkStyle = styled.div<{ isMobile: boolean }>`\r\n\tmargin-right: ${({ isMobile }) => (isMobile ? \"15px\" : \"10px\")};\r\n\twidth: 50px;\r\n\t@media (max-width: 768px) {\r\n\t\twidth: ${({ isMobile }) => (isMobile ? \"60px\" : \"40px\")};\r\n\t}\r\n\ta {\r\n\t\tspan {\r\n\t\t\tdisplay: block;\r\n\t\t\tcolor: ${({ theme }) => theme.text};\r\n\t\t\tword-wrap: break-word;\r\n\t\t\tfont-size: 0.9rem;\r\n\t\t\t@media (max-width: 768px) {\r\n\t\t\t\tfont-size: 0.75rem;\r\n\t\t\t}\r\n\t\t}\r\n\t\timg {\r\n\t\t\twidth: 50px;\r\n\t\t\theight: 50px;\r\n\t\t\tobject-fit: cover;\r\n\t\t\tobject-position: center;\r\n\t\t\tborder-radius: 7px;\r\n\t\t\t@media (max-width: 768px) {\r\n\t\t\t\twidth: ${({ isMobile }) => (isMobile ? \"60px\" : \"40px\")};\r\n\t\t\t\theight: ${({ isMobile }) => (isMobile ? \"60px\" : \"40px\")};\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`\r\nconst MemberPageStyle = styled.section`\r\n\tmax-width: 1200px;\r\n\tpadding: 50px;\r\n\tmargin: auto;\r\n\tdisplay: flex;\r\n\t@media (max-width: 768px) {\r\n\t\tpadding: 20px;\r\n\t}\r\n\t@media (max-width: 640px) {\r\n\t\tdisplay: block;\r\n\t}\r\n`\r\nconst MainSection = styled.div`\r\n\twidth: 100%;\r\n\t.about {\r\n\t\tmargin: 20px 0;\r\n\t}\r\n\th2 {\r\n\t\tmargin-bottom: 10px;\r\n\t}\r\n\th3 {\r\n\t\tmargin: 10px 0;\r\n\t}\r\n\t.list {\r\n\t\twidth: 100%;\r\n\t\tdisplay: grid;\r\n\t\tgrid-template-columns: repeat(auto-fill, 80px);\r\n\t\tcolumn-gap: 20px;\r\n\t\trow-gap: 20px;\r\n\t}\r\n\t.threads {\r\n\t\ta {\r\n\t\t\tfont-size: 1.2rem;\r\n\t\t\tcolor: ${({ theme }) => theme.text};\r\n\t\t}\r\n\t}\r\n`\r\nconst Aside = styled.aside`\r\n\tmargin-right: 100px;\r\n\t@media (max-width: 1024px) {\r\n\t\tmargin-right: 50px;\r\n\t}\r\n\t.avatar-container {\r\n\t\twidth: 250px;\r\n\t\theight: 250px;\r\n\t\tmargin-bottom: 20px;\r\n\t\t@media (max-width: 1024px) {\r\n\t\t\twidth: 180px;\r\n\t\t\theight: 180px;\r\n\t\t}\r\n\t\timg {\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 100%;\r\n\t\t\tobject-fit: cover;\r\n\t\t\tborder-radius: 10px;\r\n\t\t}\r\n\t}\r\n\t.followers,\r\n\t.following {\r\n\t\tmargin-top: 20px;\r\n\t}\r\n\t.list {\r\n\t\tdisplay: flex;\r\n\t\tflex-wrap: wrap;\r\n\t\twidth: 250px;\r\n\t\t@media (max-width: 1024px) {\r\n\t\t\twidth: 180px;\r\n\t\t}\r\n\t}\r\n`\r\n\r\nconst Card = styled.div`\r\n\twidth: 80px;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\timg {\r\n\t\twidth: 100%;\r\n\t\theight: 120px;\r\n\t\taspect-ratio: 2/3;\r\n\t\tobject-fit: cover;\r\n\t\tborder-radius: 5px;\r\n\t}\r\n\tp {\r\n\t\tfont-size: 0.85rem;\r\n\t\theight: 30px;\r\n\t\tmargin-bottom: 5px;\r\n\t\tword-wrap: break-word;\r\n\t}\r\n`\r\nconst MobileStyle = styled.div`\r\n\t.user-info-top {\r\n\t\tdisplay: flex;\r\n\t\t.avatar {\r\n\t\t\twidth: 120px;\r\n\t\t\timg {\r\n\t\t\t\twidth: 120px;\r\n\t\t\t\theight: 120px;\r\n\t\t\t\tobject-fit: cover;\r\n\t\t\t\tborder-radius: 10px;\r\n\t\t\t}\r\n\t\t}\r\n\t\t.username-date {\r\n\t\t\theight: 120px;\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\t\t\tmargin-left: 30px;\r\n\t\t\tp.member {\r\n\t\t\t\tfont-size: 0.8rem;\r\n\t\t\t}\r\n\t\t\tbutton {\r\n\t\t\t\tmargin-top: auto;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\th2 {\r\n\t\tmargin-top: 20px;\r\n\t}\r\n\t.social {\r\n\t\t.list {\r\n\t\t\tdisplay: flex;\r\n\t\t\twidth: 100%;\r\n\t\t\toverflow-x: auto;\r\n\t\t}\r\n\t}\r\n\t.favorites {\r\n\t\t.list {\r\n\t\t\tdisplay: flex;\r\n\t\t\twidth: 100%;\r\n\t\t\toverflow-x: auto;\r\n\t\t\tmargin: 10px 0;\r\n\t\t\t> * {\r\n\t\t\t\tflex-shrink: 0;\r\n\t\t\t\tmargin-right: 20px;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t.threads a {\r\n\t\tfont-size: 1rem;\r\n\t\tcolor: ${({ theme }) => theme.text};\r\n\t}\r\n`\r\n","// const searchQuery = async (variables: { query: string, page: number }) => {\r\nconst searchQuery = async (variables: any) => {\r\n\tconst query = `\r\n\t\tquery ($id: Int, $page: Int, $perPage: Int, $search: String, \r\n\t\t\t$genre: String, $isAdult: Boolean, $year: Int, $format: MediaFormat, $sort: [MediaSort]) \r\n\t\t{\r\n      Page (page: $page, perPage: $perPage) {\r\n        pageInfo {\r\n          total\r\n          currentPage\r\n          lastPage\r\n          hasNextPage\r\n          perPage\r\n        }\r\n\t\t\t\tmedia (id: $id, search: $search, genre: $genre, isAdult: $isAdult, \r\n\t\t\t\t\ttype: ANIME, seasonYear: $year, format: $format, sort: $sort) \r\n\t\t\t\t{\r\n          id\r\n\t\t\t\t\ttitle {\r\n\t\t\t\t\t\tromaji\r\n\t\t\t\t\t\tenglish\r\n\t\t\t\t\t\tnative\r\n\t\t\t\t\t\tuserPreferred\r\n\t\t\t\t\t} \r\n          coverImage {\r\n\t\t\t\t\t\tmedium\r\n\t\t\t\t\t\tlarge\r\n\t\t\t\t\t\textraLarge\r\n\t\t\t\t\t\tcolor\r\n          }\r\n        }\r\n      }\r\n    }\r\n    `\r\n\tconst url = \"https://graphql.anilist.co\",\r\n\t\toptions = {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\theaders: {\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\tAccept: \"application/json\",\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\tquery: query,\r\n\t\t\t\tvariables: {\r\n\t\t\t\t\t...variables,\r\n\t\t\t\t\tsearch: variables.query,\r\n\t\t\t\t\tsort: variables.query ? [\"SEARCH_MATCH\"] : [\"POPULARITY_DESC\"],\r\n\t\t\t\t},\r\n\t\t\t}),\r\n\t\t}\r\n\ttry {\r\n\t\tconst res = await fetch(url, options)\r\n\t\tconst json = await res.json()\r\n\t\treturn json.data.Page\r\n\t} catch (error) {\r\n\t\tconsole.log(error)\r\n\t}\r\n}\r\nexport default searchQuery\r\n","import styled from \"styled-components\"\r\nimport { H2 } from \"../styles/Styles\"\r\n\r\nconst EmptyEl = styled.div`\r\n\twidth: 100%;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n\timg {\r\n\t\tmax-width: 200px;\r\n\t\tmargin-bottom: 20px;\r\n\t}\r\n`\r\nconst EmptyState = () => {\r\n\treturn (\r\n\t\t<EmptyEl>\r\n\t\t\t<img src=\"/assets/images/no_results.png\" alt=\"\" />\r\n\t\t\t<H2>No results found</H2>\r\n\t\t</EmptyEl>\r\n\t)\r\n}\r\n\r\nexport default EmptyState\r\n","import styled from \"styled-components\"\r\nimport { FC, useState } from \"react\"\r\nimport Skeleton, { SkeletonTheme } from \"react-loading-skeleton\"\r\nimport { Link } from \"react-router-dom\"\r\nexport type CardType = {\r\n\tid: string\r\n\ttitle: {\r\n\t\tenglish: string\r\n\t\tromaji: string\r\n\t}\r\n\tcoverImage: {\r\n\t\tlarge: string\r\n\t\tcolor: string\r\n\t}\r\n}\r\n\r\nexport const Card: FC<{ item: CardType }> = ({ item }) => {\r\n\tconst [loaded, setLoaded] = useState(false)\r\n\tconst title = item.title.english ? item.title.english : item.title.romaji\r\n\tconst image = item.coverImage.large\r\n\tconst bgColor = item.coverImage.color\r\n\r\n\treturn (\r\n\t\t<CardBox bgColor={bgColor}>\r\n\t\t\t<Link to={`/anime/${item.id}`}>\r\n\t\t\t\t<img\r\n\t\t\t\t\t// style={loaded ? {} : { display: \"none\" }}\r\n\t\t\t\t\tsrc={image}\r\n\t\t\t\t\talt={title}\r\n\t\t\t\t\tonLoad={() => setLoaded(true)}\r\n\t\t\t\t/>\r\n\t\t\t\t{/* {loaded ? null : <div className=\"mask\"></div>} */}\r\n\t\t\t\t<p>{title}</p>\r\n\t\t\t</Link>\r\n\t\t</CardBox>\r\n\t)\r\n}\r\n\r\nexport const SkeletonCard: FC<{ item: number }> = ({ item }) => {\r\n\treturn (\r\n\t\t<CardBox key={item}>\r\n\t\t\t<SkeletonTheme highlightColor=\"#a7dac7\" color=\"#cad4de\">\r\n\t\t\t\t<Skeleton key={item} className=\"mask\" />\r\n\t\t\t</SkeletonTheme>\r\n\t\t\t<br />\r\n\t\t\t<SkeletonTheme highlightColor=\"#a7dac7\" color=\"#cad4de\">\r\n\t\t\t\t<Skeleton width=\"120px\" height=\"15px\" key={item} />\r\n\t\t\t</SkeletonTheme>\r\n\t\t</CardBox>\r\n\t)\r\n}\r\n\r\nconst CardBox = styled.div<{ bgColor?: string }>`\r\n\twidth: 100%;\r\n\r\n\ta {\r\n\t\tdisplay: block;\r\n\t\tcolor: ${({ theme }) => theme.text};\r\n\t}\r\n\timg,\r\n\t.mask {\r\n\t\twidth: 100%;\r\n\t\theight: auto;\r\n\t\t/* height: 255px; */\r\n\t\tobject-fit: cover;\r\n\t\taspect-ratio: auto 2 / 3;\r\n\t\tborder-radius: 8px;\r\n\t\tbackground: ${({ bgColor }) => bgColor};\r\n\t}\r\n\t/* @media (max-width: 1100px) {\r\n\t\twidth: 150px;\r\n\t\timg,\r\n\t\t.mask {\r\n\t\t\theight: 210px;\r\n\t\t}\r\n\t}\r\n\t@media (max-width: 950px) {\r\n\t\twidth: 180px;\r\n\t\timg,\r\n\t\t.mask {\r\n\t\t\theight: 255px;\r\n\t\t}\r\n\t}\r\n\t@media (max-width: 900px) {\r\n\t\twidth: 150px;\r\n\t\timg,\r\n\t\t.mask {\r\n\t\t\theight: 210px;\r\n\t\t}\r\n\t}\r\n\t@media (max-width: 720px) {\r\n\t\twidth: 130px;\r\n\t\timg,\r\n\t\t.mask {\r\n\t\t\theight: 180px;\r\n\t\t}\r\n\t}\r\n\t@media (max-width: 640px) {\r\n\t\twidth: 150px;\r\n\t\timg,\r\n\t\t.mask {\r\n\t\t\theight: 210px;\r\n\t\t}\r\n\t}\r\n\t@media (max-width: 560px) {\r\n\t\twidth: 200px;\r\n\t\timg,\r\n\t\t.mask {\r\n\t\t\theight: 280px;\r\n\t\t}\r\n\t}\r\n\r\n\t@media (max-width: 480px) {\r\n\t\twidth: 180px;\r\n\t\timg,\r\n\t\t.mask {\r\n\t\t\theight: 255px;\r\n\t\t}\r\n\t}\r\n\t@media (max-width: 420px) {\r\n\t\twidth: 150px;\r\n\t\timg,\r\n\t\t.mask {\r\n\t\t\theight: 210px;\r\n\t\t}\r\n\t} */\r\n`\r\n","import { useState, useEffect, memo, FC } from \"react\"\r\nimport { useLocation } from \"react-router-dom\"\r\nimport styled from \"styled-components\"\r\nimport searchAPI from \"../api/anime/searchAPI\"\r\nimport SearchSection from \"../components/Search/SearchSection\"\r\nimport InfiniteScroll from \"react-infinite-scroll-component\"\r\nimport EmptyState from \"../components/Search/EmptyState\"\r\nimport { Card, CardType, SkeletonCard } from \"../components/Search/Card\"\r\nimport getUrlObj from \"../utlis/getUrlObj\"\r\nconst array = new Array(18)\r\n\r\nconst SearchPage: FC = () => {\r\n\tconst [result, setResult] = useState<CardType[]>([])\r\n\tconst [hasNoResult, setHasNoResult] = useState(false)\r\n\tconst [page, setPage] = useState(0)\r\n\tconst [loading, setLoading] = useState(true)\r\n\tconst [hasNextPage, sethasNextPage] = useState(true)\r\n\tconst location = useLocation()\r\n\r\n\tconst getData = async () => {\r\n\t\tsetLoading(true)\r\n\t\tconst urlParams = new URLSearchParams(location.search)\r\n\t\tconst entries = urlParams.entries()\r\n\t\tconst newParams = Object.fromEntries(entries)\r\n\t\tconst data = await searchAPI({ ...newParams, page })\r\n\t\tif (!data.media.length) return setHasNoResult(true)\r\n\t\tsetHasNoResult(false)\r\n\t\tsethasNextPage(data.pageInfo.hasNextPage)\r\n\t\tsetResult(prevResult => [...prevResult, ...data.media])\r\n\t\tsetLoading(false)\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tconst { genre, query, format, season, year } = getUrlObj(location.search)\r\n\t\tif (genre || query || format || season || year) {\r\n\t\t\tsetHasNoResult(false)\r\n\t\t\tsetPage(1)\r\n\t\t\tsetResult([])\r\n\t\t\tgetData()\r\n\t\t} else {\r\n\t\t\tsetHasNoResult(true)\r\n\t\t}\r\n\t}, [location])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (page > 1) {\r\n\t\t\tgetData()\r\n\t\t}\r\n\t}, [page])\r\n\r\n\tconst SearchResults = () => {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t{loading && !result.length\r\n\t\t\t\t\t? array.map(num => <SkeletonCard item={num} key={num} />)\r\n\t\t\t\t\t: result.map(item => <Card item={item} key={item.id} />)}\r\n\t\t\t</>\r\n\t\t)\r\n\t}\r\n\treturn (\r\n\t\t<SearchPageStyle>\r\n\t\t\t<SearchSection />\r\n\t\t\t{!hasNoResult ? (\r\n\t\t\t\t<InfiniteScroll\r\n\t\t\t\t\tclassName=\"grid\"\r\n\t\t\t\t\tdataLength={result.length}\r\n\t\t\t\t\tnext={() => setPage(prev => prev + 1)}\r\n\t\t\t\t\tpullDownToRefreshThreshold={50}\r\n\t\t\t\t\thasMore={hasNextPage}\r\n\t\t\t\t\tloader={[1, 2, 3, 4, 5, 6].map(num => (\r\n\t\t\t\t\t\t<SkeletonCard item={num} key={num} />\r\n\t\t\t\t\t))}>\r\n\t\t\t\t\t<SearchResults />\r\n\t\t\t\t</InfiniteScroll>\r\n\t\t\t) : (\r\n\t\t\t\t<EmptyState />\r\n\t\t\t)}\r\n\t\t</SearchPageStyle>\r\n\t)\r\n}\r\nexport default SearchPage\r\nconst SearchPageStyle = styled.div`\r\n\t.grid {\r\n\t\tmargin: 0 auto;\r\n\t\tmax-width: 1200px;\r\n\t\tpadding: 0 50px;\r\n\t\tdisplay: grid;\r\n\t\t/* grid-template-columns: repeat(auto-fit, minmax(100px, 180px)); */\r\n\t\tgrid-template-columns: repeat(5, 1fr);\r\n\t\t/* grid-template-columns: masonry; */\r\n\t\tcolumn-gap: 30px;\r\n\t\trow-gap: 30px;\r\n\t}\r\n\t@media (max-width: 950px) {\r\n\t\t.grid {\r\n\t\t\tgrid-template-columns: repeat(4, auto);\r\n\t\t}\r\n\t}\r\n\t@media (max-width: 768px) {\r\n\t\t.grid {\r\n\t\t\tpadding: 0 20px;\r\n\t\t}\r\n\t}\r\n\t@media (max-width: 640px) {\r\n\t\t.grid {\r\n\t\t\tgrid-template-columns: repeat(3, auto);\r\n\t\t}\r\n\t}\r\n\t@media (max-width: 560px) {\r\n\t\t.grid {\r\n\t\t\tgrid-template-columns: repeat(2, auto);\r\n\t\t}\r\n\t}\r\n`\r\n","import { useEffect, useState, memo, useContext } from \"react\"\r\nimport Navbar from \"./components/Navbar\"\r\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\"\r\nimport { createGlobalStyle, ThemeProvider } from \"styled-components\"\r\nimport Home from \"./pages/HomePage\"\r\nimport Login from \"./pages/LoginPage\"\r\nimport AnimePage from \"./pages/AnimePage\"\r\nimport Register from \"./pages/RegisterPage\"\r\nimport User from \"./pages/AccountPage\"\r\nimport { lightTheme, darkTheme, Theme } from \"./utlis/constants\"\r\nimport Footer from \"./components/Footer\"\r\nimport ModalMessage from \"./components/Modal/ModalMessage\"\r\nimport RootModal from \"./components/Modal/RootModal\"\r\nimport Character from \"./pages/CharacterPage\"\r\nimport DiscussionsListPage from \"./pages/DiscussionsListPage\"\r\nimport DiscussionPage from \"./pages/DiscussionPage\"\r\nimport NotFound from \"./pages/NotFound\"\r\nimport { UserContext } from \"./context/UserContext\"\r\nimport MemberPage from \"./pages/MemberPage\"\r\nimport SearchPage from \"./pages/SearchPage\"\r\n// import { FavoriteContext } from \"./context/FavoriteContext\"\r\n\r\nconst App = () => {\r\n\tconst [theme, setTheme] = useState<Theme>(lightTheme)\r\n\tconst { user, setUser } = useContext(UserContext)\r\n\t// const { fetchFavAnime, fetchFavCharacters, loadingFavAnime, loadingFavCharacters } =\r\n\t// useContext(FavoriteContext)\r\n\tuseEffect(() => {\r\n\t\tsetUser().then(ok => {\r\n\t\t\tif (ok) {\r\n\t\t\t\t// fetchFavAnime()\r\n\t\t\t\t// fetchFavCharacters()\r\n\t\t\t} else {\r\n\t\t\t\t// loadingFavAnime(false)\r\n\t\t\t\t// loadingFavCharacters(false)\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\tconst userTheme = localStorage.getItem(\"theme\")\r\n\t\tsetTheme(userTheme === \"dark\" ? darkTheme : lightTheme)\r\n\t}, [])\r\n\r\n\tconst switchTheme = (themeType: string) => {\r\n\t\tsetTheme(themeType === \"dark\" ? darkTheme : lightTheme)\r\n\t\tlocalStorage.setItem(\"theme\", themeType)\r\n\t}\r\n\treturn (\r\n\t\t<ThemeProvider theme={theme}>\r\n\t\t\t<Router>\r\n\t\t\t\t<GlobalStyle />\r\n\t\t\t\t<div className=\"App\">\r\n\t\t\t\t\t<Navbar theme={theme.theme} switchTheme={switchTheme} />\r\n\t\t\t\t\t<main>\r\n\t\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t\t<Route exact path=\"/\" component={Home} />\r\n\t\t\t\t\t\t\t<Route exact path=\"/anime/:id\" component={AnimePage} />\r\n\t\t\t\t\t\t\t<Route exact path=\"/character/:id\" component={Character} />\r\n\t\t\t\t\t\t\t<Route exact path=\"/user/:username\" component={MemberPage} />\r\n\t\t\t\t\t\t\t<Route exact path=\"/search\" component={SearchPage} />\r\n\t\t\t\t\t\t\t<Route exact path=\"/me/:category\" component={User} />\r\n\t\t\t\t\t\t\t<Route exact path=\"/login\" component={Login} />\r\n\t\t\t\t\t\t\t<Route exact path=\"/register\" component={Register} />\r\n\t\t\t\t\t\t\t<Route exact path=\"/discussions/all\" component={DiscussionsListPage} />\r\n\t\t\t\t\t\t\t<Route exact path=\"/discussions/thread/:thread_id\" component={DiscussionPage} />\r\n\t\t\t\t\t\t\t<Route exact path=\"/404\" component={NotFound} />\r\n\t\t\t\t\t\t\t<Route path=\"*\" component={NotFound} />\r\n\t\t\t\t\t\t</Switch>\r\n\t\t\t\t\t</main>\r\n\t\t\t\t\t<Footer />\r\n\t\t\t\t</div>\r\n\t\t\t\t<ModalMessage />\r\n\t\t\t\t<RootModal />\r\n\t\t\t</Router>\r\n\t\t</ThemeProvider>\r\n\t)\r\n}\r\n\r\nexport default memo(App)\r\nconst GlobalStyle = createGlobalStyle`\r\n  * {\r\n    margin: 0;\r\n    padding: 0;\r\n\t\tbox-sizing: border-box;\r\n\t\tfont-family: 'Overpass', sans-serif;\r\n\t}\r\n\tbody {\r\n\t\tbackground: ${({ theme }: any) => theme.body};\r\n\t}\r\n\r\n\tmain {\r\n  \tmin-height: calc(100vh - 10rem);\r\n\t}\r\n\r\n\ta {\r\n\t\ttext-decoration: none;\r\n\t}\r\n\th1, h2, h3, h4 {\r\n\t\tcolor: ${({ theme }) => theme.header};\r\n\t}\r\n\tp {\r\n\t\tcolor: ${({ theme }) => theme.text};\r\n\t}\r\n`\r\n","import React from \"react\"\r\nimport { render } from \"react-dom\"\r\nimport App from \"./App\"\r\nimport { AppProvider } from \"./context/AppContext\"\r\nimport { UserProvider } from \"./context/UserContext\"\r\n\r\nrender(\r\n\t<React.StrictMode>\r\n\t\t<AppProvider>\r\n\t\t\t<UserProvider>\r\n\t\t\t\t<App />\r\n\t\t\t</UserProvider>\r\n\t\t</AppProvider>\r\n\t</React.StrictMode>,\r\n\tdocument.getElementById(\"root\")\r\n)\r\n"],"sourceRoot":""}